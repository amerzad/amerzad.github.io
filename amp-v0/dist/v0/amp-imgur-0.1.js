(self.AMP=self.AMP||[]).push({n:"amp-imgur",v:"2008290323002",f:(function(AMP,_){
'use strict';var c="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function f(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],d=0;d<b.length;++d){var e=b[d];if(e&&e.Math==Math)return}(function(){throw Error("Cannot find global object");})()}f(this);"function"===typeof Symbol&&Symbol("x");var g;
if("function"==typeof Object.setPrototypeOf)g=Object.setPrototypeOf;else{var k;a:{var l={a:!0},m={};try{m.__proto__=l;k=m.a;break a}catch(a){}k=!1}g=k?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var n=g,p;
function q(a,b){var d=a,e=b;var h=function(a){try{return e(a)}catch(r){throw self.__AMP_REPORT_ERROR(r),r;}};var t=u();d.addEventListener("message",h,t?void 0:!1);return function(){d&&d.removeEventListener("message",h,t?void 0:!1);h=d=e=null}}function u(){if(void 0!==p)return p;p=!1;try{var a={get capture(){p=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return p};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var v=Object.prototype.toString;var w=self.AMP_CONFIG||{},x=("string"==typeof w.cdnProxyRegex?new RegExp(w.cdnProxyRegex):w.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function y(a){if(self.document&&self.document.head&&(!self.location||!x.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}w.cdnUrl||y("runtime-host");w.geoApiUrl||y("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var z=self.__AMP_LOG;function A(a){return 1>a.length?!1:0==a.lastIndexOf("{",0)};function B(a,b){return q(a,b)};function C(a){a=AMP.BaseElement.call(this,a)||this;a.c=null;a.h=null;a.j="";return a}var D=AMP.BaseElement;C.prototype=c(D.prototype);C.prototype.constructor=C;if(n)n(C,D);else for(var E in D)if("prototype"!=E)if(Object.defineProperties){var F=Object.getOwnPropertyDescriptor(D,E);F&&Object.defineProperty(C,E,F)}else C[E]=D[E];C.m=D.prototype;C.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
C.prototype.buildCallback=function(){var a=this.element.getAttribute("data-imgur-id"),b=this.element;if(!z.user)throw Error("failed to call initLogConstructor");this.j=z.user.assert(a,"The data-imgur-id attribute is required for <amp-imgur> %s",b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};
C.prototype.layoutCallback=function(){var a=this.element.ownerDocument.createElement("iframe");this.c=a;this.h=B(this.win,this.l.bind(this));a.setAttribute("scrolling","no");a.setAttribute("frameborder","0");a.setAttribute("allowfullscreen","true");var b=this.j.replace(/^(a\/)?(.*)/,function(a,b,h){return"a/"+encodeURIComponent(h)});a.src="https://imgur.com/"+b+"/embed?pub=true";this.applyFillContent(a);this.element.appendChild(a);return this.loadPromise(a)};
C.prototype.l=function(a){if("https://imgur.com"==a.origin&&a.source==this.c.contentWindow){var b=a.data;if(b&&("[object Object]"===v.call(b)||A(b))){if("[object Object]"===v.call(b))var d=b;else try{d=JSON.parse(b)}catch(e){d=null}a=d;"resize_imgur"==a.message&&this.attemptChangeHeight(a.height).catch(function(){})}}};C.prototype.unlayoutCallback=function(){if(this.c){var a=this.c;a.parentElement&&a.parentElement.removeChild(a);this.c=null}this.h&&this.h();return!0};
(function(a){a.registerElement("amp-imgur",C)})(self.AMP);
})});

//# sourceMappingURL=amp-imgur-0.1.js.map
