(self.AMP=self.AMP||[]).push({n:"amp-kaltura-player",v:"2008290323002",f:function(AMP,_){let f=self.AMP_CONFIG||{},h=("string"==typeof f.cdnProxyRegex?new RegExp(f.cdnProxyRegex):f.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function k(b){if(self.document&&self.document.head&&(!self.location||!h.test(self.location.origin))){var a=self.document.head.querySelector(`meta[name="${b}"]`);a&&a.getAttribute("content")}}f.cdnUrl||k("runtime-host");f.geoApiUrl||k("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let l=self.__AMP_LOG;function m(b){return b||{}}m({c:!0,v:!0,a:!0,ad:!0});function n(b,a){if(!a)return b;let c=b.split("#",2),d=c[0].split("?",2);let e=d[0]+(d[1]?`?${d[1]}&${a}`:`?${a}`);return e+=c[1]?`#${c[1]}`:""}function p(b){let a=[];for(let d in b){let e=b[d];if(null!=e)if(Array.isArray(e))for(var c=0;c<e.length;c++){let b=e[c];a.push(`${encodeURIComponent(d)}=${encodeURIComponent(b)}`)}else c=e,a.push(`${encodeURIComponent(d)}=${encodeURIComponent(c)}`)}return a.join("&")}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function q(b,a){let c=a||(a=>a),d=b.dataset;b={};let e=/^param(.+)/;for(let a in d){var g=a.match(e);g&&(g=g[1][0].toLowerCase()+g[1].substr(1),b[c(g)]=d[a])}return b}class r extends AMP.BaseElement{constructor(b){super(b);this.j=null;this.m=this.h=this.l=""}preconnectCallback(b){var a=this.win;a=a.__AMP_TOP||(a.__AMP_TOP=a);{let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});a=b}a=a.preconnect;a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));a=a.obj;a.url(this.getAmpDoc(),`https://${encodeURIComponent(this.l)}${b}`)}isLayoutSupported(b){return"fixed"==b||"fixed-height"==b||"responsive"==b||"fill"==b||"flex-item"==b||"fluid"==b||"intrinsic"==b}buildCallback(){var b=this.element.getAttribute("data-partner"),a=this.element;if(!l.user)throw Error("failed to call initLogConstructor");this.h=l.user.assert(b,"The data-partner attribute is required for <amp-kaltura-player> %s",a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);this.element.classList.add("i-amphtml-media-component");this.m=this.element.getAttribute("data-entryid")||"default";this.l=this.element.getAttribute("data-service-url")||"cdnapisec.kaltura.com"}layoutCallback(){let b=this.element.getAttribute("data-uiconf")||this.element.getAttribute("data-uiconf-id")||"default",a=this.element.ownerDocument.createElement("iframe");let c=`https://${encodeURIComponent(this.l)}/p/${encodeURIComponent(this.h)}/sp/${encodeURIComponent(this.h)}00/embedIframeJs/uiconf_id/${encodeURIComponent(b)}/partner_id/${encodeURIComponent(this.h)}?iframeembed=true&playerId=kaltura_player_amp&entry_id=${encodeURIComponent(this.m)}`;let d=q(this.element,a=>`flashvars[${a}]`);c=n(c,p(d));a.setAttribute("frameborder","0");a.setAttribute("allowfullscreen","true");a.src=c;this.applyFillContent(a);this.element.appendChild(a);this.j=a;return this.loadPromise(a)}createPlaceholderCallback(){let b=this.win.document.createElement("amp-img");this.propagateAttributes(["aria-label"],b);let a=this.element.getAttribute("width"),c=this.element.getAttribute("height");let d=`https://${encodeURIComponent(this.l)}/p/${encodeURIComponent(this.h)}/thumbnail/entry_id/${encodeURIComponent(this.m)}`;a&&(d+=`/width/${a}`);c&&(d+=`/height/${c}`);b.setAttribute("src",d);b.setAttribute("layout","fill");b.setAttribute("placeholder","");b.setAttribute("referrerpolicy","origin");b.hasAttribute("aria-label")?b.setAttribute("alt","Loading video - "+b.getAttribute("aria-label")):b.setAttribute("alt","Loading video");return b}pauseCallback(){this.j&&this.j.contentWindow&&this.j.contentWindow.postMessage(JSON.stringify(m({method:"pause",value:""})),"*")}}(b=>{b.registerElement("amp-kaltura-player",r)})(self.AMP)}});