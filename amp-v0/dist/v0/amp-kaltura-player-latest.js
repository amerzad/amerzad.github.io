(self.AMP=self.AMP||[]).push({n:"amp-kaltura-player",v:"2007102309000",f:(function(AMP,_){
var e="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function g(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object");})()}g(this);"function"===typeof Symbol&&Symbol("x");var h;
if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var l;a:{var m={a:!0},n={};try{n.__proto__=m;l=n.a;break a}catch(a){}l=!1}h=l?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=h;var r=self.AMP_CONFIG||{},t=("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function u(a){if(self.document&&self.document.head&&(!self.location||!t.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}r.cdnUrl||u("runtime-host");r.geoApiUrl||u("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var v=self.__AMP_LOG;function w(a){return a||{}};w({c:!0,v:!0,a:!0,ad:!0,action:!0});function x(a,b){if(!b)return a;var c=a.split("#",2),d=c[0].split("?",2),f=d[0]+(d[1]?"?"+d[1]+"&"+b:"?"+b);return f+=c[1]?"#"+c[1]:""}function y(a){var b=[],c;for(c in a){var d=a[c];if(null!=d)if(Array.isArray(d))for(var f=0;f<d.length;f++){var k=d[f];b.push(encodeURIComponent(c)+"="+encodeURIComponent(k))}else f=d,b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}return b.join("&")};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function z(a,b){var c=b||function(a){return a},d=a.dataset;a={};var f=/^param(.+)/,k;for(k in d){var p=k.match(f);if(p){var E=p[1][0].toLowerCase()+p[1].substr(1);a[c(E)]=d[k]}}return a};function A(a){a=AMP.BaseElement.call(this,a)||this;a.j=null;a.h="";a.l="";return a}var B=AMP.BaseElement;A.prototype=e(B.prototype);A.prototype.constructor=A;if(q)q(A,B);else for(var C in B)if("prototype"!=C)if(Object.defineProperties){var D=Object.getOwnPropertyDescriptor(B,C);D&&Object.defineProperty(A,C,D)}else A[C]=B[C];A.m=B.prototype;
A.prototype.preconnectCallback=function(a){var b=this.win;b=b.__AMP_TOP||(b.__AMP_TOP=b);var c=b.__AMP_SERVICES;c||(c=b.__AMP_SERVICES={});b=c.preconnect;b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));b.obj.url(this.getAmpDoc(),"https://cdnapisec.kaltura.com",a)};A.prototype.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a||"responsive"==a||"fill"==a||"flex-item"==a||"fluid"==a||"intrinsic"==a};
A.prototype.buildCallback=function(){var a=this.element.getAttribute("data-partner"),b=this.element;if(!v.user)throw Error("failed to call initLogConstructor");this.h=v.user.assert(a,"The data-partner attribute is required for <amp-kaltura-player> %s",b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);this.element.classList.add("i-amphtml-media-component");this.l=this.element.getAttribute("data-entryid")||"default"};
A.prototype.layoutCallback=function(){var a=this.element.getAttribute("data-uiconf")||this.element.getAttribute("data-uiconf-id")||"default",b=this.element.ownerDocument.createElement("iframe"),c="https://cdnapisec.kaltura.com/p/"+encodeURIComponent(this.h)+"/sp/"+encodeURIComponent(this.h)+"00/embedIframeJs/uiconf_id/"+encodeURIComponent(a)+"/partner_id/"+encodeURIComponent(this.h)+"?iframeembed=true&playerId=kaltura_player_amp&entry_id="+encodeURIComponent(this.l),d=z(this.element,function(a){return"flashvars["+
a+"]"});c=x(c,y(d));b.setAttribute("frameborder","0");b.setAttribute("allowfullscreen","true");b.src=c;this.applyFillContent(b);this.element.appendChild(b);this.j=b;return this.loadPromise(b)};
A.prototype.createPlaceholderCallback=function(){var a=this.win.document.createElement("amp-img");this.propagateAttributes(["aria-label"],a);var b=this.element.getAttribute("width"),c=this.element.getAttribute("height"),d="https://cdnapisec.kaltura.com/p/"+encodeURIComponent(this.h)+"/thumbnail/entry_id/"+encodeURIComponent(this.l);b&&(d+="/width/"+b);c&&(d+="/height/"+c);a.setAttribute("src",d);a.setAttribute("layout","fill");a.setAttribute("placeholder","");a.setAttribute("referrerpolicy","origin");
a.hasAttribute("aria-label")?a.setAttribute("alt","Loading video - "+a.getAttribute("aria-label")):a.setAttribute("alt","Loading video");return a};A.prototype.pauseCallback=function(){this.j&&this.j.contentWindow&&this.j.contentWindow.postMessage(JSON.stringify(w({method:"pause",value:""})),"*")};(function(a){a.registerElement("amp-kaltura-player",A)})(self.AMP);
})});

//# sourceMappingURL=amp-kaltura-player-0.1.js.map
