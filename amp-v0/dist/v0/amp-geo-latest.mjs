(self.AMP=self.AMP||[]).push({n:"amp-geo",v:"2008290323002",f:function(AMP,_){let g;class k{constructor(){let a,b;this.promise=new Promise((c,e)=>{a=c;b=e});this.resolve=a;this.reject=b}}function m(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let n=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function p(a){let b=Object.create(null);if(!a)return b;let c;for(;c=n.exec(a);){let a=m(c[1],c[1]),f=c[2]?m(c[2].replace(/\+/g," "),c[2]):"";b[a]=f}return b}let q="";function r(a){let b=a||self;if(b.__AMP_MODE)var c=b.__AMP_MODE;else{{c=p(b.location.originalHash||b.location.hash);let a=p(b.location.search);q||(q=b.AMP_CONFIG&&b.AMP_CONFIG.v?b.AMP_CONFIG.v:"012008290323002");c={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(c.development)||b.AMP_DEV_MODE),examiner:"2"==c.development,esm:!0,geoOverride:c["amp-geo"],minified:!0,lite:void 0!=a.amp_lite,test:!1,log:c.log,version:"2008290323002",rtvVersion:q}}c=b.__AMP_MODE=c}return c}let t=Object.prototype.toString;let u=self.AMP_CONFIG||{},v=("string"==typeof u.cdnProxyRegex?new RegExp(u.cdnProxyRegex):u.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function w(a){if(!self.document||!self.document.head||self.location&&v.test(self.location.origin))return null;let b=self.document.head.querySelector(`meta[name="${a}"]`);return b&&b.getAttribute("content")||null}let x={thirdParty:u.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:u.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof u.thirdPartyFrameRegex?new RegExp(u.thirdPartyFrameRegex):u.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:u.cdnUrl||w("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:v,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:u.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:u.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:u.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:u.geoApiUrl||w("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let y=self.__AMP_LOG;function z(){if(!y.user)throw Error("failed to call initLogConstructor");return y.user}function A(){if(y.dev)return y.dev;throw Error("failed to call initLogConstructor")}(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0});function B(a){return!(!a.AMP_CONFIG||!a.AMP_CONFIG.canary)}function C(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}function D(a){let b=a.ownerDocument.defaultView;var c=b.__AMP_TOP||(b.__AMP_TOP=b);let e=b!=c;if(c.__AMP__EXPERIMENT_TOGGLES)var f=c.__AMP__EXPERIMENT_TOGGLES;else{c.__AMP__EXPERIMENT_TOGGLES=Object.create(null);f=c.__AMP__EXPERIMENT_TOGGLES;if(c.AMP_CONFIG)for(var h in c.AMP_CONFIG){var d=c.AMP_CONFIG[h];"number"===typeof d&&0<=d&&1>=d&&(f[h]=Math.random()<d)}if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-doc-opt-in"])&&0<c.AMP_CONFIG["allow-doc-opt-in"].length&&(h=c.AMP_CONFIG["allow-doc-opt-in"],d=c.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){d=d.getAttribute("content").split(",");for(var l=0;l<d.length;l++)-1!=h.indexOf(d[l])&&(f[d[l]]=!0)}Object.assign(f,C(c));if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-url-opt-in"])&&0<c.AMP_CONFIG["allow-url-opt-in"].length)for(h=c.AMP_CONFIG["allow-url-opt-in"],c=p(c.location.originalHash||c.location.hash),d=0;d<h.length;d++)l=c[`e-${h[d]}`],"1"==l&&(f[h[d]]=!0),"0"==l&&(f[h[d]]=!1)}let M=!!f["ampdoc-fie"];e&&!M?a=E(b,"url")?F(b,"url"):null:(a=G(a),a=G(a),a=a.isSingleDoc()?a.win:a,a=E(a,"url")?F(a,"url"):null);return a}function H(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return F(a,b)}function G(a){return a.nodeType?H((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function F(a,b){E(a,b);{let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});a=b}b=a[b];b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));return b.obj}function E(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function I(a){return"SCRIPT"==a.tagName&&a.hasAttribute("type")&&"APPLICATION/JSON"==a.getAttribute("type").toUpperCase()}let J={"preset-eea":"AT BE BG HR CY CZ DK EE FI FR DE GR HU IS IE IT LV LI LT LU MT NL NO PL PT RO SK SI ES SE GB AX IC EA GF PF TF GI GP GG JE MQ YT NC RE BL MF PM SJ VA WF EZ CH".split(" "),"preset-us-ca":["us-ca"]};function K(a,b){try{return JSON.parse(a)}catch(c){return b&&b(c),null}}let L=/amp-iso-country-(\w+)/,N=/^(?:(\w{2})(?:\s(\w{2}-\w{2}))?)?\s*/;function O(a,b){return a?a:(P.resolve(null),z().assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0))}function Q(a,b){let c=a.getAmpDoc(),e={};return c.whenReady().then(()=>c.waitForBodyOpen()).then(b=>R(a,c).then(()=>b)).then(f=>{S(a,b);let h=[];switch(a.l){case 2:h=T(f);case 0:case 3:e.ISOCountry=a.h;let d=a.j.map(a=>{e[a]=!0;return"amp-geo-group-"+a});a.j.length||d.push("amp-geo-no-group");a.w&&d.push("amp-geo-error");e.ISOCountryGroups=a.j;d.push("amp-iso-country-"+a.h);a.mutateElement(()=>{let a=f.classList;h.push("amp-geo-pending");h.forEach(b=>{a.remove(b)});d.forEach(b=>a.add(b));if(b.AmpBind){let a=c.getElementById("ampGeo");a&&a.parentNode.removeChild(a);let b=c.win.document.createElement("amp-state"),d=c.win.document.createElement("script");d.setAttribute("type","application/json");d.textContent=JSON.stringify(e);b.appendChild(d);b.id="ampGeo";f.appendChild(b)}},f)}return{ISOCountry:a.h,matchedISOCountryGroups:a.j,allISOCountryGroups:a.m,isInCountryGroup:a.isInCountryGroup.bind(a)}})}function U(a){let b=V(a);return b?H(a.win,"timer").timeoutPromise(6e4,H(a.win,"xhr").fetchJson(b,{mode:"cors",method:"GET",credentials:"omit"}).then(a=>a.json()).then(a=>/^[a-z]{2}$/i.test(a.country)?{country:a.country.toLowerCase(),subdivision:/^[a-z0-9]{1,3}$/i.test(a.subdivision)?a.subdivision.toLowerCase():null}:(z().error("amp-geo",'Invalid API response, expected schema not matched for property "country"'),null)).catch(a=>{z().error("amp-geo","XHR country request failed",a);return null}),"Timeout (60 sec) reached waiting for API response").catch(a=>{z().error("amp-geo",a);return null}):Promise.resolve(null)}function R(a,b){let c=b.getBody().className.match(L),e=N.exec("{{AMP_ISO_COUNTRY_HOTPATCH}}");if(r(a.win).geoOverride&&B(a.win)){let b=N.exec(r(a.win).geoOverride.toLowerCase());b[1]&&(a.h=b[1].toLowerCase(),b[2]&&(a.o=b[2].toLowerCase()),a.l=2)}else c&&!D(a.element).isProxyOrigin(a.win.location)?(a.l=1,a.h=c[1]):e[1]?(a.l=0,a.h=e[1].toLowerCase(),e[2]&&"us-ca"===e[2].toLowerCase()&&(a.o="us-ca")):""===e[0]&&x.geoApi?a.l=3:""===e[0]&&(a.w=!0,A().error("amp-geo","GEONOTPATCHED: amp-geo served unpatched, ISO country not set"));3!==a.l?(g||(g=Promise.resolve(void 0)),b=g):b=U(a).then(b=>{if(b){let c=b.country,e=b.subdivision;a.h=c;e&&"us-ca"===`${c}-${e}`&&(a.o="us-ca")}else a.w=!0,A().error("amp-geo","GEONOTPATCHED: amp-geo served unpatched and API response not valid, ISO country not set")});return b}function V(a){var b=x.geoApi;return"string"!==typeof b?(z().error("amp-geo","geoApiUrl must be a string URL"),null):D(a.element).isSecure(b)?b:(z().error("amp-geo","geoApiUrl must be secure (https)"),null)}function W(a,b){let c=b.reduce((a,b)=>{if(/^preset-/.test(b))return O(Array.isArray(J[b]),`<amp-geo> preset ${b} not found`),a.concat(J[b]);"unknown"==b||/^[a-zA-Z]{2}$/.test(b)?a.push(b):z().error("amp-geo"," country %s not valid, will be ignored",b);return a},[]).map(a=>a.toLowerCase());return c.includes(a.h)||c.includes("us-ca")&&"us-ca"==a.o}function S(a,b){let c=b.ISOCountryGroups;c&&(O("[object Object]"===t.call(c),"<amp-geo> ISOCountryGroups must be an object"),a.m=Object.keys(c),a.m.forEach(b=>{O(/^[a-z]+[a-z0-9]*$/i.test(b)&&!/^amp/.test(b),`<amp-geo> ISOCountryGroups[${b}] name is invalid`);O(Array.isArray(c[b]),`<amp-geo> ISOCountryGroups[${b}] must be an array`);W(a,c[b])&&a.j.push(b)}))}function T(a){let b=a.classList,c=[],e=/^amp-iso-country-|^amp-geo-group-/i;for(a=b.length-1;0<a;a--)e.test(b[a])&&c.push(b[a]);return c}class X extends AMP.BaseElement{constructor(a){super(a);this.l=0;this.w=!1;this.o=this.h="unknown";this.j=[];this.m=[]}prerenderAllowed(){return!0}buildCallback(){var a=this.element.children;a.length&&O(1===a.length&&I(a[0]),'amp-geo can only have one <script type="application/json"> child');a=a.length?K(a[0].textContent,()=>O(!1,"amp-geo Unable to parse JSON")):{};let b=Q(this,a||{});P.resolve(b)}isInCountryGroup(a){let b=a.trim().split(/,\s*/);return b.filter(a=>0<=this.m.indexOf(a)).length!==b.length?1:0<b.filter(a=>0<=this.j.indexOf(a)).length?2:3}}let P=null;(a=>{P=new k;a.registerElement("amp-geo",X);a.registerServiceForDoc("geo",(function(){return P.promise}))})(self.AMP)}});