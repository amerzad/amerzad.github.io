(self.AMP=self.AMP||[]).push({n:"amp-selector",v:"2008290323002",f:function(AMP,_){let l;function m(){return l?l:l=Promise.resolve(void 0)}function n(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let p=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function q(a){return a?Array.prototype.slice.call(a):[]}let r=self.AMP_CONFIG||{},t=("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function u(a){if(self.document&&self.document.head&&(!self.location||!t.test(self.location.origin))){var b=self.document.head.querySelector(`meta[name="${a}"]`);b&&b.getAttribute("content")}}r.cdnUrl||u("runtime-host");r.geoApiUrl||u("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let v=self.__AMP_LOG;function w(){if(!v.user)throw Error("failed to call initLogConstructor");return v.user}function x(a,b){w().assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}function y(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(d){}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}function z(a){let b=a.ownerDocument.defaultView;var c=b.__AMP_TOP||(b.__AMP_TOP=b);let d=b!=c;if(c.__AMP__EXPERIMENT_TOGGLES)var f=c.__AMP__EXPERIMENT_TOGGLES;else{c.__AMP__EXPERIMENT_TOGGLES=Object.create(null);f=c.__AMP__EXPERIMENT_TOGGLES;if(c.AMP_CONFIG)for(var h in c.AMP_CONFIG){var e=c.AMP_CONFIG[h];"number"===typeof e&&0<=e&&1>=e&&(f[h]=Math.random()<e)}if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-doc-opt-in"])&&0<c.AMP_CONFIG["allow-doc-opt-in"].length&&(h=c.AMP_CONFIG["allow-doc-opt-in"],e=c.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){e=e.getAttribute("content").split(",");for(var g=0;g<e.length;g++)-1!=h.indexOf(e[g])&&(f[e[g]]=!0)}Object.assign(f,y(c));if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-url-opt-in"])&&0<c.AMP_CONFIG["allow-url-opt-in"].length){h=c.AMP_CONFIG["allow-url-opt-in"];c=c.location.originalHash||c.location.hash;e=Object.create(null);if(c)for(var k;k=p.exec(c);)g=n(k[1],k[1]),k=k[2]?n(k[2].replace(/\+/g," "),k[2]):"",e[g]=k;c=e;for(e=0;e<h.length;e++)g=c[`e-${h[e]}`],"1"==g&&(f[h[e]]=!0),"0"==g&&(f[h[e]]=!1)}}let O=!!f["ampdoc-fie"];d&&!O?a=A(b,"action")?B(b,"action"):null:(a=C(a),a=C(a),a=a.isSingleDoc()?a.win:a,a=A(a,"action")?B(a,"action"):null);return a}function C(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=B(b,"ampdoc").getAmpDoc(a)}return a}function B(a,b){A(a,b);{let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});a=b}b=a[b];b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));return b.obj}function A(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function D(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function E(a){return a.closest?a.closest("[option]"):D(a,a=>{{let b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;a=b?b.call(a,"[option]"):!1}return a})}function F(a){return"rtl"==(a.body.getAttribute("dir")||a.documentElement.getAttribute("dir")||"ltr")}function G(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}let H={NONE:"none",FOCUS:"focus",SELECT:"select"};function I(a,b){a.j.length=0;let c=b?b:q(a.element.querySelectorAll("[option]"));c.forEach(b=>{b.hasAttribute("role")||b.setAttribute("role","option");b.hasAttribute("disabled")&&b.setAttribute("aria-disabled","true");b.hasAttribute("selected")?J(a,b):K(a,b);b.tabIndex=0});a.c=c;L(a);M(a)}function N(a,b,c){let d=a.c.indexOf(a.j[0]);b=-1===d&&0>b?b:d+b;var f=a.c.length;b=a.c[0<b&&0<f?b%f:(b%f+f)%f];J(a,b);let h=a.c[d];h&&K(a,h);M(a);P(a,b,c)}function Q(a,b,c,d){let f=a.c[b],h=f.hasAttribute("selected"),e=void 0!==c?c:!h,g=a.c.indexOf(a.j[0]);return e===h?m():a.mutateElement(()=>{if(g!==b){J(a,f);let b=a.c[g];b&&K(a,b)}else K(a,f);P(a,f,d)})}function R(a,b){var c=Array.isArray(b)?b:[b];if(null===b||0==c.length)a.w();else{a.l||(c=c.slice(0,1));var d=S(a);if(!G(d.sort(),c.sort())){var f=c.reduce((a,b)=>{a[b]=!0;return a},Object.create(null));for(b=0;b<a.c.length;b++){c=a.c[b];let d=c.getAttribute("option");f[d]?J(a,c):K(a,c)}L(a);M(a)}}}function S(a){return a.j.map(a=>a.getAttribute("option"))}function J(a,b){a.j.includes(b)||(a.l||a.w(),b.setAttribute("selected",""),b.setAttribute("aria-selected","true"),a.j.push(b))}function K(a,b){b.removeAttribute("selected");b.setAttribute("aria-selected","false");let c=a.j.indexOf(b);-1!==c&&a.j.splice(c,1)}function L(a,b){if("none"!=a.m){a.c.forEach(a=>{a.tabIndex=-1});var c=b;c||(c=a.l?a.c[0]:a.j[0]||a.c[0]);c&&(a.h=a.c.indexOf(c),c.tabIndex=0)}}function M(a){let b=[],c=a.element.getAttribute("name");if(c&&!a.element.hasAttribute("disabled")){var d=a.element.getAttribute("form");a.A.forEach(b=>{a.element.removeChild(b)});a.A=[];var f=a.win.document,h=f.createDocumentFragment();a.j.forEach(e=>{if(!e.hasAttribute("disabled")){let g=f.createElement("input");e=e.getAttribute("option");g.setAttribute("type","hidden");g.setAttribute("name",c);g.setAttribute("value",e);d&&g.setAttribute("form",d);a.A.push(g);h.appendChild(g);b.push(e)}});a.element.appendChild(h)}}function P(a,b,c){var d=a.win;b={targetOption:b.getAttribute("option"),selectedOptions:S(a)};{let a={detail:b};Object.assign(a,void 0);"function"==typeof d.CustomEvent?d=new d.CustomEvent("amp-selector.select",a):(d=d.document.createEvent("CustomEvent"),d.initCustomEvent("amp-selector.select",!!a.bubbles,!!a.cancelable,b))}a.o.trigger(a.element,"select",d,c)}function T(a,b){b.hasAttribute("disabled")||a.mutateElement(()=>{b.hasAttribute("selected")?a.l&&(K(a,b),M(a)):(J(a,b),M(a));L(a,b);P(a,b,3)})}function U(a,b){let c=a.win.document;let d=0;switch(b.key){case"ArrowLeft":d=F(c)?1:-1;break;case"ArrowUp":d=-1;break;case"ArrowRight":d=F(c)?-1:1;break;case"ArrowDown":d=1;break;case"Home":d=1;break;case"End":d=-1;break;default:return m()}b.preventDefault();a.c[a.h].tabIndex=-1;return V(a).then(c=>{let f=a.h;switch(b.key){case"Home":a.h=a.c.length-1;break;case"End":a.h=0}do{a.h=(a.h+d)%a.c.length,0>a.h&&(a.h+=a.c.length)}while(W(a.c[a.h],c[a.h])&&a.h!=f);let e=a.c[a.h];e.tabIndex=0;try{e.focus()}catch(k){}let g=a.c[a.h];"select"==a.m&&T(a,g)})}function V(a){return a.measureElement(()=>a.c.map(a=>a.getBoundingClientRect()))}class X extends AMP.BaseElement{constructor(a){super(a);this.l=!1;this.j=[];this.c=[];this.A=[];this.o=null;this.h=0;this.m="none"}isLayoutSupported(){return!0}prerenderAllowed(){return!0}buildCallback(){this.o=z(this.element);this.l=this.element.hasAttribute("multiple");this.element.hasAttribute("role")||this.element.setAttribute("role","listbox");this.l&&this.element.setAttribute("aria-multiselectable","true");this.element.hasAttribute("disabled")&&this.element.setAttribute("aria-disabled","true");let a=this.element.getAttribute("keyboard-select-mode");a?(a=a.toLowerCase(),w().assertEnumValue(H,a),x(!(this.l&&"select"==a),"[keyboard-select-mode=select] not supported for multiple selection amp-selector")):a="none";this.m=a;this.registerAction("clear",this.w.bind(this));I(this);this.element.addEventListener("click",this.B.bind(this));this.element.addEventListener("keydown",this.C.bind(this));this.registerAction("selectUp",a=>{let b=a.args;N(this,b&&void 0!==b.delta?-b.delta:-1,a.trust)},1);this.registerAction("selectDown",a=>{let b=a.args;N(this,b&&void 0!==b.delta?b.delta:1,a.trust)},1);this.registerAction("toggle",a=>{let b=a.args;a=a.trust;x(0<=b.index,"'index' must be greater than 0");x(b.index<this.c.length,"'index' must be less than the length of options in the <amp-selector>");return b&&void 0!==b.index?Q(this,b.index,b.value,a):Promise.reject("'index' must be specified")},1);this.o.addToAllowlist("amp-selector",["clear","selectDown","selectUp","toggle"],["email"]);this.element.addEventListener("amp:dom-update",this.D.bind(this))}mutatedAttributesCallback(a){let b=a.selected;void 0!==b&&R(this,b);let c=a.disabled;void 0!==c&&(c?this.element.setAttribute("aria-disabled","true"):this.element.removeAttribute("aria-disabled"))}D(){let a=q(this.element.querySelectorAll("[option]"));G(this.c,a)||I(this,a)}B(a){!this.element.hasAttribute("disabled")&&(a=a.target)&&(a.hasAttribute("option")||(a=E(a)),a&&T(this,a))}C(a){if(this.element.hasAttribute("disabled"))return m();switch(a.key){case"ArrowLeft":case"ArrowUp":case"ArrowRight":case"ArrowDown":case"Home":case"End":if("none"!=this.m)return U(this,a);break;case"Enter":case" ":{let b=a.key;" "!=b&&"Enter"!=b||!this.c.includes(a.target)||(a.preventDefault(),T(this,a.target))}}return m()}w(){for(;0<this.j.length;){let a=this.j.pop();K(this,a)}M(this)}F(){return this.c}G(){return this.j}}function W(a,b){let c=b.width,d=b.height;return a.hidden||0==c||0==d}(a=>{a.registerElement("amp-selector",X,"amp-selector [option]{cursor:pointer}amp-selector [option][selected]{cursor:auto;outline:1px solid rgba(0,0,0,0.7)}amp-selector[multiple] [option][selected]{cursor:pointer;outline:1px solid rgba(0,0,0,0.7)}amp-selector [disabled][option],amp-selector[disabled] [option],amp-selector[disabled] [selected],amp-selector [selected][disabled]{cursor:auto;outline:none}\n/*# sourceURL=/extensions/amp-selector/0.1/amp-selector.css*/")})(self.AMP)}});