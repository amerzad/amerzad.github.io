(self.AMP=self.AMP||[]).push({n:"amp-access-scroll",v:"2008290323002",f:function(AMP,_){class h{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}}function k(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let l=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function m(a){let b=Object.create(null);if(!a)return b;let c;for(;c=l.exec(a);){let a=k(c[1],c[1]),e=c[2]?k(c[2].replace(/\+/g," "),c[2]):"";b[a]=e}return b}let n=self.AMP_CONFIG||{},p=("string"==typeof n.cdnProxyRegex?new RegExp(n.cdnProxyRegex):n.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function q(a){if(!self.document||!self.document.head||self.location&&p.test(self.location.origin))return null;let b=self.document.head.querySelector(`meta[name="${a}"]`);return b&&b.getAttribute("content")||null}let t={thirdParty:n.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:n.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof n.thirdPartyFrameRegex?new RegExp(n.thirdPartyFrameRegex):n.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:n.cdnUrl||q("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:p,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:n.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:n.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:n.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:n.geoApiUrl||q("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let u=self.__AMP_LOG;function v(a,b,c,d,e,f){if(!u.user)throw Error("failed to call initLogConstructor");return u.user.assert(a,b,c,d,e,f,void 0,void 0,void 0,void 0,void 0)}let w=Object.prototype.hasOwnProperty;function x(a){return a||{}}class y{constructor(a){this.X=a;this.G=this.N=0;this.A=Object.create(null)}has(a){return!!this.A[a]}get(a){let b=this.A[a];if(b)return b.access=++this.G,b.payload}put(a,b){this.has(a)||this.N++;this.A[a]={payload:b,access:this.G};if(!(this.N<=this.X)){a=this.A;var c=this.G+1;for(let b in a){let{access:e}=a[b];if(e<c){c=e;var d=b}}void 0!==d&&(delete a[d],this.N--)}}}x({c:!0,v:!0,a:!0,ad:!0});let z,A;function B(a){z||(z=self.document.createElement("a"),A=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new y(100)));var b=A,c=z;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function C(a){var b;if(b=`${encodeURIComponent("feature")}=${encodeURIComponent("r")}`){a=a.split("#",2);var c=a[0].split("?",2);b=c[0]+(c[1]?`?${c[1]}&${b}`:`?${b}`);b+=a[1]?`#${a[1]}`:""}else b=a;return b}function D(a,b){v(null!=a,"%s %s must be available",b,"source");var c=a;"string"==typeof c&&(c=B(c));var d;(d="https:"==c.protocol||"localhost"==c.hostname||"127.0.0.1"==c.hostname)||(c=c.hostname,d=c.length-10,d=0<=d&&c.indexOf(".localhost",d)==d);v(d||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,"source",a)}function E(a){"string"==typeof a&&(a=B(a));return t.cdnProxyRegex.test(a.origin)}function F(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return G(a,b)}function H(a,b){var c=I(a);c=J(c);return G(c,b)}function I(a){return a.nodeType?F((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function J(a){a=I(a);return a.isSingleDoc()?a.win:a}function G(a,b){a=K(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function L(a){let b=K(a).access;if(b){if(b.promise)return b.promise;G(a,"access");return b.promise=Promise.resolve(b.obj)}return null}function K(a){let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function M(){let a=new h,b=a.promise,c=a.resolve,d=a.reject;b.catch(()=>{});return{obj:null,promise:b,resolve:c,reject:d,context:null,ctor:null}}let N;
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */function O(a,b,c=null){c?a.insertBefore(b,c.nextSibling):a.insertBefore(b,a.firstChild)}function P(a,b,c){a=a.createElement(b);for(let b in c)a.setAttribute(b,c[b]);return a}function aa(a){return ba(a).then(a=>v(a,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","access","amp-access","amp-access","amp-access"))}function ba(a){let b=L(J(a));if(b)return b;let c=I(a);return c.waitForBodyOpen().then(()=>{var a=c.win;var b=c.win.document.head;if(b){var f={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(let a=0;a<b.length;a++){var g=b[a];g=g.getAttribute("custom-element")||g.getAttribute("custom-template");f[g]=!0}f=Object.keys(f)}else f=[];f.includes("amp-access")?a=F(a,"extensions").waitForExtension(a,"amp-access"):(N||(N=Promise.resolve(void 0)),a=N);return a}).then(()=>{var b=c.win;if(b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-access"]){b=J(a);let c=L(b);c?b=c:(b=K(b),b.access=M(),b=b.access.promise)}else b=null;return b})}class ca{constructor(a,b,c){this.ampdoc=a;this.P=c;this.w=v(b.authorization,'"authorization" URL must be specified');D(this.w,'"authorization"');this.I=!b.noPingback;this.D=b.pingback;this.I&&(v(this.D,'"pingback" URL must be specified'),D(this.D,'"pingback"'));b.authorizationTimeout?(c=b.authorizationTimeout,v("number"==typeof c,'"authorizationTimeout" must be a number'),c=Math.min(c,3e3)):c=3e3;this.H=c;this.V=F(a.win,"xhr");this.aa=F(a.win,"timer")}getConfig(){return{authorizationUrl:this.w,pingbackEnabled:this.I,pingbackUrl:this.D,authorizationTimeout:this.H}}getAuthorizationUrl(){return this.w}isAuthorizationEnabled(){return!0}getAuthorizationTimeout(){return this.H}authorize(){return this.P.buildUrl(this.w,!1).then(a=>this.aa.timeoutPromise(this.H,this.V.fetchJson(a,{credentials:"include"})).then(a=>a.json()))}isPingbackEnabled(){return this.I}pingback(){return this.P.buildUrl(this.D,!0).then(a=>this.V.sendSignal(a,{method:"POST",credentials:"include",headers:x({"Content-Type":"application/x-www-form-urlencoded"}),body:""}))}postAction(){}}function da(a,b){function c(){d=0;let g=1e3-(a.Date.now()-e);if(0<g)d=a.setTimeout(c,g);else{var r=f;f=null;b.apply(null,r)}}let d=0,e=0,f=null;return function(...b){e=a.Date.now();f=b;d||(d=a.setTimeout(c,1e3))}}function ea(a,b){a.h.buildUrl(`${a.Y}/amp/updatedepth?rid=READER_ID&cid=CLIENT_ID(scroll1)&c=CANONICAL_URL&o=AMPDOC_URL&rd=`+encodeURIComponent(b),!1).then(b=>{F(a.l.win,"xhr").fetch(b)})}class fa{constructor(a,b,c){this.l=a;this.R=null;this.h=b;this.Y=c;let d=da(a.win,this.Z.bind(this));this.U=H(a,"viewport");this.L=[];a.whenReady().then(()=>{this.U.onChanged(d);this.L=a.getBody().getElementsByTagName("p")})}Z(){return Promise.all([].slice.call(this.L).map(a=>this.U.getClientRectAsync(a))).then(a=>{let b=null,c=null;for(var d=a.length-1;0<=d;d--){let e=a[d].bottom;0>=e&&(null===c||c<e)&&(b=d,c=e)}null!==b&&(d=b,this.R!==d&&(this.R=d,ea(this,this.L[d].innerText.substring(0,50))))})}}let Q;function ha(a){let b=window;let c=ia();b.addEventListener("message",b=>{try{return a(b)}catch(e){throw self.__AMP_REPORT_ERROR(e),e}},c?void 0:!1)}function ia(){if(void 0!==Q)return Q;Q=!1;try{let a={get capture(){Q=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return Q}class R{constructor(a){this.C=[];this.S=[];this.T=a;this.K=this.K.bind(this);ha(this.K)}K(a){let b=a.data,c=a.origin===this.T,d="object"===typeof b&&"_scramp"in b,e=-1<this.C.indexOf(a.source);c&&e&&d&&(this.S.forEach(a=>a(b)),this.C.filter(b=>b!==a.source).forEach(a=>{a.postMessage(b,this.T)}))}register(a,b){b&&this.S.push(b);Promise.resolve(a).then(a=>{-1===this.C.indexOf(a)&&this.C.push(a)})}}let S;let T="Webkit webkit Moz moz ms O o".split(" ");class U{constructor(a){this.B=a;this.j=this.m=this.M=null;this.layout_={width:null,left:null,right:null};this.window=new Promise(a=>{this.M=a})}el(a,b,c){let d=P(this.B.win.document,a,b);Array.isArray(c)&&c.forEach(a=>d.appendChild(a));return d}mount(){let a=this.m;this.B.getBody().appendChild(a);H(this.B,"viewport").addToFixedLayer(a)}mutate(a){F(this.B.win,"vsync").mutate(a)}toggleClass(a,b){let c=this.m.classList;b?c.add(a):c.remove(a)}updateHorizontalLayout(a){let b=!1;Object.keys(this.layout_).forEach(c=>{if(w.call(a,c)){var d=this.cssSize(a[c]);this.layout_[c]!==d&&(this.layout_[c]=d,b=!0)}});return b}renderHorizontalLayout(){var a=this.m,b=this.layout_;if("display"in b){if(u.dev)var c=u.dev;else throw Error("failed to call initLogConstructor");c.error("STYLE","`display` style detected in styles. You must use toggle instead.")}for(let r in b){c=a;var d=b[r];a:{var e=c.style;var f=r;if(2>f.length?0:0==f.lastIndexOf("--",0)){e=f;break a}S||(S=Object.create(null));let a=S[f];if(!a){a=f;if(void 0===e[f]){var g=f;g=g.charAt(0).toUpperCase()+g.slice(1);b:{for(let a=0;a<T.length;a++){let b=T[a]+g;if(void 0!==e[b]){g=b;break b}}g=""}void 0!==e[g]&&(a=g)}S[f]=a}e=a}e&&((2>e.length?0:0==e.lastIndexOf("--",0))?c.style.setProperty(e,d):c.style[e]=d)}}cssSize(a){return"number"===typeof a?`${a}px`:a}}let V=()=>"https://connect.scroll.com";function W(a,b){return a.buildUrl(`${b}?rid=READER_ID&cid=CLIENT_ID(scroll1)&c=CANONICAL_URL&o=AMPDOC_URL&p=1.2&x=QUERY_PARAM(scrollx)`,!1)}class X extends U{constructor(a,b){super(a);this.h=b;this.F()}F(){this.mutate(()=>{this.j||(this.J(),this.M(this.j.contentWindow));this.renderHorizontalLayout()})}J(){this.j=this.el("iframe",x({scrolling:"no",frameborder:"0",allowtransparency:"true",title:"Scroll",width:"100%",height:"100%",sandbox:"allow-scripts allow-same-origin allow-top-navigation allow-popups allow-popups-to-escape-sandbox"}));this.m=this.el("div",x({"class":"amp-access-scroll-bar"}),[this.j]);this.mount();W(this.h,V(this.h.getAdapterConfig())+"/html/amp/scrolltab").then(a=>{this.j.setAttribute("src",a)})}update(a){this.updateHorizontalLayout(a)&&this.F()}}class ja extends U{constructor(a){super(a);this.O="Scroll Feature";this.o={url:"",open:!1,title:this.O}}update(a){let b=!1;switch(a._scramp){case"au":b=this.updateHorizontalLayout(a);["open","url","title"].forEach(c=>{w.call(a,c)&&a[c]!==this.o[c]&&(this.o[c]=a[c],b=!0)});break;case"st":["revealed"].forEach(c=>{w.call(a,c)&&a[c]!==this.o[c]&&(this.o[c]=a[c],b=!0)})}b&&this.F(this.o)}F(a){this.mutate(()=>{this.j||(this.J(),this.M(this.j.contentWindow));this.j.src!==a.url&&this.j.setAttribute("src",a.url);this.renderHorizontalLayout();this.j.setAttribute("title",a.title);var b=this.j,c=a.open;void 0===c&&(c=b.hasAttribute("hidden"));c?b.removeAttribute("hidden"):b.setAttribute("hidden","")})}J(){this.m=this.j=this.el("iframe",x({"class":"amp-access-scroll-sheet",scrolling:"no",frameborder:"0",allowtransparency:"true",title:this.O,sandbox:"allow-scripts allow-same-origin allow-top-navigation allow-popups allow-popups-to-escape-sandbox"}));this.mount()}}function ka(a,b){let c=a.getHeadNode(),d=la(c,ma(c));if(b){let c=a.getRootNode();if(Y(c,d))b(d);else var e=setInterval(()=>{Y(c,d)&&(clearInterval(e),b(d))},4)}}function la(a,b){let c=a.__AMP_CSS_SM;c||(c=a.__AMP_CSS_SM=Object.create(null));{let d=Z(a,c,"amp-extension=amp-access-scroll-elt");if(d)return d.textContent!==b&&(d.textContent=b),d}let d=(a.ownerDocument||a).createElement("style");d.textContent=b;let e=null;d.setAttribute("amp-extension","amp-access-scroll-elt");e=Z(a,c,"amp-runtime");O(a,d,e);return c["amp-extension=amp-access-scroll-elt"]=d}function Z(a,b,c){return b[c]?b[c]:(a=a.querySelector(`style[${c}]`))?b[c]=a:null}function ma(a){return(a=a.__AMP_CSS_TR)?a(".amp-access-scroll-bar{bottom:0;height:60px;left:auto;right:0px;width:48px}.amp-access-scroll-bar,.amp-access-scroll-sheet{position:fixed;background:transparent;z-index:2147483647}@media (max-width:599px){.amp-access-scroll-sheet{bottom:60px;height:100px;left:0!important;right:0!important;width:100%!important}}@media (min-width:600px){.amp-access-scroll-sheet{bottom:76px;height:56px;left:auto;right:16px;width:475px}}\n/*# sourceURL=/extensions/amp-access-scroll/0.1/amp-access-scroll.css*/"):".amp-access-scroll-bar{bottom:0;height:60px;left:auto;right:0px;width:48px}.amp-access-scroll-bar,.amp-access-scroll-sheet{position:fixed;background:transparent;z-index:2147483647}@media (max-width:599px){.amp-access-scroll-sheet{bottom:60px;height:100px;left:0!important;right:0!important;width:100%!important}}@media (min-width:600px){.amp-access-scroll-sheet{bottom:76px;height:56px;left:auto;right:16px;width:475px}}\n/*# sourceURL=/extensions/amp-access-scroll/0.1/amp-access-scroll.css*/"}function Y(a,b){let c=a.styleSheets;for(a=0;a<c.length;a++)if(c[a].ownerNode==b)return!0;return!1}class na extends ca{constructor(a,b){b.getAdapterConfig();let c=V();super(a,{authorization:`${c}/amp/access?rid=READER_ID&cid=CLIENT_ID(scroll1)&c=CANONICAL_URL&o=AMPDOC_URL&x=QUERY_PARAM(scrollx)&p=1.2`,pingback:`${c}/amp/pingback?rid=READER_ID&cid=CLIENT_ID(scroll1)&c=CANONICAL_URL&o=AMPDOC_URL&r=DOCUMENT_REFERRER&x=QUERY_PARAM(scrollx)&d=AUTHDATA(scroll)&v=AUTHDATA(visitId)&p=1.2`,namespace:"scroll"},{buildUrl:b.buildUrl.bind(b),collectUrlVars:b.collectUrlVars.bind(b)});ka(a,()=>{});this.h=b;this.W=c}authorize(){return super.authorize().then(a=>{let b=this.ampdoc.getRootNode().querySelector("amp-story[standalone]");if(a&&a.scroll){if(!b){let b=new X(this.ampdoc,this.h),d=new ja(this.ampdoc),e=new R(this.W);e.register(d.window,a=>{"au"!==a._scramp&&"st"!==a._scramp||d.update(a)});e.register(b.window,a=>{"st"===a._scramp&&(d.update(a),b.update(a))});let f=this.h.getAdapterConfig();oa(this.ampdoc,f);a.features&&a.features.d&&new fa(this.ampdoc,this.h,V())}}else a&&a.blocker&&!m(this.ampdoc.win.location.search).scrollnoblockerrefresh&&new pa(this.ampdoc,this.h,a.features&&a.features.r).check();return a})}}function qa(a){if(a.$&&!E(a.l.win.location))W(a.h,"https://scroll.com/loginwithapp").then(b=>{H(a.l,"navigation").navigateTo(a.l.win,C(b))});else{let b=V(a.h.getAdapterConfig()),c=new X(a.l,a.h);new R(b).register(c.window,a=>{"st"===a._scramp&&c.update(a)})}}class pa{constructor(a,b,c){this.l=a;this.h=b;this.$=c}check(){F(this.l.win,"xhr").fetchJson("https://block.scroll.com/check.json").then(()=>!1,a=>0===a.message.indexOf("XHR Failed fetching (https://block.scroll.com/...): Resource blocked by content blocker")).then(a=>{!0===a&&qa(this)})}}function oa(a,b){if(!b.disableAnalytics){var c=a.win.document,d=x({trigger:"immediate"});b.dataConsentId&&(d["data-block-on-consent"]="");var e=P(c,"amp-analytics",d),f=P(c,"script",x({type:"application/json"}));c={requests:{scroll:`${V()}/amp/analytics?rid=ACCESS_READER_ID&cid=CLIENT_ID(scroll1)&c=CANONICAL_URL&o=AMPDOC_URL&r=DOCUMENT_REFERRER&x=QUERY_PARAM(scrollx)&d=AUTHDATA(scroll.scroll)&v=AUTHDATA(scroll.visitId)&h=SOURCE_HOSTNAME&s=\${totalEngagedTime}&p=1.2`},triggers:{trackInterval:{on:"timer",timerSpec:{interval:15,maxTimerLength:7200},request:"scroll"}}};f.textContent=JSON.stringify(c);e.appendChild(f);e.CONFIG=c;F(a.win,"extensions").installExtensionForDoc(a,"amp-analytics");a.getBody().appendChild(e)}}(function(a){a.registerServiceForDoc("scroll",(function(a){let b=a.getHeadNode();return aa(b).then(b=>{let c=b.getVendorSource("scroll"),d=new na(a,c);c.getAdapter().registerVendor(d);return d})}))})(self.AMP)}});