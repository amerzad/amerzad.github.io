{"version":3,"mappings":"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","names":["toString_","Object","env","self","cdnProxyRegex","RegExp","getMetaUrl","name","metaEl","user","dev","userForEmbed","logs","userAssert","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","Error","opt_5","opt_6","opt_7","opt_8","opt_9","hasOwn_","resolved","resolvedPromise","Promise","undefined","Deferred","constructor","resolve","reject","this","promise","res","rej","dict","opt_initial","c","v","a","ad","getService","win","id","getServiceInternal","getServicePromiseForDoc","elementOrAmpDoc","getAmpdocServiceHolder","cached","getServicePromiseOrNullInternal","holder","b","services","getServices","emptyServiceHolderWithPromise","getServicePromiseInternal","getAmpdoc","nodeOrDoc","defaultView","getAmpdocService","ampdoc","s","deferred","obj","context","ctor","getElementServiceForDoc","element","getElementServiceIfAvailableForDoc","service","extension","head","scripts","list","i","script","f","waitForExtensionIfPresent","extensionScriptsInNode","extensions","_resolvedPromise","x","nameValidator","Variants","variantsDeferred_","init","variants","getVariants","whenReady","allocateVariant","experimentName","config","assertName","validateConfig","override","ATTR_PREFIX","sticky","cidScope","hasConsentPromise","Services","manager","userNotification","hasConsent","getBucketTicket","ticket","upperBound","variantNames","totalPercentage","variantName","percentage","group","opt_cidScope","cidPromise","cidService","scope","createCookieIfNotPresent","results","hash","getConfig_","children","JSON","AmpExperiment","AMP","isLayoutSupported","layout","NODISPLAY","CONTAINER","prerenderAllowed","isBuildRenderBlocking","buildCallback","getAmpDoc","variantsService","experimentVariants","addToBody_","bind","e","experiments","doc","body","TAG"],"sources":["src/types.js","src/config.js","src/log.js","src/utils/object.js","src/resolved-promise.js","src/utils/promise.js","src/url.js","src/service.js","src/element-service.js","src/services.js","extensions/amp-experiment/0.1/variant.js","extensions/amp-experiment/0.1/amp-experiment.js","src/json.js","src/layout.js"],"file":"amp-experiment-0.1.mjs","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}