{"version":3,"mappings":"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","names":["parseMessage","message","JSON","e","WindowPortEmulator","constructor","win","origin","target","this","win_","origin_","target_","addEventListener","eventType","handler","event","postMessage","data","start","initiateHandshakeWithDocument","Promise","resolve","intervalRef","setInterval","channel","MessageChannel","pollMessage","app","APP","name","HANDSHAKE_POLL_MSG","port","listener","CHANNEL_OPEN_MSG","clearInterval","messaging","Messaging","opt_token","waitForHandshakeFromDocument","source","sendResponse_","requestId","messageName","messageData","sendMessage_","requestid","type","RESPONSE","logError_","state","opt_data","a","stateStr","err","String","viewerState","handleRequest_","messageHandlers_","defaultHandler_","error","Error","promise","sendResponseError_","reason","finalMessage","Object","token_","verifyToken_","port_","isWebview_","errString","TAG","opt_isWebview","opt_verifyToken","requestIdCounter_","waitingForResponse_","handleMessage_","bind","registerHandler","requestHandler","unregisterHandler","setDefaultHandler","REQUEST","pending","handleResponse_","sendRequest","awaitResponse","undefined","reject","rsvp","completeHandshake_","messaging_","messageHandler_","visibilityState_","prerenderSize","AmpViewerHost","ampIframe","frameOrigin","messageHandler","opt_logsId","opt_isHandshakePoll","ampIframe_","logsId","contentWindow","log","var_args","Array","arguments","console","self"],"sources":["extensions/amp-viewer-integration/0.1/messaging/messaging.js","extensions/amp-viewer-integration/0.1/examples/amp-viewer-host.js"],"file":"amp-viewer-host.mjs","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}