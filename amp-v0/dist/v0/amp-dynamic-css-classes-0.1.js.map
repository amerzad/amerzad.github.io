{"version":3,"sources":["src/resolved-promise.js","src/url-try-decode-uri-component.js","src/url-parse-query-string.js","src/config.js","src/log.js","src/utils/object.js","src/url.js","src/experiments.js","src/ampdoc-fie.js","src/service.js","src/services.js","extensions/amp-dynamic-css-classes/0.1/amp-dynamic-css-classes.js"],"names":["resolved","tryDecodeUriComponent_","component","fallback","decodeURIComponent","e","regex","env","self","cdnProxyRegex","RegExp","getMetaUrl","name","metaEl","user","dev","userForEmbed","logs","hasOwn_","Object","dict","opt_initial","experimentToggles","win","toggles","experimentId","frequency","Math","Array","allowed","meta","optedInExperiments","i","getExperimentToggles","params","queryString","match","value","param","experimentsString","LOCAL_STORAGE_KEY","Error","TAG","tokens","EXPERIMENT_INFO_LIST","EXPERIMENT_ID","isTrafficEligible","branches","control","experiment","getService","id","getServiceInternal","getServiceForDoc","elementOrAmpDoc","ampdoc","getAmpdoc","holder","getAmpdocServiceHolder","nodeOrDoc","defaultView","getAmpdocService","isServiceRegistered","services","s","service","referrers_","referrer","domainBase","domains","referrers","domain","normalizedReferrers","referrerDomain","Services","hostname","element","document","topWin","isEmbed","experiments","experimentName","arr","isInAmpdocFieExperiment","getServiceForDocOrNullInternal","test","addDynamicCssClasses","classes","addCssClassesToBody","body","classList","addReferrerClasses","addViewerClass","viewer","constructor","AmpDynamicCssClasses","whenReady","Promise","undefined","AMP"],"mappings":"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","file":"amp-dynamic-css-classes-0.1.js","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2007102309000/"}