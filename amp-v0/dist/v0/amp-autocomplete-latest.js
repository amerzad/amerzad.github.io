(self.AMP=self.AMP||[]).push({n:"amp-autocomplete",v:"2007102309000",f:(function(AMP,_){
var k,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ba(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object");})()}ba(this);"function"===typeof Symbol&&Symbol("x");var l;
if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var n;a:{var ca={a:!0},p={};try{p.__proto__=ca;n=p.a;break a}catch(a){}n=!1}l=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=l,r;function t(){return r?r:r=Promise.resolve(void 0)};function u(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var da=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function ea(a){var b=Object.create(null);if(!a)return b;for(var c;c=da.exec(a);){var d=u(c[1],c[1]),e=c[2]?u(c[2].replace(/\+/g," "),c[2]):"";b[d]=e}return b};var fa=Object.prototype.toString;function v(a){return Array.isArray(a)}function ha(a){return a?Array.prototype.slice.call(a):[]};function ia(a){var b=!1,c=null,d=a;return function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];b||(c=d.apply(self,e),b=!0,d=null);return c}};var w=self.AMP_CONFIG||{},ja=("string"==typeof w.cdnProxyRegex?new RegExp(w.cdnProxyRegex):w.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ka(a){if(!self.document||!self.document.head||self.location&&ja.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}
var la={thirdParty:w.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:w.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof w.thirdPartyFrameRegex?new RegExp(w.thirdPartyFrameRegex):w.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:w.cdnUrl||ka("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:ja,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:w.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:w.betaErrorReportingUrl||
"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:w.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:w.geoApiUrl||ka("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var x=self.__AMP_LOG;function y(){if(!x.user)throw Error("failed to call initLogConstructor");return x.user}function ma(){if(x.dev)return x.dev;throw Error("failed to call initLogConstructor");}function na(){}function z(a,b,c,d,e){y().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)};var A=Object.prototype.hasOwnProperty;function B(a){return a||{}}function C(a,b){if(A.call(a,b))return a[b]};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function oa(a,b){var c;"number"!==typeof c&&(c=0);return c+b.length>a.length?!1:-1!==a.indexOf(b,c)};function pa(a){var b=a.element;this.L=b;this.G=this.L.getAttribute("inline");z(""!==this.G,'Empty value for the "inline" attr is unsupported, %s. %s',"amp-autocomplete",b);z(""!==this.G,"AutocompleteBindingInline does not support an empty value in the constructor.");this.B=null;var c=this.G.replace(/([()[{*+.$^\\|?])/g,"\\$1");this.ca=new RegExp("(("+c+"|^"+c+")(\\w+)?)","gm")}k=pa.prototype;
k.shouldAutocomplete=function(a){var b;if(b=this.ca){for(var c=a.value,d=a.selectionStart,e,f;null!==(e=b.exec(c))&&!(e[0].length+C(e,"index")>d);)f=e;b=!f||f[0].length+C(f,"index")<d?null:f}else b=null;this.B=b;return!!b};k.getUserInputForUpdate=function(){return this.B&&this.B[0]?this.B[0].slice(this.G.length):""};
k.getUserInputForUpdateWithSelection=function(a,b,c){if(!this.B)return b.value;var d=b.selectionStart,e=Number(C(this.B,"index")),f=c.length;d>=e+f&&(d-=f);try{b.focus()}catch(m){}d=d+a.length+1;b.setSelectionRange(d,d);this.B=null;b=b.value;var g=b.slice(0,e+this.G.length),h=b.slice(e+this.G.length+f);return g+a+" "+h};k.resetInputOnWrapAround=function(){};k.shouldSuggestFirst=function(){return this.L.hasAttribute("suggest-first")};k.shouldShowOnFocus=function(){return!1};
k.displayActiveItemInInput=function(){};k.removeSelectionHighlighting=function(){};k.shouldPreventDefaultOnEnter=function(a){return a};function qa(a){this.L=a=a.element;this.C=a.hasAttribute("suggest-first");var b=a.getAttribute("filter");z(!this.C||"prefix"===b,'"suggest-first" requires "filter" type "prefix".  Unexpected "filter" type: %s, %s',b,this.L);this.ea=a.hasAttribute("submit-on-enter")}k=qa.prototype;k.shouldAutocomplete=function(){return!0};k.getUserInputForUpdate=function(a){return a.value||""};k.getUserInputForUpdateWithSelection=function(a){return a};k.resetInputOnWrapAround=function(a,b){b.value=a};
k.shouldSuggestFirst=function(){return this.C};k.shouldShowOnFocus=function(){return!0};k.displayActiveItemInInput=function(a,b,c){a.value=b;this.C&&a.setSelectionRange(c.length,b.length)};k.removeSelectionHighlighting=function(a){var b=a.value.length;a.setSelectionRange(b,b)};k.shouldPreventDefaultOnEnter=function(){return!this.ea};function ra(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")};function D(){this.aa=100;this.O=this.U=0;this.K=Object.create(null)}D.prototype.has=function(a){return!!this.K[a]};D.prototype.get=function(a){var b=this.K[a];if(b)return b.access=++this.O,b.payload};D.prototype.put=function(a,b){this.has(a)||this.U++;this.K[a]={payload:b,access:this.O};if(!(this.U<=this.aa)){ma().warn("lru-cache","Trimming LRU cache");a=this.K;var c=this.O+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.U--)}};var sa=B({c:!0,v:!0,a:!0,ad:!0,action:!0}),E,ta,ua=/[?&]amp_js[^&]*/,va=/[?&]amp_gsa[^&]*/,wa=/[?&]amp_r[^&]*/,xa=/[?&]amp_kit[^&]*/,ya=/[?&]usqp[^&]*/;
function F(a){E||(E=self.document.createElement("a"),ta=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new D));var b=ta,c=E;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function za(a,b,c){b=encodeURIComponent(b)+"="+encodeURIComponent(c);b&&(a=a.split("#",2),c=a[0].split("?",2),b=c[0]+(c[1]?"?"+c[1]+"&"+b:"?"+b),a=b+=a[1]?"#"+a[1]:"");return a}
function Aa(a){var b=[],c;for(c in a){var d=a[c];if(null!=d)if(v(d))for(var e=0;e<d.length;e++){var f=d[e];b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}else e=d,b.push(encodeURIComponent(c)+"="+encodeURIComponent(e))}return b.join("&")}
function Ba(a,b){var c=void 0===c?"source":c;z(null!=a,"%s %s must be available",b,c);var d=a;"string"==typeof d&&(d=F(d));var e;(e="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname)||(d=d.hostname,e=d.length-10,e=0<=e&&d.indexOf(".localhost",e)==e);z(e||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a)};function Ca(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var e=a.AMP_CONFIG["allow-doc-opt-in"],f=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');
if(f){var g=f.getAttribute("content").split(",");for(c=0;c<g.length;c++)-1!=e.indexOf(g[c])&&(b[g[c]]=!0)}}Object.assign(b,Da(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];a=ea(a.location.originalHash||a.location.hash);for(var h=0;h<c.length;h++){var m=a["e-"+c[h]];"1"==m&&(b[c[h]]=!0);"0"==m&&(b[c[h]]=!1)}}return b}
function Da(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){ma().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};var Ga=[{experimentId:"ampdoc-fie",isTrafficEligible:function(){return!0},branches:["21065001","21065002"]}];function Ha(a,b){var c=a.ownerDocument.defaultView,d=c.__AMP_TOP||(c.__AMP_TOP=c),e=c!=d,f;if(Ca(d)["ampdoc-fie"]){d.__AMP_EXPERIMENT_BRANCHES=d.__AMP_EXPERIMENT_BRANCHES||{};for(f=0;f<Ga.length;f++){var g=Ga[f],h=g.experimentId;A.call(d.__AMP_EXPERIMENT_BRANCHES,h)||(g.isTrafficEligible&&g.isTrafficEligible(d)?!d.__AMP_EXPERIMENT_BRANCHES[h]&&Ca(d)[h]&&(g=g.branches,d.__AMP_EXPERIMENT_BRANCHES[h]=g[Math.floor(Math.random()*g.length)]||null):d.__AMP_EXPERIMENT_BRANCHES[h]=null)}f="21065002"===(d.__AMP_EXPERIMENT_BRANCHES?
d.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else f=!1;var m=f;e&&!m?b=G(c,b)?H(c,b):null:(a=I(a),a=Ia(a),b=G(a,b)?H(a,b):null);return b}function J(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return H(a,b)}function Ja(a,b){var c=I(a);c=Ia(c);return H(c,b)}function I(a){return a.nodeType?J((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function Ia(a){a=I(a);return a.isSingleDoc()?a.win:a}
function H(a,b){G(a,b);var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function G(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)};function Ka(a){return!!a&&"function"==typeof a.getFormData};var La=["GET","POST"],Ma=[v,function(a){return"[object Object]"===fa.call(a)}];function Na(a){a=a||{};var b=a.method;void 0===b?b="GET":(b=b.toUpperCase(),La.includes(b));a.method=b;a.headers=a.headers||B({});a.headers.Accept="application/json";return a}
function Oa(a){var b=Na(a);"POST"!=b.method||Ka(b.body)||(na(Ma.some(function(a){return a(b.body)})),b.headers["Content-Type"]=b.headers["Content-Type"]||"text/plain;charset=utf-8",b.body="application/x-www-form-urlencoded"===b.headers["Content-Type"]?Aa(b.body):JSON.stringify(b.body))};function K(a,b){this.N=a;this.D=b;this.da="amp-autocomplete"}K.prototype.isEnabled=function(){var a=this.N.getAmpDoc();return a.isSingleDoc()&&a.getRootNode().documentElement.hasAttribute("allow-viewer-render-template")?this.N.hasCapability("viewerRenderTemplate"):!1};K.prototype.assertTrustedViewer=function(a){return this.N.isTrustedViewer().then(function(b){z(b,"Refused to attempt SSR in untrusted viewer: ",a)})};
K.prototype.ssr=function(a,b,c,d){var e=this;c=void 0===c?null:c;d=void 0===d?{}:d;var f;c||(f=this.D.maybeFindTemplate(a));return this.assertTrustedViewer(a).then(function(){return e.N.sendMessageAwaitResponse("viewerRenderTemplate",Pa(e,b,f,c,d))})};
K.prototype.applySsrOrCsrTemplate=function(a,b){var c=this;if(this.isEnabled()){z("string"===typeof b.html,"Server side html response must be defined");var d=this.assertTrustedViewer(a).then(function(){return c.D.findAndSetHtmlForTemplate(a,b.html)})}else d=v(b)?this.D.findAndRenderTemplateArray(a,b):this.D.findAndRenderTemplate(a,b);return d};
function Pa(a,b,c,d,e){e=void 0===e?{}:e;var f=B({type:a.da}),g=d&&d.successTemplate?d.successTemplate:c;g&&(f.successTemplate={type:"amp-mustache",payload:g.innerHTML});var h=d&&d.errorTemplate?d.errorTemplate:null;h&&(f.errorTemplate={type:"amp-mustache",payload:h.innerHTML});e&&Object.assign(f,e);a=b.xhrUrl;c=b.fetchOpt;b=Object.assign({},c);if(Ka(c.body)){c=c.body;b.headers["Content-Type"]="multipart/form-data;charset=utf-8";c=c.entries();d=[];for(e=c.next();!e.done;e=c.next())d.push(e.value);
b.body=d}return B({originalRequest:{input:a,init:b},ampComponent:f})};function L(a,b){if("."==b)return a;b=b.split(".");for(var c=0;c<b.length;c++){var d=b[c];if(d&&a&&void 0!==a[d]&&(null==a||"object"!=typeof a?0:Object.prototype.hasOwnProperty.call(a,d)))a=a[d];else{a=void 0;break}}return a}function Qa(a,b){try{return JSON.parse(a)}catch(c){return b&&b(c),null}};function Ra(a,b,c){c=void 0===c?{}:c;var d=void 0===c.expr?".":c.expr,e=void 0===c.urlReplacement?0:c.urlReplacement,f=void 0===c.refresh?!1:c.refresh,g=void 0===c.token?void 0:c.token,h=void 0===c.xssiPrefix?void 0:c.xssiPrefix;Ba(b.getAttribute("src"),b);var m=J(a.win,"batched-xhr");return Sa(b,e,f).then(function(a){void 0!==g&&(a.fetchOpt.method="POST",a.fetchOpt.headers={"Content-Type":"application/x-www-form-urlencoded"},a.fetchOpt.body={ampViewerAuthToken:g});return m.fetchJson(a.xhrUrl,a.fetchOpt)}).then(function(b){return J(a.win,
"xhr").xssiJson(b,h)}).then(function(a){if(null==a)throw Error("Response is undefined.");return L(a,d||".")}).catch(function(a){throw y().createError("failed fetching JSON data",a);})}
function Sa(a,b,c){var d=a.getAttribute("src"),e=Ha(a,"url-replace");return(1<=b?e.expandUrlAsync(d):Promise.resolve(d)).then(function(d){if(1==b){var f=e.collectDisallowedVarsSync(a);if(0<f.length)throw y().createError('URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. Please add data-amp-replace="'+(f.join(" ")+'" to the <')+(a.tagName+"> element. See https://bit.ly/amp-var-subs."));}var h={};a.hasAttribute("credentials")&&(h.credentials=a.getAttribute("credentials"));
c&&(h.cache="reload");return{xhrUrl:d,fetchOpt:h}})};function Ta(a,b,c,d){var e={detail:c};Object.assign(e,d);if("function"==typeof a.CustomEvent)return new a.CustomEvent(b,e);a=a.document.createEvent("CustomEvent");a.initCustomEvent(b,!!e.bubbles,!!e.cancelable,c);return a};function Ua(a){var b=a.documentElement;return["\u26a14email","amp4email"].some(function(a){return b.hasAttribute(a)})};function Va(a,b){return 0<a&&0<b?a%b:(a%b+b)%b};function Wa(a,b){var c=b.length,d=a.length;if(d>c)return!1;if(d===c&&a===b)return!0;var e=0,f=0;a:for(;e<d;e++){for(var g=a.charCodeAt(e);f<c;)if(b.charCodeAt(f++)===g)continue a;return!1}return!0};var Xa={SUBSTRING:"substring",PREFIX:"prefix",TOKEN_PREFIX:"token-prefix",FUZZY:"fuzzy",CUSTOM:"custom",NONE:"none"};
function M(a){var b=AMP.BaseElement.call(this,a)||this;b.w=null;b.o=null;b.h=null;b.j="";b.A="";b.Z=1;b.J=null;b.C=!1;b.R=!1;b.X=!1;b.V="";b.M="";b.F=-1;b.l=null;b.ba=a.id?a.id:Math.floor(100*Math.random());b.m=null;b.H=!1;b.T=null;b.D=J(b.win,"templates");b.S=!1;b.getSsrTemplateHelper=ia(function(){return new K(Ja(b.element,"viewer"),b.D)});b.I=!1;b.W=null;b.$=null;b.Y=!1;b.P=a.id?a.id:Math.floor(100*Math.random())+"_AMP_content_";return b}var N=AMP.BaseElement;M.prototype=aa(N.prototype);
M.prototype.constructor=M;if(q)q(M,N);else for(var O in N)if("prototype"!=O)if(Object.defineProperties){var Ya=Object.getOwnPropertyDescriptor(N,O);Ya&&Object.defineProperty(M,O,Ya)}else M[O]=N[O];M.fa=N.prototype;
M.prototype.buildCallback=function(){var a=this.element.ownerDocument,b=a&&Ua(a);z(!b||a.documentElement.hasAttribute("data-amp-autocomplete-opt-in"),"<amp-autocomplete> is not currently available in AMP4Email.");this.W=Ha(this.element,"action");this.$=Ja(this.element,"viewport");a=this.element.querySelectorAll("input,textarea");z(1==a.length,"%s should contain exactly one <input> or <textarea> descendant %s","amp-autocomplete",this.element);this.h=a[0];var c=this.h.getAttribute("type");z(!this.h.hasAttribute("type")||
"text"===c||"search"===c,'%s requires the "type" attribute to be "text" or "search" if present on <input>. %s',"amp-autocomplete",this.element);this.w=this.element.hasAttribute("inline")?new pa(this):new qa(this);this.M=this.element.getAttribute("query");this.V=this.element.getAttribute("src");var d=this.element.querySelector('script[type="application/json"]');d?this.o=Za(this,d):this.element.hasAttribute("src")||y().warn("amp-autocomplete",'Expected a <script type="application/json"> child or a URL specified in "src".');
this.h.setAttribute("dir","auto");this.h.setAttribute("aria-autocomplete","both");this.h.setAttribute("role","textbox");this.h.setAttribute("aria-controls",this.P);"INPUT"===this.h.tagName&&(this.element.setAttribute("role","combobox"),this.h.setAttribute("aria-multiline","false"));this.element.setAttribute("aria-haspopup","listbox");this.element.setAttribute("aria-expanded","false");this.element.setAttribute("aria-owns",this.P);(a=this.h.form||null)&&a.hasAttribute("autocomplete")&&(this.T=a.getAttribute("autocomplete"));
this.I=this.getSsrTemplateHelper().isEnabled();this.S=this.D.hasTemplate(this.element,"template, script[template]");this.I&&(z(this.V,'%s requires data to be provided via "src" attribute for server-side rendering. %s',"amp-autocomplete",this.element),z(this.S,'amp-autocomplete should provide a <template> or <script type="plain/text"> element.'),z(!this.element.hasAttribute("filter"),"amp-autocomplete does not support client-side filter when server-side render is required."));this.A=this.element.getAttribute("filter")||
"none";a:{for(e in Xa)if(Xa[e]===this.A){var e=!0;break a}e=!1}z(e,"Unexpected filter: %s. %s",this.A,this.element);this.Z=this.element.hasAttribute("min-characters")?parseInt(this.element.getAttribute("min-characters"),10):1;this.element.hasAttribute("max-entries")&&y().warn("amp-autocomplete",'"max-items" attribute is preferred to "max-entries"');var f=this.element.getAttribute("max-items")||this.element.getAttribute("max-entries");this.J=f?parseInt(f,10):null;this.C=this.w.shouldSuggestFirst();
this.X=this.element.hasAttribute("highlight-user-entry");e=this.element.ownerDocument.createElement("div");e.classList.add("i-amphtml-autocomplete-results");$a(this)&&e.classList.add("i-amphtml-autocomplete-results-up");e.setAttribute("role","listbox");e.setAttribute("id",this.P);ra(e,!1);this.m=e;this.element.appendChild(this.m);return t()};
function Za(a,b){b=Qa(b.textContent,function(a){throw a;});var c=a.element.getAttribute("items")||"items",d=L(b,c);return d?y().assertArray(d):(y().warn("amp-autocomplete",'Expected key "%s" in data but found nothing. Rendering empty results.',c),[])}
function P(a){var b=a.getAmpDoc(),c=a.element.getAttribute("items")||"items";ab(a);return a.I?Sa(a.element,2,!1).then(function(b){var d=a.win,f=b.xhrUrl;if(!1!==b.fetchOpt.ampCors){var g=F(f);g=ea(g.search);z(!("__amp_source_origin"in g),"Source origin is not allowed in %s",f);d=d.location.href;"string"==typeof d&&(d=F(d));g=d;"string"==typeof g&&(g=F(g));if(la.cdnProxyRegex.test(g.origin)){g=d.pathname.split("/");z(sa[g[1]],"Unknown path prefix in url %s",d.href);var h=g[2],m="s"==h?"https://"+decodeURIComponent(g[3]):
"http://"+decodeURIComponent(h);z(0<m.indexOf("."),"Expected a . in origin %s",m);g.splice(1,"s"==h?3:2);g=m+g.join("/");h=(h=d.search)&&"?"!=h?(h=h.replace(ua,"").replace(va,"").replace(wa,"").replace(xa,"").replace(ya,"").replace(/^[?&]/,""))?"?"+h:"":"";d=g+h+(d.hash||"")}else d=d.href;d=F(d).origin;f=za(f,"__amp_source_origin",d)}b.xhrUrl=f;d=b.xhrUrl;f=(f=b.fetchOpt)||{};g=a.win;g=g.origin||F(g.location.href).origin;d=F(d).origin;g==d&&(f.headers=f.headers||{},f.headers["AMP-Same-Origin"]="true");
b.fetchOpt=f;Oa(b.fetchOpt);f=B({ampAutocompleteAttributes:{items:c,maxItems:a.J}});return a.getSsrTemplateHelper().ssr(a.element,b,null,f)}):Ra(b,a.element,{expr:c,urlReplacement:2}).catch(function(){y().warn("amp-autocomplete",'Expected key "%s" in data but found nothing. Rendering empty results.',c);return[]})}function ab(a){if(a.M){var b=a.j;b=za(a.V,a.M,void 0===b?"":b);a.element.setAttribute("src",b)}}
M.prototype.layoutCallback=function(){var a=this;this.h.setAttribute("autocomplete","off");this.h.addEventListener("touchstart",function(){bb(a)},{passive:!0});this.h.addEventListener("input",function(){cb(a)});this.h.addEventListener("keydown",function(b){db(a,b)});this.h.addEventListener("focus",function(){bb(a).then(function(){var b=a.w.shouldShowOnFocus();eb(a,b)})});this.h.addEventListener("blur",function(){eb(a,!1)});this.m.addEventListener("mousedown",function(b){fb(a,b)});return Q(this,this.o,
this.j)};M.prototype.mutatedAttributesCallback=function(a){var b=this,c=a.src;if(void 0===c||null===c)return t();if("string"===typeof c)return P(this).then(function(a){b.o=a||[];Q(b,b.o,b.j)},function(a){gb(b,a)});if("object"===typeof c)return this.o=c.items||[],Q(this,this.o,this.j);y().error("amp-autocomplete",'Unexpected "src" type: '+c)};
function hb(a,b,c){c=void 0===c?"":c;var d=a.element.ownerDocument.createElement("div");d.classList.add("i-amphtml-autocomplete-item");d.setAttribute("role","option");d.setAttribute("data-value",b);d.setAttribute("dir","auto");d.textContent=b;var e=d.childNodes[0],f=b.toLocaleLowerCase(),g=c.toLocaleLowerCase();if(a.X&&c&&c.length<=b.length&&oa(f,g)){var h=f.indexOf(g),m=a.element.ownerDocument.createElement("span");m.classList.add("autocomplete-partial");m.appendChild(a.element.ownerDocument.createTextNode(b.slice(h,
h+c.length)));var R=e.splitText(h);R.splitText(c.length);d.replaceChild(m,R)}return d}function cb(a){a.w.shouldAutocomplete(a.h)?ib(a):a.mutateElement(function(){S(a)})}function ib(a){var b=0===a.j.length&&1===a.h.value.length;a.j=a.w.getUserInputForUpdate(a.h);(a.I||a.M?P(a):Promise.resolve(a.o)).then(function(c){a.o=c;return a.mutateElement(function(){Q(a,a.o,a.j).then(function(){T(a,!0);a.C&&(a.R&&!b||U(a,1),a.R=!1)})})})}
function fb(a,b){var c=V(a,jb(a,b.target));a.mutateElement(function(){W(a,c)})}function Q(a,b,c){c=void 0===c?"":c;S(a);if(c.length<a.Z||!b)a=t();else if(a.I)a=A.call(b,"html")?kb(a,b,a.m,c):t();else{var d=c;b.length?(b=lb(a,b,d),a=kb(a,b,a.m,d)):a=t()}return a}
function kb(a,b,c,d){var e=t();X(a);a.S?e=a.getSsrTemplateHelper().applySsrOrCsrTemplate(a.element,b).then(function(a){(v(a)?a:ha(a.children)).forEach(function(a){a.hasAttribute("data-disabled")?a.setAttribute("aria-disabled","true"):a.hasAttribute("data-value")||y().warn("amp-autocomplete",'Expected a "data-value" or "data-disabled" attribute on the rendered template item. %s',a);a.classList.add("i-amphtml-autocomplete-item");a.setAttribute("role","option");c.appendChild(a)})}):b.forEach(function(b){z("string"===
typeof b,"%s data must provide template for non-string items. %s","amp-autocomplete",a.element);c.appendChild(hb(a,b,d))});return e}
function lb(a,b,c){if("none"===a.A)return mb(a,b);c=c.toLocaleLowerCase();var d=a.element.getAttribute("filter-value")||"value";b=b.filter(function(b){"object"===typeof b&&(b=L(b,d));z("string"===typeof b,'%s data property "%s" must map to string type. %s',"amp-autocomplete",d,a.element);b=b.toLocaleLowerCase();switch(a.A){case "substring":return oa(b,c);case "prefix":return c.length>b.length?!1:0==b.lastIndexOf(c,0);case "token-prefix":return nb(b,c);case "fuzzy":return Wa(c,b);case "custom":throw Error("Filter not yet supported: %s",
a.A,a.element);default:throw Error("Unexpected filter: %s",a.A,a.element);}});return mb(a,b)}function nb(a,b){if(""===b)return!0;var c=ob(a),d=ob(b),e=pb(c),f=d[d.length-1];d.splice(d.length-1,1);a=!0;for(b=0;b<d.length;b++){var g=d[b];if(""!==g){if(!A.call(e,g)){a=!1;break}var h=Number(C(e,g));1<h?e[g]=h-1:delete e[g]}}var m=Object.keys(e);return a&&(""===f||m.some(function(a){return f.length>a.length?!1:0==a.lastIndexOf(f,0)}))}
function ob(a){a=a.replace(/[\.]+/g,"");return a.split(/[`~(){}_|+\-;:'",\[\]\\\/ ]+/g)}function pb(a){var b=Object.create(null);a.forEach(function(a){var c=A.call(b,a)?C(b,a)+1:1;b[a]=c});return b}function mb(a,b){a.J&&a.J<b.length&&(b=b.slice(0,a.J));return b}function T(a,b){a.h.setAttribute("aria-expanded",b);ra(a.m,b)}
function eb(a,b){var c=a.h.form||null;c&&(b?c.setAttribute("autocomplete","off"):a.T?c.setAttribute("autocomplete",a.T):c.removeAttribute("autocomplete"));var d=!1;a.measureMutateElement(function(){d=$a(a)},function(){b||(a.j=a.h.value,Q(a,a.o,a.j),X(a));a.m.classList.toggle("i-amphtml-autocomplete-results-up",d);T(a,b)})}function bb(a){if(a.Y||!a.element.hasAttribute("src"))return t();a.Y=!0;return P(a).then(function(b){a.o=b;Q(a,a.o)},function(b){gb(a,b)})}
function $a(a){var b=a.$.getHeight()||0;return a.h.getBoundingClientRect().top>b/2}function Y(a){return!a.m.hasAttribute("hidden")&&0<a.m.children.length}function jb(a,b){return null===b?null:b.classList.contains("i-amphtml-autocomplete-item")?b:jb(a,b.parentElement)}function V(a,b){if(null===b||b.hasAttribute("data-disabled"))return null;b=b.getAttribute("data-value")||b.textContent||"";a.h.value=a.w.getUserInputForUpdateWithSelection(b,a.h,a.j);a.j=a.w.getUserInputForUpdate(a.h);return b}
function W(a,b){if(null!==b){var c=Ta(a.win,"amp-autocomplete.select",{value:b});a.W.trigger(a.element,"select",c,3);b=Ta(a.win,"change",{value:b},{bubbles:!0});a.h.dispatchEvent(b);S(a);T(a,!1)}}
function U(a,b){if(0===b||!Y(a)||a.H)t();else{var c=-1===a.F&&0>b?b:a.F+b,d=qb(a);if(0===d.length)t();else{var e=Va(c,d.length),f=d[e];c=f.getAttribute("data-value");a.w.displayActiveItemInInput(a.h,c,a.j);var g,h;a.measureMutateElement(function(){var c=f.offsetTop,d=f.offsetHeight,e=a.m,Ea=e.scrollTop,Fa=e.offsetHeight;g=Ea>c||Ea+Fa<c+d;h=0<b?c+d-Fa:c},function(){g&&(a.m.scrollTop=h);X(a);f.classList.add("i-amphtml-autocomplete-item-active");f.setAttribute("aria-selected","true");var b=f.getAttribute("id");
b||(b=a.ba+"_AMP_content_"+e,f.setAttribute("id",b));a.h.setAttribute("aria-activedescendant",b);a.F=e;a.l=f;try{a.l.focus()}catch(R){}})}}}function qb(a){return a.m.querySelectorAll(".i-amphtml-autocomplete-item:not([data-disabled])")}function Z(a){a.w.resetInputOnWrapAround(a.j,a.h);X(a)}
function X(a){a.l&&(a.l.classList.toggle("i-amphtml-autocomplete-item-active",!1),a.l.removeAttribute("aria-selected"),"autocomplete-selected"===a.l.getAttribute("id")&&a.l.removeAttribute("id"),a.h.removeAttribute("aria-activedescendent"),a.l=null,a.F=-1)}function S(a){a.H=!1;for(a=a.m;a.firstChild;)a.removeChild(a.firstChild)}
function db(a,b){switch(b.key){case "ArrowDown":b.preventDefault();if(Y(a)){if(a.F===qb(a).length-1){Z(a);t();break}U(a,1);break}a.mutateElement(function(){Q(a,a.o,a.j);T(a,!0)});break;case "ArrowUp":b.preventDefault();if(0===a.F){Z(a);t();break}U(a,-1);break;case "Enter":var c=a.w.shouldPreventDefaultOnEnter(!!a.l);Y(a)&&c&&b.preventDefault();a.w.removeSelectionHighlighting(a.h);if(Y(a)&&a.l){var d=V(a,a.l);a.mutateElement(function(){W(a,d);X(a)});break}a.mutateElement(function(){T(a,!1)});break;
case "Escape":a.mutateElement(function(){a.H||(b.preventDefault(),Z(a),T(a,!1))});break;case "Tab":if(Y(a)&&a.l){b.preventDefault();var e=V(a,a.l);a.mutateElement(function(){W(a,e)});break}t();break;case "Backspace":a.R=a.C;t();break;default:t()}}function gb(a,b){if(!a.H)if(S(a),a.getFallback())a.H=!0,a.toggleFallback(!0);else throw b;}M.prototype.isLayoutSupported=function(a){return"container"==a};(function(a){a.registerElement("amp-autocomplete",M,"amp-autocomplete,amp-autocomplete>input,amp-autocomplete>textarea{font-family:sans-serif}amp-autocomplete>input,amp-autocomplete>textarea{border-radius:4px;box-sizing:border-box}.i-amphtml-autocomplete-results{position:absolute;top:100%;width:calc(100% + 1rem);min-width:calc(2em + 2rem);max-height:40vh;margin-top:.5rem;margin-left:-.5rem;border-radius:4px;overflow-y:auto;overflow-x:hidden;background-color:#fff;box-shadow:0px 2px 4px 0px rgba(0,0,0,0.5);z-index:10}.i-amphtml-autocomplete-results-up{top:auto;bottom:100%;margin-bottom:.5rem}.i-amphtml-autocomplete-item{position:relative;padding:.5rem 1rem;cursor:pointer}.i-amphtml-autocomplete-item:first-child{border-radius:4px 4px 0px 0px}.i-amphtml-autocomplete-item:nth-last-child(2){border-radius:0px 0px 4px 4px}.i-amphtml-autocomplete-item-active:not([data-disabled]),.i-amphtml-autocomplete-item:hover:not([data-disabled]){background-color:rgba(0,0,0,0.15)}.i-amphtml-autocomplete-item[data-disabled]{color:rgba(0,0,0,0.33)}\n/*# sourceURL=/extensions/amp-autocomplete/0.1/amp-autocomplete.css*/")})(self.AMP);
})});

//# sourceMappingURL=amp-autocomplete-0.1.js.map
