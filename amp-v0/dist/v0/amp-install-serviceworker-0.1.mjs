(self.AMP=self.AMP||[]).push({n:"amp-install-serviceworker",v:"2008290323002",f:function(AMP,_){function h(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let m=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;let n=self.AMP_CONFIG||{},p=("string"==typeof n.cdnProxyRegex?new RegExp(n.cdnProxyRegex):n.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function q(a){if(!self.document||!self.document.head||self.location&&p.test(self.location.origin))return null;let b=self.document.head.querySelector(`meta[name="${a}"]`);return b&&b.getAttribute("content")||null}let r={thirdParty:n.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:n.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof n.thirdPartyFrameRegex?new RegExp(n.thirdPartyFrameRegex):n.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:n.cdnUrl||q("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:p,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:n.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:n.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:n.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:n.geoApiUrl||q("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let t=self.__AMP_LOG;function u(){if(!t.user)throw Error("failed to call initLogConstructor");return t.user}function v(a,b,c,e,g){u().assert(a,b,c,e,g,void 0,void 0,void 0,void 0,void 0,void 0)}function w(a){return a||{}}w({c:!0,v:!0,a:!0,ad:!0});function x(a){let b=a.indexOf("#");return-1==b?a:a.substring(0,b)}function y(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}function z(a){let b=a.ownerDocument.defaultView;var c=b.__AMP_TOP||(b.__AMP_TOP=b);let e=b!=c;if(c.__AMP__EXPERIMENT_TOGGLES)var g=c.__AMP__EXPERIMENT_TOGGLES;else{c.__AMP__EXPERIMENT_TOGGLES=Object.create(null);g=c.__AMP__EXPERIMENT_TOGGLES;if(c.AMP_CONFIG)for(var f in c.AMP_CONFIG){var d=c.AMP_CONFIG[f];"number"===typeof d&&0<=d&&1>=d&&(g[f]=Math.random()<d)}if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-doc-opt-in"])&&0<c.AMP_CONFIG["allow-doc-opt-in"].length&&(f=c.AMP_CONFIG["allow-doc-opt-in"],d=c.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){d=d.getAttribute("content").split(",");for(var k=0;k<d.length;k++)-1!=f.indexOf(d[k])&&(g[d[k]]=!0)}Object.assign(g,y(c));if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-url-opt-in"])&&0<c.AMP_CONFIG["allow-url-opt-in"].length){f=c.AMP_CONFIG["allow-url-opt-in"];c=c.location.originalHash||c.location.hash;d=Object.create(null);if(c)for(var l;l=m.exec(c);)k=h(l[1],l[1]),l=l[2]?h(l[2].replace(/\+/g," "),l[2]):"",d[k]=l;c=d;for(d=0;d<f.length;d++)k=c[`e-${f[d]}`],"1"==k&&(g[f[d]]=!0),"0"==k&&(g[f[d]]=!1)}}let J=!!g["ampdoc-fie"];e&&!J?a=A(b,"url")?B(b,"url"):null:(a=C(a),a=D(a),a=A(a,"url")?B(a,"url"):null);return a}function E(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return B(a,b)}function F(a){var b=C(a);b=D(b);return B(b,"documentInfo")}function C(a){return a.nodeType?E((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function D(a){a=C(a);return a.isSingleDoc()?a.win:a}function B(a,b){A(a,b);{let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});a=b}b=a[b];b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));return b.obj}function A(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function G(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function H(a){return a.closest?a.closest("A"):G(a,a=>{{let b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;a=b?b.call(a,"A"):!1}return a})}let I;function K(a,b){let c=L();a.addEventListener("click",a=>{try{return b(a)}catch(g){throw self.__AMP_REPORT_ERROR(g),g}},c?void 0:!1)}function L(){if(void 0!==I)return I;I=!1;try{let a={get capture(){I=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return I}function M(a){var b=!1;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function N(a){return Promise.all([a.loadPromise(a.win),a.getAmpDoc().whenFirstVisible()])}function O(a){return a.mutateElement(()=>{M(a.element);let b=a.win.document.createElement("iframe");b.setAttribute("sandbox","allow-same-origin allow-scripts");b.src=a.h;a.element.appendChild(b)})}function P(a){if(a.getAmpDoc().isSingleDoc()){var b=a.getAmpDoc(),c=a.win,e=z(a.element),g=e.parse(c.location.href),f=a.element.getAttribute("data-no-service-worker-fallback-url-match"),d=a.element.getAttribute("data-no-service-worker-fallback-shell-url");if(f||d){v(f&&d,'Both, "%s" and "%s" must be specified for url-rewrite',"data-no-service-worker-fallback-url-match","data-no-service-worker-fallback-shell-url");d=x(d);try{var k=new RegExp(f)}catch(l){throw u().createError('Invalid "data-no-service-worker-fallback-url-match" expression',l)}v(e.getSourceOrigin(g)==e.parse(d).origin,'Shell source origin "%s" must be the same as source origin "%s"',d,g.href);a.B=new Q(b,k,d,a.element);e.isSecure(d)&&R(a,d)}}}function R(a,b){N(a).then(()=>{a.mutateElement(()=>S(a,b))})}function S(a,b){let c=a.win.document.createElement("iframe");c.id="i-amphtml-shell-preload";c.setAttribute("src",b+"#preload");M(c);c.setAttribute("sandbox","allow-scripts allow-same-origin");a.loadPromise(c).then(()=>{c.parentElement&&c.parentElement.removeChild(c)});a.element.appendChild(c)}class T extends AMP.BaseElement{constructor(a){super(a);this.B=this.h=null;this.j=E(this.win,"platform").isSafari()}buildCallback(){let a=this.win;if("serviceWorker"in a.navigator){var b=z(this.element),c=this.element.getAttribute("src");b.assertHttpsUrl(c,this.element);if(!b.isProxyOrigin(c)&&!b.isProxyOrigin(a.location.href)||this.j)b.parse(a.location.href).origin==b.parse(c).origin?N(this).then(()=>U(this.win,c,this.element)):this.user().error("amp-install-serviceworker","Did not install ServiceWorker because it does not match the current origin: "+c);else{let a=this.element.getAttribute("data-iframe-src");if(a){b.assertHttpsUrl(a,this.element);let{origin:c}=b.parse(a),f=F(this.element).get(),d=b.parse(f.sourceUrl),e=b.parse(f.canonicalUrl);v(c==d.origin||c==e.origin,"data-iframe-src (%s) should be a URL on the same origin as the source (%s) or canonical URL (%s) of the AMP-document.",c,d.origin,e.origin);this.h=a;N(this).then(()=>O(this))}}(b.isProxyOrigin(c)||b.isProxyOrigin(a.location.href))&&this.j&&this.user().error("amp-install-serviceworker","Did not install ServiceWorker because of safari double keyring caching as it will not have any effect")}else P(this)}}class Q{constructor(a,b,c,e){this.win=a.win;this.A=b;this.w=c;this.m=z(e);this.l=this.m.parse(c);a=a.getRootNode();b=this.o.bind(this);K(a,b)}o(a){if(!a.defaultPrevented&&(a=H(a.target))&&a.href){var b=this.m.parse(a.href);if(b.origin==this.l.origin&&b.pathname!=this.l.pathname&&this.A.test(b.href)&&!a.getAttribute("i-amphtml-orig-href")){var c=this.win;x(b.href)!=x(c.location.href)&&(a.setAttribute("i-amphtml-orig-href",a.href),a.href=this.w+"#href="+encodeURIComponent(`${b.pathname}${b.search}${b.hash}`))}}}}function U(a,b,c){let e={};c.hasAttribute("data-scope")&&(e.scope=c.getAttribute("data-scope"));return a.navigator.serviceWorker.register(b,e).then((function(b){let f=b.installing;f?f.addEventListener("statechange",d=>{"activated"===d.target.state&&V(b,a,c)}):b.active&&V(b,a,c);return b}),(function(a){u().error("amp-install-serviceworker","ServiceWorker registration failed:",a)}))}function V(a,b,c){W(b,a);c.hasAttribute("data-prefetch")&&X(a,b)}function W(a,b){if("performance"in a){let c=a.performance.getEntriesByType("resource").filter(a=>{var b;if(b="script"===a.initiatorType)a=a.name,b=r.cdn,b=b.length>a.length?!1:0==a.lastIndexOf(b,0);return b}).map(a=>a.name),e=b.active;e.postMessage&&e.postMessage(JSON.stringify(w({type:"AMP__FIRST-VISIT-CACHING",payload:c})))}}function X(a,b){let c=b.document,e=[].map.call(c.querySelectorAll("a[data-rel=prefetch]"),a=>a.href);Y(c)?e.forEach(a=>{let b=c.createElement("link");b.setAttribute("rel","prefetch");b.setAttribute("href",a);c.head.appendChild(b)}):(a=a.active,a.postMessage&&a.postMessage(JSON.stringify(w({type:"AMP__LINK-PREFETCH",payload:e}))))}function Y(a){let b=a.createElement("link");return b.relList&&b.relList.supports?b.relList.supports("prefetch"):!1}(a=>{a.registerElement("amp-install-serviceworker",T)})(self.AMP)}});