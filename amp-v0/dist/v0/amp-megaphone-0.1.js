(self.AMP=self.AMP||[]).push({n:"amp-megaphone",v:"2007102309000",f:(function(AMP,_){
var e,f="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function h(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var g=b[c];if(g&&g.Math==Math)return}(function(){throw Error("Cannot find global object");})()}h(this);"function"===typeof Symbol&&Symbol("x");var k;
if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var l;a:{var p={a:!0},r={};try{r.__proto__=p;l=r.a;break a}catch(a){}l=!1}k=l?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var t=k;var u=Object.prototype.toString;var v=self.AMP_CONFIG||{},x=("string"==typeof v.cdnProxyRegex?new RegExp(v.cdnProxyRegex):v.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function y(a){if(self.document&&self.document.head&&(!self.location||!x.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}v.cdnUrl||y("runtime-host");v.geoApiUrl||y("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var z=self.__AMP_LOG;function A(a){return a||{}};function B(a){return 1>a.length?!1:0==a.lastIndexOf("{",0)};A({c:!0,v:!0,a:!0,ad:!0,action:!0});/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var C;function D(a,b){var c=a,g=b;var n=function(a){try{return g(a)}catch(m){throw self.__AMP_REPORT_ERROR(m),m;}};var q=E();c.addEventListener("message",n,q?void 0:!1);return function(){c&&c.removeEventListener("message",n,q?void 0:!1);n=c=g=null}}function E(){if(void 0!==C)return C;C=!1;try{var a={get capture(){C=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return C};function F(a){a=AMP.BaseElement.call(this,a)||this;a.h=null;a.m=null;a.j=!1;a.l="";return a}var G=AMP.BaseElement;F.prototype=f(G.prototype);F.prototype.constructor=F;if(t)t(F,G);else for(var H in G)if("prototype"!=H)if(Object.defineProperties){var I=Object.getOwnPropertyDescriptor(G,H);I&&Object.defineProperty(F,H,I)}else F[H]=G[H];F.w=G.prototype;e=F.prototype;
e.preconnectCallback=function(a){var b=this.win;b=b.__AMP_TOP||(b.__AMP_TOP=b);var c=b.__AMP_SERVICES;c||(c=b.__AMP_SERVICES={});b=c.preconnect;b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));b=b.obj;c=this.getAmpDoc();b.url(c,this.l,a);b.url(c,"https://assets.megaphone.fm",a);b.url(c,"https://megaphone.imgix.net",a)};e.isLayoutSupported=function(a){return"fixed"==a||"fixed-height"==a};
e.buildCallback=function(){this.element.classList.add("i-amphtml-media-component");J(this)};e.mutatedAttributesCallback=function(){J(this);this.h&&(this.h.src=L(this))};e.layoutCallback=function(){var a=this.element.ownerDocument.createElement("iframe");a.setAttribute("frameborder","no");a.setAttribute("scrolling","no");a.src=L(this);var b=this.o.bind(this);this.m=D(this.win,b);this.applyFillContent(a);this.element.appendChild(a);this.h=a;return this.loadPromise(a)};
e.unlayoutCallback=function(){if(this.h){var a=this.h;a.parentElement&&a.parentElement.removeChild(a);this.h=null}this.m&&this.m();return!0};
function L(a){J(a);var b=a.element.getAttribute("data-playlist")||a.element.getAttribute("data-episode");var c=a.element;if(!z.user)throw Error("failed to call initLogConstructor");b=z.user.assert(b,"data-playlist or data-episode is required for <amp-megaphone> %s",c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);var g=a.element.hasAttribute("data-light"),n=a.element.hasAttribute("data-sharing"),q=a.element.getAttribute("data-episodes");c=a.element.getAttribute("data-start");var K=a.element.hasAttribute("data-tile"),
m=A({p:a.j?b:void 0,light:g||void 0,sharing:n||void 0,episodes:a.j&&q||void 0,start:!a.j&&c||void 0,tile:!a.j&&K||void 0});a=a.l+"/"+(a.j?"":b+"/");b=[];for(d in m)if(c=m[d],null!=c)if(Array.isArray(c))for(var w=0;w<c.length;w++){var M=c[w];b.push(encodeURIComponent(d)+"="+encodeURIComponent(M))}else b.push(encodeURIComponent(d)+"="+encodeURIComponent(c));var d=b.join("&");d?(a=a.split("#",2),b=a[0].split("?",2),d=b[0]+(b[1]?"?"+b[1]+"&"+d:"?"+d),d+=a[1]?"#"+a[1]:""):d=a;return d}
function J(a){a.j=a.element.hasAttribute("data-playlist");a.l="https://"+(a.j?"playlist":"player")+".megaphone.fm"}e.o=function(a){if(a.origin==this.l&&a.source==this.h.contentWindow){var b=a.data;if(b&&("[object Object]"===u.call(b)||B(b))){if("[object Object]"===u.call(b))var c=b;else try{c=JSON.parse(b)}catch(g){c=null}a=c;"iframe.resize"==a.context&&this.attemptChangeHeight(a.height).catch(function(){})}}};
e.pauseCallback=function(){this.h&&this.h.contentWindow&&this.h.contentWindow.postMessage(JSON.stringify(A({method:"pause"})),this.l)};(function(a){a.registerElement("amp-megaphone",F)})(self.AMP);
})});

//# sourceMappingURL=amp-megaphone-0.1.js.map
