(self.AMP=self.AMP||[]).push({n:"amp-gwd-animation",v:"2008290323002",f:function(AMP,_){function g(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let h=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function k(a){return a?Array.prototype.slice.call(a):[]}let l=self.AMP_CONFIG||{},m=("string"==typeof l.cdnProxyRegex?new RegExp(l.cdnProxyRegex):l.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function n(a){if(self.document&&self.document.head&&(!self.location||!m.test(self.location.origin))){var b=self.document.head.querySelector(`meta[name="${a}"]`);b&&b.getAttribute("content")}}l.cdnUrl||n("runtime-host");l.geoApiUrl||n("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let p=self.__AMP_LOG;function q(){if(!p.user)throw Error("failed to call initLogConstructor");return p.user}function r(){}function t(a,b){return q().assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
let u;let v=Object.prototype.hasOwnProperty;function w(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){let e=new d.MutationObserver(()=>{b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else{let e=d.setInterval(()=>{b(a)&&(d.clearInterval(e),c())},5)}}}function x(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);let b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){let d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){let d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(e){let a=e.getAttribute("content").split(",");for(c=0;c<a.length;c++)-1!=d.indexOf(a[c])&&(b[a[c]]=!0)}}Object.assign(b,y(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];a=a.location.originalHash||a.location.hash;var d=Object.create(null);if(a)for(var e;e=h.exec(a);){var f=g(e[1],e[1]);e=e[2]?g(e[2].replace(/\+/g," "),e[2]):"";d[f]=e}a=d;for(d=0;d<c.length;d++)f=a[`e-${c[d]}`],"1"==f&&(b[c[d]]=!0),"0"==f&&(b[c[d]]=!1)}return b}function y(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(d){}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}function z(a,b){let c=a.ownerDocument.defaultView,d=A(c),e=c!=d,f=!!x(d)["ampdoc-fie"];e&&!f?b=C(c,b)?D(c,b):null:(a=E(a),a=F(a),b=C(a,b)?D(a,b):null);return b}function G(a,b){let c=A(a);r(!C(a,"gwd"));if(x(c)["ampdoc-fie"]){let c=E(a.document);H(F(c),c,(function(){return b}),!0)}else H(a,a,(function(){return b})),D(a,"gwd")}function A(a){return a.__AMP_TOP||(a.__AMP_TOP=a)}function E(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=A(b);a=D(b,"ampdoc").getAmpDoc(a)}return a}function F(a){a=E(a);return a.isSingleDoc()?a.win:a}function D(a,b){C(a,b);a=I(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function H(a,b,c,d){let e=I(a);let f=e.gwd;f||(f=e.gwd={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});if(d||!f.ctor&&!f.obj)f.ctor=c,f.context=b,f.resolve&&D(a,"gwd")}function I(a){let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function C(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function J(a){return"loading"!=a.readyState&&"uninitialized"!=a.readyState}function K(a,b){let c=J(a);if(c)b(a);else{let d=()=>{J(a)&&(c||(c=!0,b(a)),a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}}function L(a){return new Promise(b=>{K(a,b)})}let M=["animationend","webkitAnimationEnd"];function N(a){a.classList.remove("gwd-play-animation");[a].concat(k(a.querySelectorAll("*"))).forEach(a=>{a.classList.remove("gwd-pause-animation");if(a.hasAttribute("data-gwd-label-animation")){let b=a.getAttribute("data-gwd-label-animation");a.classList.remove(b);a.removeAttribute("data-gwd-label-animation")}delete a.__AMP_GWD_GOTO_COUNTERS__})}function O(a,b){a.classList.remove("gwd-pause-animation");let c=a.getAttribute("data-gwd-label-animation");c&&(a.classList.remove(c),a.removeAttribute("data-gwd-label-animation"));c==b&&(self.__AMP_GWD_TEMP=a.offsetWidth,delete self.__AMP_GWD_TEMP);a.classList.add(b);a.setAttribute("data-gwd-label-animation",b)}class P{constructor(a,b){this.D=a;this.j=b||a.win;this.c=this.j.document;this.l=this.B.bind(this);(b?L(this.c):a.whenReady()).then(()=>{let a=this.c.body;w(a,()=>!!a.querySelector(`.${CSS.escape("gwd-page-wrapper")}`),this.A.bind(this))})}static installInEmbedWindow(a,b){G(a,new P(b,a))}A(){for(let a=0;a<M.length;a++)this.c.body.addEventListener(M[a],this.l,!0);this.setCurrentPage(0)}setEnabled(a){this.c.body.classList.toggle("i-amphtml-gwd-animation-disabled",!a)}setCurrentPage(a){let b=this.c.body.querySelectorAll(`.${CSS.escape("gwd-page-wrapper")}`);if(0!=b.length){var c=`.${CSS.escape("gwd-page-wrapper")}.${CSS.escape("gwd-play-animation")}`;var d=this.c.body;if(void 0!==u)var e=u;else{try{let a=d.ownerDocument,b=a.createElement("div"),c=a.createElement("div");b.appendChild(c);e=b.querySelector(":scope div")===c}catch(U){e=!1}e=u=e}if(e)var f=d.querySelector(c.replace(/^|,/g,"$&:scope "));else d.classList.add("i-amphtml-scoped"),e=c.replace(/^|,/g,"$&.i-amphtml-scoped "),e=d.querySelectorAll(e),d.classList.remove("i-amphtml-scoped"),d=e,f=void 0===d[0]?null:d[0];f&&N(f);var B=b[a];B?B.classList.add("gwd-play-animation"):q().error("GWD","Could not find page with index "+a+".")}}play(a){(a=this.getReceiver(a))&&a.classList.remove("gwd-pause-animation")}pause(a){(a=this.getReceiver(a))&&a.classList.add("gwd-pause-animation")}togglePlay(a){(a=this.getReceiver(a))&&a.classList.toggle("gwd-pause-animation")}gotoAndPlay(a,b){(a=this.getReceiver(a))&&O(a,b)}gotoAndPause(a,b){let c=this.getReceiver(a);c&&(O(c,b),this.j.setTimeout(()=>{this.pause(a)},40))}gotoAndPlayNTimes(a,b,c,d){if(0>=c)q().error("GWD",`Invalid maxCount parameter: ${c}`);else if(d){if(a=this.getReceiver(a)){var e=`${d}_${b}`;var f=a.__AMP_GWD_GOTO_COUNTERS__&&v.call(a.__AMP_GWD_GOTO_COUNTERS__,e)?a.__AMP_GWD_GOTO_COUNTERS__[e]:0;f<c&&(O(a,b),b=f+1,a.__AMP_GWD_GOTO_COUNTERS__||(a.__AMP_GWD_GOTO_COUNTERS__={}),v.call(a.__AMP_GWD_GOTO_COUNTERS__,e)||(a.__AMP_GWD_GOTO_COUNTERS__[e]=0),a.__AMP_GWD_GOTO_COUNTERS__[e]=b)}}else q().error("GWD","Event name required but not specified.")}getReceiver(a){if("document.body"==a)return this.c.body;let b=this.c.getElementById(a);if(b&&b.classList)return b;q().error("GWD",`Could not get receiver with id ${a}.`);return null}B(a){let b=a.target.getAttribute("data-event-name");if(b){a={eventName:b,sourceEvent:a};{var c=this.j;let b={detail:a};Object.assign(b,void 0);if("function"==typeof c.CustomEvent)var d=new c.CustomEvent("gwd.timelineEvent",b);else c=c.document.createEvent("CustomEvent"),c.initCustomEvent("gwd.timelineEvent",!!b.bubbles,!!b.cancelable,a),d=c}this.c.dispatchEvent(d)}}dispose(){for(let a=0;a<M.length;a++)this.c.body.removeEventListener(M[a],this.l,!0)}}let Q={play:["args.id"],pause:["args.id"],togglePlay:["args.id"],gotoAndPlay:["args.id","args.label"],gotoAndPause:["args.id","args.label"],gotoAndPlayNTimes:["args.id","args.label","args.N","event.detail.eventName"],setCurrentPage:["args.index"]};function R(a){return a.h?a.h.win.document:a.getAmpDoc().getRootNode()}function S(a,b){a=t(z(a.element,"gwd"),"Cannot execute action because the GWD service is not registered.");let c=Q[b.method].map(a=>{{var c=a.split(".");let d=b;for(let a=0;a<c.length;a++){let b=c[a];if(b&&d&&void 0!==d[b])d=d[b];else{d=void 0;break}}c=d}return c});a[b.method].apply(a,c)}class T extends AMP.BaseElement{constructor(a){super(a);this.o="";this.h=null;this.m=this.C.bind(this)}buildCallback(){this.o=this.element.getAttribute("timeline-event-prefix")||"";a:{var a=this.element,b=this.getAmpDoc().win;a=(a.ownerDocument||a).defaultView;b=b||A(a);if(a&&a!=b&&A(a)==b)try{var c=a.frameElement;break a}catch(f){}c=null}c&&(this.h=c.__AMP_EMBED__);R(this).addEventListener("gwd.timelineEvent",this.m,!0);let d=R(this).getElementById("pagedeck");if(d){t(this.element.id,"The amp-gwd-animation element must have an id.");c=this.element;b=`${this.element.id}.setCurrentPage(index=event.index)`;a=d.getAttribute("on")||"";var e=a.indexOf("slideChange:");-1!=e?(e+=12,a=a.substr(0,e)+b+","+a.substr(e)):(a&&(a+=";"),a+=`slideChange:${b}`);z(c,"action").setActions(d,a)}c=this.w.bind(this);for(let a in Q)this.registerAction(a,c)}w(a){var b="setCurrentPage"==a.method?(b=R(this).getElementById("pagedeck"))&&a.source==b:!0;b&&S(this,a)}C(a){z(this.element,"action").trigger(this.element,`${this.o}${a.detail.eventName}`,a,3)}detachedCallback(){R(this).removeEventListener("gwd.timelineEvent",this.m,!0);return!0}}(a=>{a.registerServiceForDoc("gwd",P);a.registerElement("amp-gwd-animation",T,".i-amphtml-gwd-animation-disabled [class*=-animation],.i-amphtml-gwd-animation-disabled [class*=gwdanimation]{animation:none!important}\n/*# sourceURL=/extensions/amp-gwd-animation/0.1/amp-gwd-animation.css*/")})(self.AMP)}});