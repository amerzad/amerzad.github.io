(self.AMP=self.AMP||[]).push({n:"amp-subscriptions",v:"2008290323002",f:(function(AMP,_){
'use strict';var h,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ba(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object");})()}ba(this);"function"===typeof Symbol&&Symbol("x");var ca;
if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={a:!0},fa={};try{fa.__proto__=ea;da=fa.a;break a}catch(a){}da=!1}ca=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ca;
function ia(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Ib=b.prototype}var ja;function p(){return ja?ja:ja=Promise.resolve(void 0)};function ka(a){return a?Array.prototype.slice.call(a):[]};var la=Object.prototype.hasOwnProperty;function q(a){return a||{}};function u(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function ma(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var na=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function oa(a){var b=Object.create(null);if(!a)return b;for(var c;c=na.exec(a);){var d=ma(c[1],c[1]),e=c[2]?ma(c[2].replace(/\+/g," "),c[2]):"";b[d]=e}return b};var ra="";
function sa(){var a=self;if(a.__AMP_MODE)var b=a.__AMP_MODE;else{b=oa(a.location.originalHash||a.location.hash);var c=oa(a.location.search);ra||(ra=a.AMP_CONFIG&&a.AMP_CONFIG.v?a.AMP_CONFIG.v:"012008290323002");b={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(b.development)||a.AMP_DEV_MODE),examiner:"2"==b.development,esm:!1,geoOverride:b["amp-geo"],minified:!0,lite:void 0!=c.amp_lite,test:!1,log:b.log,version:"2008290323002",rtvVersion:ra};b=a.__AMP_MODE=b}return b}
;var x=self.AMP_CONFIG||{},ta=("string"==typeof x.cdnProxyRegex?new RegExp(x.cdnProxyRegex):x.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ua(a){if(!self.document||!self.document.head||self.location&&ta.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}
var va={thirdParty:x.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:x.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof x.thirdPartyFrameRegex?new RegExp(x.thirdPartyFrameRegex):x.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:x.cdnUrl||ua("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:ta,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:x.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:x.betaErrorReportingUrl||
"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:x.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:x.geoApiUrl||ua("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var wa=self.__AMP_LOG;function A(){if(!wa.user)throw Error("failed to call initLogConstructor");return wa.user}function B(){if(wa.dev)return wa.dev;throw Error("failed to call initLogConstructor");}function D(a,b,c,d,e){return A().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)};function xa(){this.nb=100;this.M=this.Ta=0;this.na=Object.create(null)}xa.prototype.has=function(a){return!!this.na[a]};xa.prototype.get=function(a){var b=this.na[a];if(b)return b.access=++this.M,b.payload};xa.prototype.put=function(a,b){this.has(a)||this.Ta++;this.na[a]={payload:b,access:this.M};if(!(this.Ta<=this.nb)){B().warn("lru-cache","Trimming LRU cache");a=this.na;var c=this.M+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.Ta--)}};var ya=q({c:!0,v:!0,a:!0,ad:!0}),za,Aa,Ba=/[?&]amp_js[^&]*/,Ca=/[?&]amp_gsa[^&]*/,Da=/[?&]amp_r[^&]*/,Ea=/[?&]amp_kit[^&]*/,Fa=/[?&]usqp[^&]*/;function Ga(a){return a.origin||F(a.location.href).origin}
function F(a){za||(za=self.document.createElement("a"),Aa=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new xa));var b=Aa,c=za;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function Ha(a,b){b=encodeURIComponent("crypt")+"="+encodeURIComponent(b);if(b){a=a.split("#",2);var c=a[0].split("?",2);b=c[0]+(c[1]?"?"+c[1]+"&"+b:"?"+b);b+=a[1]?"#"+a[1]:""}else b=a;return b}
function Ia(a,b){var c=void 0===c?"source":c;D(null!=a,"%s %s must be available",b,c);var d=a;"string"==typeof d&&(d=F(d));var e;(e="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname)||(d=d.hostname,e=d.length-10,e=0<=e&&d.indexOf(".localhost",e)==e);D(e||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a);return a};function Ja(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){B().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};function G(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return H(a,b)}function I(a,b){var c=Ka(a);c=K(c);return H(c,b)}function Ka(a){return a.nodeType?G((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function K(a){a=Ka(a);return a.isSingleDoc()?a.win:a}function H(a,b){La(a,b);a=Ma(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Na(a,b){var c=Oa(a,b);if(c)return c;a=Ma(a);a[b]=Pa();return a[b].promise}
function Oa(a,b){var c=Ma(a)[b];if(c){if(c.promise)return c.promise;H(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Ma(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function La(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function Pa(){var a=new u,b=a.promise,c=a.resolve;a=a.reject;b.catch(function(){});return{obj:null,promise:b,resolve:c,reject:a,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var Qa;function Ra(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else var f=d.setInterval(function(){b(a)&&(d.clearInterval(f),c())},5)}}function Sa(a,b){return new Promise(function(c){Ra(a,b,c)})}function Ta(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a}function Ua(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}
function Va(a){return a.closest?a.closest("[subscriptions-action]"):Ua(a,function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return b?b.call(a,"[subscriptions-action]"):!1})}
function Wa(a){/^[\w-]+$/.test("footer");if(void 0!==Qa)var b=Qa;else{try{var c=a.ownerDocument,d=c.createElement("div"),e=c.createElement("div");d.appendChild(e);b=d.querySelector(":scope div")===e}catch(f){b=!1}b=Qa=b}b?a=a.querySelector("> footer".replace(/^|,/g,"$&:scope ")):(a.classList.add("i-amphtml-scoped"),b="> footer".replace(/^|,/g,"$&.i-amphtml-scoped "),b=a.querySelectorAll(b),a.classList.remove("i-amphtml-scoped"),a=void 0===b[0]?null:b[0]);return a}
function Xa(a,b){for(var c=a.length,d=0;d<c;d++)b(a[d],d)}function Ya(a,b,c){try{var d=a.open(b,"_blank",c)}catch(g){B().error("DOM","Failed to open url on target: ","_blank",g)}var e;if(!(e=d||!1)){e=c||"";var f;"number"!==typeof f&&(f=0);e=f+8>e.length?!1:-1!==e.indexOf("noopener",f)}e||(d=a.open(b,"_top"));return d};function Za(a){var b=Oa(K(a),"amp-analytics-instrumentation");if(b)return b;var c=Ka(a);return c.waitForBodyOpen().then(function(){var a=c.win;var b=c.win.document.head;if(b){var f={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(var g=0;g<b.length;g++){var k=b[g];k=k.getAttribute("custom-element")||k.getAttribute("custom-template");f[k]=!0}f=Object.keys(f)}else f=[];return f.includes("amp-analytics")?G(a,"extensions").waitForExtension(a,"amp-analytics"):p()}).then(function(){var b=
c.win;return b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-analytics"]?Na(K(a),"amp-analytics-instrumentation"):null})};function L(a){return G(a,"timer")};function $a(a,b,c){var d=!1;c=void 0===c?{}:c;d=void 0===d?!0:d;Za(a).then(function(e){e&&e.triggerEventForTarget(a,b,c,d)})};function M(a){this.rb=a;this.Na=[]}M.prototype.registerEventListener=function(a){this.Na.push(a)};M.prototype.serviceEvent=function(a,b,c,d){this.event(a,Object.assign(q({serviceId:b}),c),d)};M.prototype.event=function(a,b,c){c=c||q({});var d="subscriptions-action"!==a?a:a+("-"+c.action+"-"+c.status);A().info("amp-subscriptions",d,b||"");b=b||q({});$a(this.rb,d,b);for(var e=0;e<this.Na.length;e++)this.Na[e](a,b,c)};
M.prototype.actionEvent=function(a,b,c,d){this.serviceEvent("subscriptions-action",a,d,q({action:b,status:c}))};function ab(a,b,c){var d=!!self.msCrypto;return bb((d?self.msCrypto.subtle:self.crypto.subtle).decrypt({name:"AES-GCM",iv:b,tag:d?c.slice(c.byteLength-16):void 0,tagLength:128},a,d?c.slice(0,c.byteLength-16):c)).then(function(a){a=new Uint8Array(a);if("undefined"!==typeof TextDecoder)a=(new TextDecoder("utf-8")).decode(a);else{a=new Uint8Array(a.buffer||a);for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);a=b.join("");a=decodeURIComponent(escape(a))}return a})}
function bb(a){return"function"==typeof a.then?a:new Promise(function(b,c){a.oncomplete=function(){b(a.result)};a.onerror=c})}function cb(a){a=atob(a);for(var b=a.length,c=new Uint8Array(b),d=0;d<b;d++)c[d]=a.charCodeAt(d);return c};function db(a,b){if("."==b)return a;b=b.split(".");for(var c=0;c<b.length;c++){var d=b[c];if(d&&a&&void 0!==a[d]&&(null==a||"object"!=typeof a?0:Object.prototype.hasOwnProperty.call(a,d)))a=a[d];else{a=void 0;break}}return a}function eb(a,b){try{return JSON.parse(a)}catch(c){return b&&b(c),null}};function fb(a){if("undefined"!==typeof TextDecoder)return(new TextDecoder("utf-8")).decode(a);a=new Uint8Array(a.buffer||a);for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);a=b.join("");return decodeURIComponent(escape(a))}function gb(a){return"undefined"!==typeof TextEncoder?(new TextEncoder("utf-8")).encode(a):hb(unescape(encodeURIComponent(a)))}function hb(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++){var d=a.charCodeAt(c);b[c]=d}return b};function P(a){this.h=a;this.qa=null;var b=this.h.getRootNode().querySelector("script[cryptokeys]");this.Sa=null;b&&b.hasAttribute("sha-256-hash")&&(this.Sa=b.getAttribute("sha-256-hash"));this.Ha=b&&eb(b.textContent)||null}P.prototype.isDocumentEncrypted=function(){return!!this.Ha&&0<Object.keys(this.Ha).length};P.prototype.getEncryptedKeys=function(){return this.Ha};P.prototype.getEncryptedDocumentKey=function(a){var b=this.getEncryptedKeys();return b?b[a]||null:null};
P.prototype.tryToDecryptDocument=function(a){var b=this;if(!this.Sa)return ib(this,a);var c=gb(a);return crypto.subtle.digest("SHA-256",c).then(function(c){return ka(new Uint8Array(c)).map(function(a){a=a.toString(16);var b=2;if(!(a.length>=b)){b-=a.length;for(var c="0";b>c.length;)c+="0";a=c.slice(0,b)+a}return a}).join("")!=b.Sa?Promise.reject(Error("Invalid Document Key")):ib(b,a)})};
function ib(a,b){if(a.qa)return a.qa;a.qa=a.h.whenReady().then(function(){var c=cb(b);return bb((self.msCrypto?self.msCrypto.subtle:self.crypto.subtle).importKey("raw",c.buffer,"AES-GCM",!0,["decrypt"])).then(function(b){var c=a.h.getRootNode().querySelectorAll("script[ciphertext]"),d=[];Xa(c,function(a){var c=a.textContent.replace(/\s+/g,""),e=cb(c).buffer;c=e.slice(0,12);e=e.slice(12);d.push(ab(b,c,e).then(function(b){a.outerHTML=b}))});return Promise.all(d)})});return a.qa};var jb,kb="Webkit webkit Moz moz ms O o".split(" ");function lb(a,b){if(2>b.length?0:0==b.lastIndexOf("--",0))return b;jb||(jb=Object.create(null));var c=jb[b];if(!c){c=b;if(void 0===a[b]){var d=b.charAt(0).toUpperCase()+b.slice(1);a:{for(var e=0;e<kb.length;e++){var f=kb[e]+d;if(void 0!==a[f]){d=f;break a}}d=""}var g=d;void 0!==a[g]&&(c=g)}jb[b]=c}return c}function mb(a,b){a=a.style;for(var c in b)a.setProperty(lb(a,c),b[c].toString(),"important")}
function Q(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")};function nb(a){var b=this;this.h=a;this.ja=G(a.win,"vsync");this.L=L(a.win);this.V=I(a,"viewport");this.ia=!1;this.Da=null;this.eb=p();a=this.h.win.document;this.B=Ta(a,"amp-subscriptions-dialog",{role:"dialog"});Q(this.B,!1);this.Ba=Ta(a,"button",{"class":"i-amphtml-subs-dialog-close-button"});this.showCloseAction(!1);this.B.appendChild(this.Ba);this.Ba.addEventListener("click",function(){b.close()});this.h.getBody().appendChild(this.B);mb(this.B,{transform:"translateY(100%)"})}h=nb.prototype;
h.getRoot=function(){return this.B};h.isVisible=function(){return this.ia};h.open=function(a,b){var c=this;b=void 0===b?!0:b;return ob(this,function(){return pb(c,a,b)})};h.close=function(){var a=this;return ob(this,function(){return qb(a)})};function ob(a,b){return a.eb=a.eb.then(b)}
function pb(a,b,c){c=void 0===c?!0:c;a.Da?a.B.replaceChild(b,a.Da):a.B.appendChild(b);a.Da=b;if(a.ia)return p();a.ia=!0;return a.ja.mutatePromise(function(){Q(a.B,!0);a.showCloseAction(c)}).then(function(){return a.ja.mutatePromise(function(){mb(a.B,{transform:"translateY(0)"})}).then(function(){return a.L.promise(300)})}).then(function(){var b;return a.ja.runPromise({measure:function(){b=a.B.offsetHeight},mutate:function(){a.V.updatePaddingBottom(b);a.V.addToFixedLayer(a.B,!0)}})})}
function qb(a){return a.ia?a.ja.mutatePromise(function(){mb(a.B,{transform:"translateY(100%)"})}).then(function(){return a.L.promise(300)}).then(function(){return a.ja.mutatePromise(function(){Q(a.B,!1);a.V.updatePaddingBottom(0);a.ia=!1})}):p()}h.showCloseAction=function(a){Q(this.Ba,a)};function rb(a){var b=a.readyState;return"loading"!=b&&"uninitialized"!=b}function sb(a,b){if(rb(a))b(a);else{var c=!1,d=function(){rb(a)&&!c&&(b(a),c=!0,a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}}function tb(a){return new Promise(function(b){sb(a,b)})}function ub(a){var b=!!a.document;this.ya=b?a:a.defaultView;this.l=b?a.document:a}h=ub.prototype;h.getWin=function(){return this.ya};h.getRootNode=function(){return this.l};h.getRootElement=function(){return this.l.documentElement};
h.getHead=function(){return this.l.head};h.getBody=function(){return this.l.body};h.isReady=function(){return rb(this.l)};h.whenReady=function(){return tb(this.l)};h.addToFixedLayer=function(){return Promise.resolve()};function vb(a){return 9===a.nodeType||a.document?new ub(a):a}
function wb(a){for(var b=null,c="",d=0;d<arguments.length;d++){var e=arguments[d];if(e instanceof Error&&!b){b=void 0;var f=Object.getOwnPropertyDescriptor(e,"message");if(f&&f.writable)b=e;else{f=e.stack;var g=Error(e.message);for(b in e)g[b]=e[b];g.stack=f;b=g}}else c&&(c+=" "),c+=e}b?c&&(b.message=c+": "+b.message):b=Error(c);return b}function R(){var a=self.__AMP_TOP?"\u200b\u200b\u200b":"";this.xa=void 0===a?"":a}
function xb(a,b){a.xa&&(b.message?-1===b.message.indexOf(a.xa)&&(b.message=a.xa):b.message=a.xa)}R.prototype.createError=function(a){var b=wb.apply(null,Array.prototype.slice.call(arguments));xb(this,b);return b};R.prototype.createExpectedError=function(a){var b=wb.apply(null,Array.prototype.slice.call(arguments));xb(this,b);b.expected=!0;return b};R.prototype.error=function(a){throw this.createError.apply(this,arguments);};
R.prototype.expectedError=function(a){throw this.createExpectedError.apply(this,arguments);};var yb=new R;function S(a,b){var c=a.indexOf(":");if(-1!=c){var d=a;var e=d.substring(0,c);var f=d.substring(c+1);"*"==f&&yb.expectedError("wildcard disallowed")}else e=a,f=d=null;this.Pa=e;this.aa=d;this.ub=f;this.wb=b}S.prototype.getPublicationId=function(){return this.Pa};S.prototype.getProductId=function(){return this.aa};S.prototype.getLabel=function(){return this.ub};S.prototype.isLocked=function(){return this.wb};
function zb(a){console.log.apply(console,arguments)}function Ab(a){if(/swg.debug=1/.test(self.location.hash)){var b=Array.prototype.slice.call(arguments,0);b.unshift("[Subscriptions]");zb.apply(zb,b)}}var Bb="CreativeWork Article NewsArticle Blog Comment Course HowTo Message Review WebPage".split(" "),Cb=new RegExp(Bb.join("|"));function Db(a){var b=this;this.l=vb(a);this.X=null;this.oa=new Promise(function(a){b.X=a});this.xb=new Eb(this.l);this.vb=new Fb(this.l);this.yb=new Gb(this.l)}
Db.prototype.resolveConfig=function(){Promise.resolve().then(this.check.bind(this));this.l.whenReady().then(this.check.bind(this));return this.oa};Db.prototype.check=function(){if(!this.X)return null;var a=this.xb.check();a||(a=this.vb.check());a||(a=this.yb.check());a?(this.X(a),this.X=null):this.l.isReady()&&(this.X(Promise.reject(yb.createError("No config could be discovered in the page"))),this.X=null);Ab(a);return a};function T(){}
T.prototype.checkValue=function(a,b){return a?this.checkArray(Hb(a),b):!1};T.prototype.checkString=function(a,b){return a?this.checkArray(a.split(/\s+/),b):!1};T.prototype.checkArray=function(a,b){var c=!1;a.forEach(function(a){c=c||b.includes(a.replace(/^http:\/\/schema.org\//i,""))});return c};function Hb(a){return Array.isArray(a)?a:[a]}function Eb(a){this.l=a}
Eb.prototype.check=function(){if(!this.l.getBody())return null;var a=Ib(this.l.getRootNode(),"subscriptions-product-id");if(!a)return null;var b=Ib(this.l.getRootNode(),"subscriptions-accessible-for-free"),c=b&&"false"==b.toLowerCase()||!1;return new S(a,c)};function Fb(a){this.l=a;this.da=new T}
Fb.prototype.check=function(){if(!this.l.getBody())return null;for(var a=this.l.isReady(),b=this.l.getRootNode().querySelectorAll('script[type="application/ld+json"]'),c=0;c<b.length;c++){var d=b[c],e;if((e=!d["__SWG-SEEN__"]&&d.textContent)&&!(e=a))a:{e=d;do if(e.nextSibling){e=!0;break a}while((e=e.parentNode)&&void 0!=e);e=!1}if(e&&(d["__SWG-SEEN__"]=!0,Cb.test(d.textContent))){var f=this.Wa(d);if(f)return f}}return null};
Fb.prototype.Wa=function(a){a:{try{var b=JSON.parse(a.textContent);break a}catch(e){}b=void 0}if(!b||!this.da.checkValue(b["@type"],Bb))return null;a=null;var c=Lb(b,"isPartOf");if(c)for(var d=0;d<c.length&&!(a=this.Fa(c[d]));d++);if(!a)return null;b=Mb(b,"isAccessibleForFree");b=null==b||""===b?!0:"boolean"==typeof b?b:"string"==typeof b&&"false"==b.toLowerCase()?!1:!0;return new S(a,!b)};Fb.prototype.Fa=function(a){return this.da.checkValue(a["@type"],["Product"])?Mb(a,"productID"):null};
function Lb(a,b){a=a[b];return null==a||""===a?null:Array.isArray(a)?a:[a]}function Mb(a,b){var c=Lb(a,b);a=c&&c[0];return null==a||""===a?null:a}function Gb(a){this.l=a;this.aa=this.M=null;this.da=new T}function Nb(a,b){var c=b.querySelectorAll("[itemprop='isAccessibleForFree']");for(b=0;c[b];b++){var d=c[b],e=d.getAttribute("content")||d.textContent;if(e&&Ob(a,d,"alreadySeenForAccessInfo")){var f=null;"true"==e.toLowerCase()?f=!0:"false"==e.toLowerCase()&&(f=!1);return f}}return null}
function Ob(a,b,c){for(var d=b;d&&!d[c];d=d.parentNode)if(d[c]=!0,d.hasAttribute&&d.hasAttribute("itemscope"))return d=d.getAttribute("itemtype"),a.da.checkString(d,Bb);return!1}Gb.prototype.Fa=function(a){a=a.querySelectorAll('[itemprop="productID"]');for(var b=0;a[b];b++){var c=a[b],d=c.getAttribute("content")||c.textContent;c=c.closest("[itemtype][itemscope]");if(!(-1>=c.getAttribute("itemtype").indexOf("http://schema.org/Product"))&&Ob(this,c.parentElement,"alreadySeenForProductInfo"))return d}return null};
function Pb(a){var b=null;null!=a.M?b=!a.M:a.l.isReady()&&(b=!1);return null!=a.aa&&null!=b?new S(a.aa,b):null}Gb.prototype.Wa=function(){var a=this,b=Pb(this);if(b)return b;for(var c=Array.prototype.slice.call(this.l.getRootNode().querySelectorAll("[itemscope][itemtype]")).filter(function(b){return a.da.checkString(b.getAttribute("itemtype"),Bb)}),d=0;c[d]&&null==b;d++)b=c[d],null==this.M&&(this.M=Nb(this,b)),this.aa||(this.aa=this.Fa(b)),b=Pb(this);return b};
Gb.prototype.check=function(){return this.l.getBody()?this.Wa():null};function Ib(a,b){return(a=a.querySelector('meta[name="'+b+'"]'))?a.getAttribute("content"):null};function Qb(a){this.h=a;this.V=I(this.h,"viewport")}h=Qb.prototype;h.getWin=function(){return this.h.win};h.getRootNode=function(){return this.h.getRootNode()};h.getRootElement=function(){var a=this.h.getRootNode();return a.documentElement||a.body||a};h.getHead=function(){return this.h.getHeadNode()};h.getBody=function(){return this.h.isBodyAvailable()?this.h.getBody():null};h.isReady=function(){return this.h.isReady()};h.whenReady=function(){return this.h.whenReady()};
h.addToFixedLayer=function(a){return this.V.addToFixedLayer(a,!0)};var Rb={IS_READY_TO_PAY:"isReadyToPay",SUPPORTS_VIEWER:"supportsViewer"},Sb={};function U(a){var b=a.source,c=a.service,d=void 0===a.granted?!1:a.granted,e=void 0===a.grantReason?"":a.grantReason,f=a.dataObject,g=a.decryptedDocumentKey;this.raw=void 0===a.raw?"":a.raw;this.source=b;this.service=c;this.granted=d;this.grantReason=e;this.data=f;this.decryptedDocumentKey=g}function V(a){return new U({source:"",raw:"",service:a,granted:!1})}U.prototype.json=function(){return q({source:this.source,service:this.service,granted:this.granted,grantReason:this.grantReason,data:this.data})};
U.prototype.jsonForPingback=function(){return Object.assign({},{raw:this.raw},this.json())};function Tb(a){var b=void 0===b?null:b;a||(a={});var c=b||JSON.stringify(a);return new U({source:a.source||"",raw:c,service:"",granted:a.granted||!1,grantReason:a.grantReason,dataObject:a.data||null,decryptedDocumentKey:a.decryptedDocumentKey||null})}U.prototype.isSubscriber=function(){return this.granted&&"SUBSCRIBER"===this.grantReason};function Ub(){this.C=null}h=Ub.prototype;h.add=function(a){var b=this;this.C||(this.C=[]);this.C.push(a);return function(){b.remove(a)}};h.remove=function(a){this.C&&(a=this.C.indexOf(a),-1<a&&this.C.splice(a,1))};h.removeAll=function(){this.C&&(this.C.length=0)};h.fire=function(a){if(this.C)for(var b=this.C,c=0;c<b.length;c++)(0,b[c])(a)};h.getHandlerCount=function(){return this.C?this.C.length:0};function Vb(a,b,c,d){var e=this;this.K=d||{};this.Ra=a;this.N={};this.Ia={};a.forEach(function(a){e.Ia[a]=new u});this.Oa=new Ub;this.gb=new Ub;this.W=this.Y=this.F=this.I=null;this.fa=[];this.Ja=c;this.va=Object.assign(Sb,b)}h=Vb.prototype;h.resolvePlatform=function(a,b){this.K[a]=b;this.gb.fire({serviceId:a})};h.resetPlatformStore=function(){for(var a in this.K)this.K[a].reset();return new Vb(this.Ra,this.va,this.Ja,this.K)};
h.onPlatformResolves=function(a,b){var c=this,d=this.K[a];d?b(d):this.gb.add(function(d){d.serviceId===a&&b(c.getPlatform(a))})};h.getPlatform=function(a){return this.K[a]};h.getLocalPlatform=function(){return this.getPlatform("local")};h.getAvailablePlatforms=function(){var a=[],b;for(b in this.K)a.push(this.K[b]);return a};h.onChange=function(a){this.Oa.add(a)};
h.resolveEntitlement=function(a,b){b&&(b.service=a);this.N[a]=b;var c=this.Ia[a];c&&c.resolve(b);-1!=this.fa.indexOf(a)&&this.fa.splice(this.fa.indexOf(a));b.granted&&Wb(this,b);this.Oa.fire({serviceId:a,entitlement:b})};h.getResolvedEntitlementFor=function(a){return this.N[a]};h.getEntitlementPromiseFor=function(a){return this.Ia[a].promise};
h.getScoreFactorStates=function(){var a=this,b=q({});return Promise.all(this.Ra.map(function(c){b[c]={};return Promise.all(Object.values(Rb).map(function(d){return Xb(a,c,d).then(function(a){b[c][d]=a})}))})).then(function(){return b})};function Xb(a,b,c){return a.getEntitlementPromiseFor(b).then(function(){return a.K[b].getSupportedScoreFactor(c)})}
h.getGrantStatus=function(){var a=this;if(null!==this.I)return this.I.promise;this.I=new u;for(var b in this.N){var c=this.N[b];c.granted&&(Wb(this,c),this.I.resolve(!0))}if(W(this))this.I.resolve(!1);else this.onChange(function(b){b.entitlement.granted?a.I.resolve(!0):W(a)&&a.I.resolve(!1)});return this.I.promise};function Wb(a,b){if(!a.F&&b.granted||a.F&&!a.F.isSubscriber()&&b.isSubscriber())a.F=b}
h.getGrantEntitlement=function(){var a=this;if(this.Y)return this.Y.promise;this.Y=new u;this.F&&this.F.isSubscriber()||W(this)?this.Y.resolve(this.F):this.Oa.add(function(){(a.F&&a.F.isSubscriber()||W(a))&&a.Y.resolve(a.F)});return this.Y.promise};h.reset=function(){this.I=null};h.getAllPlatformsEntitlements=function(){var a=this;if(this.W)return this.W.promise;this.W=new u;if(W(this))this.W.resolve(Yb(this));else this.onChange(function(){W(a)&&a.W.resolve(Yb(a))});return this.W.promise};
function Yb(a){var b=[],c;for(c in a.N)la.call(a.N,c)&&b.push(a.N[c]);return b}h.selectPlatform=function(){var a=this;return this.getAllPlatformsEntitlements().then(function(){var b;a:{W(a);for(b=a.getAvailablePlatforms();b.length;){var c=b.pop();if(a.getResolvedEntitlementFor(c.getServiceId()).isSubscriber()){b=c;break a}}b=Zb(a,$b(a))}return b})};function W(a){return Object.keys(a.N).length===a.Ra.length}
function ac(a,b,c){c=c.getSupportedScoreFactor(b);return"number"!==typeof c?0:a.va[b]*Math.min(1,Math.max(-1,c))}function $b(a){return a.getAvailablePlatforms().map(function(b){return{platform:b,weight:bc(a,b)}})}function bc(a,b){var c=[0],d=b.getBaseScore(),e;for(e in a.va)la.call(a.va,e)&&c.push(ac(a,e,b));return d+c.reduce(function(a,b){return a+b})}
function Zb(a,b){var c=a.getLocalPlatform();b.sort(function(a,b){return b.weight==a.weight&&a.platform==c?-1:b.weight-a.weight});return b[0].platform}function cc(a){var b=a.getAvailablePlatforms().map(function(a){var b=a.getSupportedScoreFactor("supportsViewer");return{platform:a,weight:"number"==typeof b?b:0}});return Zb(a,b)}
h.reportPlatformFailureAndFallback=function(a){if(a===this.getLocalPlatform().getServiceId()&&this.Ja)this.resolveEntitlement(this.getLocalPlatform().getServiceId(),this.Ja),A().warn("amp-subscriptions","Local platform has failed to resolve,  using fallback entitlement.");else if(-1==this.fa.indexOf(a)){var b=V(a);this.resolveEntitlement(a,b);this.fa.push(a)}};h.selectPlatformForLogin=function(){return cc(this)};function dc(a){this.h=a;this.fb=I(a,"mutator");this.setGrantState(null);this.h.getBody().classList.add("i-amphtml-subs-ready");this.addLoadingBar()}function ec(a,b){a.fb.mutateElement(a.h.getBody(),function(){a.h.getBody().classList.toggle("i-amphtml-subs-grant-unk",null===b);a.h.getBody().classList.toggle("i-amphtml-subs-grant-yes",!0===b);a.h.getBody().classList.toggle("i-amphtml-subs-grant-no",!1===b)})}
dc.prototype.addLoadingBar=function(){var a=this;return this.h.whenReady().then(function(){var b=a.h.getBody();if(!b.querySelector("[subscriptions-section=loading]")){var c=Ta(a.h.win.document,"div",q({"class":"i-amphtml-subs-progress","subscriptions-section":"loading"}));b.insertBefore(c,Wa(b))}})};function fc(a,b){a.fb.mutateElement(a.h.getBody(),function(){a.h.getBody().classList.toggle("i-amphtml-subs-loading",b)})}dc.prototype.setGrantState=function(a){ec(this,a)};
dc.prototype.toggleLoading=function(a){fc(this,a)};function gc(a){this.H=a}h=gc.prototype;h.getAnalytics=function(){return this.H.getAnalytics()};h.getDialog=function(){return this.H.getDialog()};h.getEncryptedDocumentKey=function(a){return this.H.getEncryptedDocumentKey(a)};h.getPageConfig=function(){return this.H.getPageConfig()};h.getReaderId=function(a){return this.H.getReaderId(a)};h.getScoreFactorStates=function(){return this.H.getScoreFactorStates()};h.delegateActionToLocal=function(a,b){return this.delegateActionToService(a,"local",b)};
h.delegateActionToService=function(a,b,c){return this.H.delegateActionToService(a,b,c)};h.decorateServiceAction=function(a,b,c,d){this.H.decorateServiceAction(a,b,c,d)};h.resetPlatforms=function(){this.H.resetPlatforms()};h.selectPlatformForLogin=function(){return this.H.selectPlatformForLogin()};var hc={"-":"+",_:"/",".":"="};function ic(a){var b=atob(a.replace(/[-_.]/g,function(a){return hc[a]}));return hb(b)};function jc(a){a=a.trim();a=a.replace(/^\-+BEGIN[^-]*\-+/,"");a=a.replace(/\-+END[^-]*\-+$/,"");a=a.replace(/[\r\n]/g,"").trim();return hb(atob(a))};function kc(a){this.win=a;this.wa=a.crypto&&(a.crypto.subtle||a.crypto.webkitSubtle)||null}kc.prototype.decode=function(a){return lc(a).payload};kc.prototype.isVerificationSupported=function(){return!!this.wa};
kc.prototype.decodeAndVerify=function(a,b){var c=this;if(!this.wa)throw Error("Crypto is not supported on this platform");return(new Promise(function(b){return b(lc(a))})).then(function(a){var d=a.header.alg;if(!d||"RS256"!=d)throw Error("Only alg=RS256 is supported");return mc(c,b).then(function(b){var d=ic(a.sig);return c.wa.verify({name:"RSASSA-PKCS1-v1_5"},b,d,hb(a.verifiable))}).then(function(b){if(b)return a.payload;throw Error("Signature verification failed");})})};
function lc(a){function b(){throw Error('Invalid token: "'+a+'"');}var c=a.split(".");3!=c.length&&b();var d=ic(c[0]),e=ic(c[1]);return{header:eb(fb(d),b),payload:eb(fb(e),b),verifiable:c[0]+"."+c[1],sig:c[2]}}function mc(a,b){return b.then(function(b){return a.wa.importKey("spki",jc(b),{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"])})};var X;function nc(a,b,c){var d=a,e=c;var f=function(a){try{return e(a)}catch(l){throw self.__AMP_REPORT_ERROR(l),l;}};var g=oc();d.addEventListener(b,f,g?void 0:!1);return function(){d&&d.removeEventListener(b,f,g?void 0:!1);f=d=e=null}}function oc(){if(void 0!==X)return X;X=!1;try{var a={get capture(){X=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return X};function pc(a,b){return nc(a,"message",b)}function qc(a,b){var c=b,d=nc(a,"click",function(a){try{c(a)}finally{c=null,d()}});return d};var rc=/RETURN_URL/;function sc(a,b){var c=I(a,"viewer");return(parseInt(a.getParam("dialog"),10)?new tc(c,b):new uc(a.win,c,b)).open()}function tc(a,b){this.viewer=a;this.urlOrPromise=b}tc.prototype.getLoginUrl=function(){return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then(function(a){return vc(a,"RETURN_URL")})};
tc.prototype.open=function(){var a=this;return this.getLoginUrl().then(function(b){B().fine("amp-access-login","Open viewer dialog: ",b);return a.viewer.sendMessageAwaitResponse("openDialog",q({url:b}))})};function uc(a,b,c){this.win=a;this.viewer=b;this.urlOrPromise=c;this.ta=this.Z=this.ea=this.w=this.Qa=this.ga=null}
uc.prototype.open=function(){var a=this;D(!this.ga,"Dialog already opened");return(new Promise(function(b,c){a.ga=b;a.Qa=c;wc(a)})).then(function(b){xc(a);return b},function(b){xc(a);throw b;})};function xc(a){a.ga=null;a.Qa=null;if(a.w){try{a.w.close()}catch(b){}a.w=null}a.Z&&(a.win.clearInterval(a.Z),a.Z=null);a.ta&&(a.ta(),a.ta=null)}
uc.prototype.getLoginUrl=function(){var a=this;return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then(function(b){return vc(b,yc(a))})};
function wc(a){var b=a.win.screen,c=Math.floor(Math.min(700,.9*b.width)),d=Math.floor(Math.min(450,.9*b.height)),e=Math.floor((b.width-c)/2);b=Math.floor((b.height-d)/2);var f="height="+d+",width="+c+",left="+e+",top="+b+",resizable=yes,scrollbars=yes",g=yc(a);a.ea=null;if("string"==typeof a.urlOrPromise){var k=vc(a.urlOrPromise,g);B().fine("amp-access-login","Open dialog: ",k,g,c,d,e,b);a.w=Ya(a.win,k,f);a.w&&(a.ea=p())}else B().fine("amp-access-login","Open dialog: ","about:blank",g,c,d,e,b),a.w=
Ya(a.win,"",f),a.w&&(a.ea=a.urlOrPromise.then(function(b){b=vc(b,g);B().fine("amp-access-login","Set dialog url: ",b);a.w.location.replace(b)},function(a){throw Error("failed to resolve url: "+a);}));a.ea?a.ea.then(function(){zc(a,g)},function(b){Ac(a,null,b)}):Ac(a,null,Error("failed to open dialog"))}
function zc(a,b){var c=F(b).origin;a.Z=a.win.setInterval(function(){a.w.closed&&(a.win.clearInterval(a.Z),a.Z=null,a.win.setTimeout(function(){Ac(a,"")},3E3))},500);a.ta=pc(a.win,function(b){B().fine("amp-access-login","MESSAGE:",b);b.origin==c&&b.data&&"amp"==b.data.sentinel&&(B().fine("amp-access-login","Received message from dialog: ",b.data),"result"==b.data.type&&(a.w&&a.w.postMessage(q({sentinel:"amp",type:"result-ack"}),c),Ac(a,b.data.result)))})}
function Ac(a,b,c){a.ga&&(B().fine("amp-access-login","Login done: ",b,c),c?a.Qa(c):a.ga(b),xc(a))}function yc(a){var b=a.viewer.getResolvedViewerUrl();return va.cdn+"/v0/amp-login-done-0.1.html?url="+encodeURIComponent(b)}function vc(a,b){return rc.test(a)?a.replace(rc,encodeURIComponent(b)):a+(-1==a.indexOf("?")?"?":"&")+"return="+encodeURIComponent(b)};function Bc(a,b,c,d){for(var e in d)Ia(d[e],"action "+e);this.la=d;this.Aa={};this.T=b;this.ma=c;this.P=null;this.$a=0;this.zb=sc.bind(null,a);this.build()}Bc.prototype.build=function(){var a=this;if(0==Object.keys(this.la).length)return null;var b=[],c={},d;for(d in this.la)c.ka=d,b.push(this.T.buildUrl(this.la[c.ka],!0).then(function(b){return function(c){a.Aa[b.ka]=c}}(c))),c={ka:c.ka};return Promise.all(b).then(function(){return a.Aa})};
Bc.prototype.execute=function(a){D(this.la[a],"Action URL is not configured: %s",a);var b=D(this.Aa[a],"Action URL is not ready: %s",a);return Cc(this,b,a)};
function Cc(a,b,c){var d=Date.now();if(a.P&&1E3>d-a.$a)return a.P;B().fine("amp-subscriptions","Start action: ",b,c);a.ma.actionEvent("local",c,"started");var e=a.zb(b).then(function(b){B().fine("amp-subscriptions","Action completed: ",c,b);a.P=null;b=oa(b).success;var d="true"==b||"yes"==b||"1"==b;d?a.ma.actionEvent("local",c,"success"):a.ma.actionEvent("local",c,"rejected");return d||!b}).catch(function(b){B().fine("amp-subscriptions","Action failed: ",c,b);a.ma.actionEvent("local",c,"failed");
a.P==e&&(a.P=null);throw b;});a.P=e;a.$a=d;return a.P};var Dc=function(){function a(a,b,c,d){c=c||{};for(d=a.length;d--;c[a[d]]=b);return c}function b(){this.yy={}}var c=[1,3],d=[1,4],e=[1,18],f=[1,19],g=[1,14],k=[1,15],l=[1,16],m=[1,17],J=[1,21],r=[1,22],t=[5,6,7,10],y=[5,6,7,10,15,16,17,18,19,20,21],E=[5,6,7,10,15,16,17,18,19,20,21,25,27],O={trace:function(){},yy:{},Fb:{error:2,result:3,search_condition:4,EOF:5,OR:6,AND:7,NOT:8,"(":9,")":10,predicate:11,comparison_predicate:12,truthy_predicate:13,scalar_exp:14,EQ:15,DEQ:16,NEQ:17,LT:18,LTE:19,GT:20,
GTE:21,atom:22,field_ref:23,literal:24,DOT:25,field_name:26,"[":27,string:28,"]":29,NAME:30,STRING:31,NUMERIC:32,TRUE:33,FALSE:34,NULL:35,$accept:0,$end:1},ha:{2:"error",5:"EOF",6:"OR",7:"AND",8:"NOT",9:"(",10:")",15:"EQ",16:"DEQ",17:"NEQ",18:"LT",19:"LTE",20:"GT",21:"GTE",25:"DOT",27:"[",29:"]",30:"NAME",31:"STRING",32:"NUMERIC",33:"TRUE",34:"FALSE",35:"NULL"},ib:[0,[3,2],[4,3],[4,3],[4,2],[4,3],[4,1],[11,1],[11,1],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[13,1],[14,1],[14,1],[22,1],[23,
3],[23,4],[23,1],[26,1],[28,1],[24,1],[24,1],[24,1],[24,1],[24,1]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return f[g-1];case 2:this.m=f[g-2]||f[g];break;case 3:this.m=f[g-2]&&f[g];break;case 4:this.m=!f[g];break;case 5:this.m=f[g-1];break;case 6:case 7:case 8:case 17:case 18:case 19:this.m=f[g];break;case 9:this.m=f[g-2]===f[g];break;case 10:throw Error('"==" is not allowed, use "="');case 11:this.m=f[g-2]!==f[g];break;case 12:this.m=typeof f[g-2]==typeof f[g]&&f[g-
2]<f[g];break;case 13:this.m=typeof f[g-2]==typeof f[g]&&f[g-2]<=f[g];break;case 14:this.m=typeof f[g-2]==typeof f[g]&&f[g-2]>f[g];break;case 15:this.m=typeof f[g-2]==typeof f[g]&&f[g-2]>=f[g];break;case 16:this.m=void 0!==f[g]&&null!==f[g]&&""!==f[g]&&0!==f[g]&&!1!==f[g];break;case 20:this.m="[object Object]"==Object.prototype.toString.call(f[g-2])&&f[g-2].hasOwnProperty(f[g])?f[g-2][f[g]]:null;break;case 21:this.m="[object Object]"==Object.prototype.toString.call(f[g-3])&&f[g-3].hasOwnProperty(f[g-
1])?f[g-3][f[g-1]]:null;break;case 22:this.m=void 0!==d[f[g]]?d[f[g]]:null;break;case 23:this.m=a;break;case 24:this.m=a.substring(1,a.length-1);break;case 26:this.m=Number(a);break;case 27:this.m=!0;break;case 28:this.m=!1;break;case 29:this.m=null}},table:[{3:1,4:2,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{1:[3]},{5:[1,20],6:J,7:r},{4:23,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{4:24,8:c,9:d,11:5,12:6,
13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},a(t,[2,6]),a(t,[2,7]),a(t,[2,8]),a(t,[2,16],{15:[1,25],16:[1,26],17:[1,27],18:[1,28],19:[1,29],20:[1,30],21:[1,31]}),a(y,[2,17]),a(y,[2,18],{25:[1,32],27:[1,33]}),a(y,[2,19]),a(E,[2,22]),a(y,[2,25]),a(y,[2,26]),a(y,[2,27]),a(y,[2,28]),a(y,[2,29]),a(E,[2,23]),a([5,6,7,10,15,16,17,18,19,20,21,29],[2,24]),{1:[2,1]},{4:34,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{4:35,8:c,9:d,11:5,12:6,
13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},a(t,[2,4]),{6:J,7:r,10:[1,36]},{14:37,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{14:38,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{14:39,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{14:40,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{14:41,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{14:42,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},
{14:43,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:g,33:k,34:l,35:m},{26:44,30:e},{28:45,31:f},a([5,6,10],[2,2],{7:r}),a(t,[2,3]),a(t,[2,5]),a(t,[2,9]),a(t,[2,10]),a(t,[2,11]),a(t,[2,12]),a(t,[2,13]),a(t,[2,14]),a(t,[2,15]),a(E,[2,20]),{29:[1,46]},a(E,[2,21])],defaultActions:{20:[2,1]},parseError:function(a,b){if(b.recoverable)this.trace(a);else throw a=Error(a),a.hash=b,a;},parse:function(a){function b(){var a=n.lex()||1;"number"!==typeof a&&(a=c.Fb[a]||a);return a}var c=this,d=[0],e=[null],f=[],g=
this.table,Jb="",k=0,l=0,m=0,t=f.slice.call(arguments,1),n=Object.create(this.lexer),r={yy:{}};for(v in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v)&&(r.yy[v]=this.yy[v]);n.setInput(a,r.yy);r.yy.lexer=n;r.yy.parser=this;"undefined"==typeof n.yylloc&&(n.yylloc={});var y=n.yylloc;f.push(y);var J=n.options&&n.options.ranges;this.parseError="function"===typeof r.yy.parseError?r.yy.parseError:Object.getPrototypeOf(this).parseError;for(var w,E,z,N={},pa,C,O,qa;;){z=d[d.length-1];if(this.defaultActions[z])var v=
this.defaultActions[z];else{if(null===w||"undefined"==typeof w)w=b();v=g[z]&&g[z][w]}if("undefined"===typeof v||!v.length||!v[0]){var Kb="";qa=[];for(pa in g[z])this.ha[pa]&&2<pa&&qa.push("'"+this.ha[pa]+"'");Kb=n.showPosition?"Parse error on line "+(k+1)+":\n"+n.showPosition()+"\nExpecting "+qa.join(", ")+", got '"+(this.ha[w]||w)+"'":"Parse error on line "+(k+1)+": Unexpected "+(1==w?"end of input":"'"+(this.ha[w]||w)+"'");this.parseError(Kb,{text:n.match,token:this.ha[w]||w,line:n.yylineno,loc:y,
expected:qa})}if(v[0]instanceof Array&&1<v.length)throw Error("Parse Error: multiple actions possible at state: "+z+", token: "+w);switch(v[0]){case 1:d.push(w);e.push(n.yytext);f.push(n.yylloc);d.push(v[1]);w=null;E?(w=E,E=null):(l=n.yyleng,Jb=n.yytext,k=n.yylineno,y=n.yylloc,0<m&&m--);break;case 2:C=this.ib[v[1]][1];N.m=e[e.length-C];N.Za={first_line:f[f.length-(C||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(C||1)].first_column,last_column:f[f.length-1].last_column};
J&&(N.Za.range=[f[f.length-(C||1)].range[0],f[f.length-1].range[1]]);z=this.performAction.apply(N,[Jb,l,k,r.yy,v[1],e,f].concat(t));if("undefined"!==typeof z)return z;C&&(d=d.slice(0,-2*C),e=e.slice(0,-1*C),f=f.slice(0,-1*C));d.push(this.ib[v[1]][0]);e.push(N.m);f.push(N.Za);O=g[d[d.length-2]][d[d.length-1]];d.push(O);break;case 3:return!0}}}},bd=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a,b){this.yy=b||
this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;
this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b);this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);c.length-1&&(this.yylineno-=c.length-1);a=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+
1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-b]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");
return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c;if(this.options.backtrack_lexer){var d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};
this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))}if(c=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=c.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);
this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a;if(this._backtrack)for(var e in d)this[e]=d[e];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a;this._more||(this.match=this.yytext="");for(var b=this._currentRules(),c=0;c<b.length;c++)if((a=this._input.match(this.rules[b[c]]))&&
(!d||a[0].length>d[0].length)){var d=a;var e=c;if(this.options.backtrack_lexer){d=this.test_match(a,b[c]);if(!1!==d)return d;if(this._backtrack)d=!1;else return!1}else if(!this.options.flex)break}return d?(d=this.test_match(d,b[e]),!1!==d?d:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},
popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},
options:{},performAction:function(a,b,c){switch(c){case 1:return 7;case 2:return 6;case 3:return 8;case 4:return 35;case 5:return 33;case 6:return 33;case 7:return 34;case 8:return 34;case 9:return 9;case 10:return 10;case 11:return 27;case 12:return 29;case 13:return"|";case 14:return 19;case 15:return 18;case 16:return 21;case 17:return 20;case 18:return 17;case 19:return 16;case 20:return 15;case 21:return 32;case 22:return 30;case 23:return 31;case 24:return 31;case 25:return 25;case 26:return"INVALID";
case 27:return 5}},rules:[/^(?:\s+)/,/^(?:AND\b)/,/^(?:OR\b)/,/^(?:NOT\b)/,/^(?:NULL\b)/,/^(?:TRUE\b)/,/^(?:true\b)/,/^(?:FALSE\b)/,/^(?:false\b)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\|)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:!=)/,/^(?:==)/,/^(?:=)/,/^(?:-?[0-9]+(\.[0-9]+)?\b)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/,/^(?:'[^']*')/,/^(?:"[^"]*")/,/^(?:\.)/,/^(?:.)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],inclusive:!0}}}}();
O.lexer=bd;b.prototype=O;O.Parser=b;return new b}();function Ec(a,b){try{return Dc.yy=b,!!Dc.parse(a)}finally{Dc.yy=null}};function Fc(a,b){return Ec(a,b)};function Gc(a,b,c){this.h=a;this.ca=a.getRootNode();this.w=b;this.Gb=G(a.win,"templates");this.o=c}Gc.prototype.render=function(a){return Promise.all([Hc(this,a),Ic(this,a)])};Gc.prototype.reset=function(){this.w.close();return Jc(this,{},this.ca,function(){return!1})};function Hc(a,b){Jc(a,b,a.ca,Fc)}
function Ic(a,b){return a.h.whenReady().then(function(){for(var c=a.h.getRootNode().querySelectorAll("[subscriptions-dialog][subscriptions-display]"),d=0;d<c.length;d++){var e=c[d],f=e.getAttribute("subscriptions-display");if(f&&Ec(f,b))return e}}).then(function(c){if(c){if("TEMPLATE"==c.tagName)return a.Gb.renderTemplate(c,b).then(function(c){return Jc(a,b,c,Fc)});var d=c.cloneNode(!0);d.removeAttribute("subscriptions-dialog");d.removeAttribute("subscriptions-display");return d}}).then(function(b){if(b)return a.w.open(b,
!0)})}
function Jc(a,b,c,d){return a.h.whenReady().then(function(){for(var e=c.querySelectorAll('[subscriptions-action], [subscriptions-section="actions"], [subscriptions-actions]'),f=0;f<e.length;f++){var g=e[f],k=g.getAttribute("subscriptions-display");k&&d(k,b)?(g.classList.add("i-amphtml-subs-display"),g.getAttribute("subscriptions-service")&&g.getAttribute("subscriptions-action")&&"false"!==g.getAttribute("subscriptions-decorate")&&!g.hasAttribute("i-amphtml-subs-decorated")&&(a.o.decorateServiceAction(g,g.getAttribute("subscriptions-service"),
g.getAttribute("subscriptions-action"),null),g.setAttribute("i-amphtml-subs-decorated",!0))):g.classList.remove("i-amphtml-subs-display")}return c})};function Kc(a,b){a=a.getHeadNode();var c=a.ownerDocument.defaultView,d=c.__AMP_TOP||(c.__AMP_TOP=c),e=c!=d;if(d.__AMP__EXPERIMENT_TOGGLES)var f=d.__AMP__EXPERIMENT_TOGGLES;else{d.__AMP__EXPERIMENT_TOGGLES=Object.create(null);f=d.__AMP__EXPERIMENT_TOGGLES;if(d.AMP_CONFIG)for(var g in d.AMP_CONFIG){var k=d.AMP_CONFIG[g];"number"===typeof k&&0<=k&&1>=k&&(f[g]=Math.random()<k)}if(d.AMP_CONFIG&&Array.isArray(d.AMP_CONFIG["allow-doc-opt-in"])&&0<d.AMP_CONFIG["allow-doc-opt-in"].length&&(g=d.AMP_CONFIG["allow-doc-opt-in"],
k=d.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){k=k.getAttribute("content").split(",");for(var l=0;l<k.length;l++)-1!=g.indexOf(k[l])&&(f[k[l]]=!0)}Object.assign(f,Ja(d));if(d.AMP_CONFIG&&Array.isArray(d.AMP_CONFIG["allow-url-opt-in"])&&0<d.AMP_CONFIG["allow-url-opt-in"].length)for(g=d.AMP_CONFIG["allow-url-opt-in"],d=oa(d.location.originalHash||d.location.hash),k=0;k<g.length;k++)l=d["e-"+g[k]],"1"==l&&(f[g[k]]=!0),"0"==l&&(f[g[k]]=!1)}f=!!f["ampdoc-fie"];e&&!f?a=La(c,"url-replace")?
H(c,"url-replace"):null:(a=Ka(a),a=K(a),a=La(a,"url-replace")?H(a,"url-replace"):null);this.kb=a;this.Cb=b;this.za=null}Kc.prototype.setAuthResponse=function(a){this.za=a};Kc.prototype.buildUrl=function(a,b){var c=this;return Lc(this,b).then(function(b){return c.kb.expandUrlAsync(a,b)})};Kc.prototype.collectUrlVars=function(a,b){var c=this;return Lc(this,b).then(function(b){return c.kb.collectVars(a,b)})};
function Lc(a,b){return a.Cb.then(function(c){var d={READER_ID:c,ACCESS_READER_ID:c};b&&(d.AUTHDATA=function(b){if(a.za)return db(a.za,b)});return d})};function Y(a,b,c){this.h=a;this.ca=a.getRootNode();this.J=b;this.Bb=!!this.J.pingbackAllEntitlements;this.o=c;this.T=new Kc(this.h,this.o.getReaderId("local"));this.A=c.getAnalytics();D(this.J.actions,"Actions have not been defined in the service config");this.ab=new Bc(this.h,this.T,this.A,this.validateActionMap(this.J.actions));this.S=new Gc(this.h,c.getDialog(),this.o)}h=Y.prototype;h.getServiceId=function(){return"local"};
h.validateActionMap=function(a){D(a.login,'Action "login" is not present in action map');D(a.subscribe,'Action "subscribe" is not present in action map');return a};
function Mc(a){function b(b){if(!b._AMP_SUBSCRIPTIONS_CLICK_HANDLED&&(b._AMP_SUBSCRIPTIONS_CLICK_HANDLED=!0,b=Va(b.target))){var c=b.getAttribute("subscriptions-action"),e=b.getAttribute("subscriptions-service");"local"==e?a.executeAction(c,b.id):"auto"==(e||"auto")?"login"==c?(e=a.o.selectPlatformForLogin(),a.o.delegateActionToService(c,e.getServiceId(),b.id)):a.executeAction(c,b.id):e&&a.o.delegateActionToService(c,e,b.id)}}a.ca.addEventListener("click",b);a.ca.body&&a.ca.body.addEventListener("click",
b)}h.activate=function(a){var b=this;Nc(this,a).then(function(a){b.S.render(a)})};function Nc(a,b){var c=b.json();return a.o.getScoreFactorStates().then(function(b){c.factors=b;return a.T.setAuthResponse(c)}).then(function(){return a.ab.build()}).then(function(){return c})}h.reset=function(){this.S.reset()};h.executeAction=function(a){var b=this;return this.ab.execute(a).then(function(a){a&&b.o.resetPlatforms();return!!a})};h.isPrerenderSafe=function(){return!1};h.getSupportedScoreFactor=function(){return 0};
h.getBaseScore=function(){return this.J.baseScore||0};h.getEntitlements=function(){};h.pingback=function(){};h.pingbackReturnsAllEntitlements=function(){return this.Bb};h.isPingbackEnabled=function(){return!1};h.decorateUI=function(){};function Oc(a,b,c){this.ya=a;this.Ua=b;this.D=c;this.$=this.Va=null;this.bb=this.sb.bind(this);this.Db=0;this.Ya={}}h=Oc.prototype;h.connect=function(a){if(this.$)throw Error("already connected");this.$=a;this.ya.addEventListener("message",this.bb)};h.disconnect=function(){this.$&&(this.$=null,this.ya.removeEventListener("message",this.bb))};h.isConnected=function(){return null!=this.D};h.getTarget=function(){var a=Pc(this);if(!a)throw Error("not connected");return a};
function Pc(a){a.$&&!a.Va&&(a.Va="function"==typeof a.Ua?a.Ua():a.Ua);return a.Va}h.getTargetOrigin=function(){if(null==this.D)throw Error("not connected");return this.D};h.sendCommand=function(a,b){Qc(this,void 0,a,b)};h.sendCommandRsvp=function(a,b){var c=String(++this.Db),d=null,e=new Promise(function(a){d=a});this.Ya[c]={promise:e,resolver:d};Qc(this,c,a,b);return e};
function Qc(a,b,c,d){var e=a.getTarget();a="connect"==c?null!=a.D?a.D:"*":a.getTargetOrigin();e.postMessage({sentinel:"__AMP__",_rsvp:b,cmd:c,payload:d||null},a)}
h.sb=function(a){var b=this,c=a.data;if(c&&"__AMP__"==c.sentinel){var d=a.origin,e=c.cmd,f=c.payload||null;null==this.D&&"start"==e&&(this.D=d);null==this.D&&a.source&&Pc(this)==a.source&&(this.D=d);if(d==this.D){var g=c._rsvp,k=!!g&&"rsvp"!=e;a=this.Ka(g,e,f);k&&Promise.resolve(a).then(function(a){Qc(b,g,"rsvp",{result:a})},function(a){Qc(b,g,"rsvp",{error:String(a)})})}}};
h.Ka=function(a,b,c){if("rsvp"==b){var d=a&&this.Ya[a];d&&("error"in c?d.resolver(Promise.reject(Error(c.error))):d.resolver(c.result),delete this.Ya[a])}else return this.$(b,c)};function Rc(a,b,c){Y.call(this,a,b,c);var d=this;this.La=D(this.J.iframeSrc,'"iframeSrc" URL must be specified');Ia(this.La,"iframe Url");(this.ra=this.J.iframeVars||null)&&D(Array.isArray(this.ra),'"iframeVars" must be an array');this.D=F(this.La).origin;this.Ca=this.pa=null;this.sa=a.win.document.createElement("iframe");Q(this.sa,!1);this.ua=new Oc(this.h.win,function(){return d.sa.contentWindow},this.D);this.oa=null;Mc(this)}ia(Rc,Y);h=Rc.prototype;
h.getEntitlements=function(){var a=this;return this.connect().then(function(){return a.ua.sendCommandRsvp("authorize",{}).then(function(a){a.source="local-iframe";return a}).then(function(a){return Tb(a)})})};h.isPingbackEnabled=function(){return!0};h.pingback=function(a){var b=this;return this.connect().then(function(){return b.ua.sendCommandRsvp("pingback",{entitlement:a})})};
h.connect=function(){if(!this.Ca){var a=new u;this.Ca=a.promise;this.pa=a.resolve;this.oa=Sc(this);this.ua.connect(this.Ka.bind(this));this.h.getBody().appendChild(this.sa);this.sa.src=this.La}return this.Ca};
function Sc(a){return new Promise(function(b){var c=JSON.parse(JSON.stringify(a.J)),d=a.o.getPageConfig();c.pageConfig={publicationId:d.getPublicationId(),productId:d.getProductId(),encryptedDocumentKey:a.o.getEncryptedDocumentKey("local")||null};if(a.ra){var e=a.ra.join("&");a.T.collectUrlVars(e,!1).then(function(a){c.iframeVars=a;b(c)})}else b(c)})}
h.Ka=function(a){var b=this;"connect"===a&&this.oa.then(function(a){b.ua.sendCommandRsvp("start",{protocol:"amp-subscriptions",config:a}).then(function(){b.pa&&(b.pa(),b.pa=null)})})};function Z(a,b,c){Y.call(this,a,b,c);this.mb=Ia(D(this.J.authorizationUrl,"Service config does not have authorization Url"),"Authorization Url");this.lb=G(this.h.win,"xhr");this.hb=this.J.pingbackUrl||null;Mc(this)}ia(Z,Y);Z.prototype.getEntitlements=function(){var a=this;return this.T.buildUrl(this.mb,!1).then(function(b){var c=a.o.getEncryptedDocumentKey("local");c&&(b=Ha(b,c));return a.lb.fetchJson(b,{credentials:"include"}).then(function(a){return a.json()}).then(function(a){return Tb(a)})})};
Z.prototype.isPingbackEnabled=function(){return!!this.hb};function Tc(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){b.push(a.jsonForPingback())});return JSON.stringify(b)}return JSON.stringify(a.jsonForPingback())}Z.prototype.pingback=function(a){var b=this;if(this.isPingbackEnabled)return this.T.buildUrl(this.hb,!0).then(function(c){return b.lb.sendSignal(c,{method:"POST",credentials:"include",headers:q({"Content-Type":"text/plain"}),body:Tc(a)})})};function Uc(a,b,c){return"iframe"===b.type?new Rc(a,b,c):new Z(a,b,c)};function Vc(a,b,c,d){this.h=a;this.o=c;this.O=c.getPageConfig();this.R=Uc(a,b,c);this.U=I(this.h,"viewer");this.U.onMessage("subscriptionchange",this.Eb.bind(this));this.tb=new kc(a.win);this.Pa=this.O.getPublicationId();this.pb=this.O.getProductId();this.Ab=d;this.L=L(a.win)}h=Vc.prototype;h.isPrerenderSafe=function(){return!0};
h.getEntitlements=function(){for(var a=this,b=q({publicationId:this.Pa,productId:this.pb,origin:this.Ab}),c,d=(this.U.getParam("cryptokeys")||"google.com").split(","),e=0;e!=d.length&&!(c=this.o.getEncryptedDocumentKey(d[e]));e++);c&&(b.encryptedDocumentKey=c);return this.L.timeoutPromise(3E3,this.U.sendMessageAwaitResponse("auth",b)).then(function(b){b=b||{};var c=b.error,d=b.authorization,e=b.decryptedDocumentKey;if(c)throw Error(c.message);return d?Wc(a,d,e).catch(function(b){a.U.sendMessage("auth-rejected",
q({reason:b.message}));throw b;}):V("local")})};
function Wc(a,b,c){return new Promise(function(d){var e=Ga(a.h.win);var f=a.h.win.location;"string"==typeof f&&(f=F(f));var g=f;"string"==typeof g&&(g=F(g));if(va.cdnProxyRegex.test(g.origin)){g=f.pathname.split("/");D(ya[g[1]],"Unknown path prefix in url %s",f.href);var k=g[2],l="s"==k?"https://"+decodeURIComponent(g[3]):"http://"+decodeURIComponent(k);D(0<l.indexOf("."),"Expected a . in origin %s",l);g.splice(1,"s"==k?3:2);g=l+g.join("/");k=(k=f.search)&&"?"!=k?(k=k.replace(Ba,"").replace(Ca,"").replace(Da,
"").replace(Ea,"").replace(Fa,"").replace(/^[?&]/,""))?"?"+k:"":"";f=g+k+(f.hash||"")}else f=f.href;f=F(f).origin;var m=a.tb.decode(b),J=D(a.O.getProductId(),"Product id is null");if(m.aud!=e&&m.aud!=f)throw A().createError('The mismatching "aud" field: '+m.aud);if(m.exp<Math.floor(Date.now()/1E3))throw A().createError("Payload is expired");e=m.entitlements;f=V("local");if(e){if(Array.isArray(e))for(g=0;g<e.length;g++){if(-1!==e[g].products.indexOf(J)){var r=e[g];break}}else-1!==e.products.indexOf(J)&&
(r=e);r&&(f=new U({source:"viewer",raw:b,granted:!0,grantReason:r.subscriptionToken?"SUBSCRIBER":"",dataObject:r,decryptedDocumentKey:c}))}m.metering&&!f.granted&&(f=new U({source:m.iss||"",raw:b,granted:!0,grantReason:"METERING",dataObject:m.metering,decryptedDocumentKey:c}));f.service="local";d(f)})}h.getServiceId=function(){return this.R.getServiceId()};h.activate=function(){};h.reset=function(){};h.isPingbackEnabled=function(){return this.R.isPingbackEnabled()};
h.pingbackReturnsAllEntitlements=function(){return this.R.pingbackReturnsAllEntitlements()};h.pingback=function(a){this.R.pingback(a)};h.getSupportedScoreFactor=function(a){return this.R.getSupportedScoreFactor(a)};h.getBaseScore=function(){return 0};h.executeAction=function(a,b){return this.R.executeAction(a,b)};h.decorateUI=function(a,b,c){return this.R.decorateUI(a,b,c)};h.Eb=function(){this.o.resetPlatforms()};function Xc(a,b){var c=a.getHeadNode(),d=Yc(c,Zc(c));if(b){var e=a.getRootNode();if($c(e,d))b(d);else var f=setInterval(function(){$c(e,d)&&(clearInterval(f),b(d))},4)}}
function Yc(a,b){var c=a.__AMP_CSS_SM;c||(c=a.__AMP_CSS_SM=Object.create(null));var d=ad(a,c,"amp-extension=amp-subscriptions");if(d)return d.textContent!==b&&(d.textContent=b),d;var e=(a.ownerDocument||a).createElement("style");e.textContent=b;var f=null;e.setAttribute("amp-extension","amp-subscriptions");b=f=ad(a,c,"amp-runtime");(b=void 0===b?null:b)?a.insertBefore(e,b.nextSibling):a.insertBefore(e,a.firstChild);return c["amp-extension=amp-subscriptions"]=e}
function ad(a,b,c){return b[c]?b[c]:(a=a.querySelector("style["+c+"]"))?b[c]=a:null}
function Zc(a){return(a=a.__AMP_CSS_TR)?a("[subscriptions-action]:not(.i-amphtml-subs-display),[subscriptions-actions]:not(.i-amphtml-subs-display),[subscriptions-section=actions]:not(.i-amphtml-subs-display),body.i-amphtml-subs-delegated [subscriptions-section=actions],body.i-amphtml-subs-grant-unk [subscriptions-action],body.i-amphtml-subs-grant-unk [subscriptions-section=actions],body:not(.i-amphtml-subs-grant-no) [subscriptions-section=content-not-granted],body:not(.i-amphtml-subs-grant-yes) [subscriptions-section=content],body:not(.i-amphtml-subs-loading) [subscriptions-section=loading]{display:none!important}amp-subscriptions-dialog{display:block!important;position:fixed!important;bottom:0!important;left:0!important;margin-left:0!important;width:100%!important;z-index:2147483641!important;max-height:90vh;box-sizing:border-box;opacity:1;background-image:none;background-color:#fff;box-shadow:0 0 5px 0 rgba(0,0,0,0.2);margin-bottom:0;transition:transform 0.3s ease-in}.i-amphtml-subs-dialog-close-button{position:absolute;width:28px;height:28px;top:-28px;right:0;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='13' height='13' viewBox='341 8 13 13' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%234F4F4F' d='M354 9.31L352.69 8l-5.19 5.19L342.31 8 341 9.31l5.19 5.19-5.19 5.19 1.31 1.31 5.19-5.19 5.19 5.19 1.31-1.31-5.19-5.19z' fill-rule='evenodd'/%3E%3C/svg%3E\");background-size:13px 13px;background-position:9px;background-color:#fff;background-repeat:no-repeat;box-shadow:0 -1px 1px 0 rgba(0,0,0,0.2);border:none;border-radius:12px 0 0 0;cursor:pointer}body:not(.i-amphtml-subs-grant-yes) .i-amphtml-subs-dialog-close-button{display:none}.i-amphtml-subs-progress{height:2px;background-color:#ccc;position:relative;margin:8px;overflow:hidden}.i-amphtml-subs-progress:after{content:\"\";background-color:#2196f3;height:2px;position:absolute;left:0;top:0;width:20%;animation:i-amphtml-subs-loading-progress 1500ms ease-in-out infinite}@keyframes i-amphtml-subs-loading-progress{0%{transform:translateX(-100%)}to{transform:translateX(500%)}}@media (min-width:480px){amp-subscriptions-dialog{width:480px!important;left:-240px!important;margin-left:50vw!important}}\n/*# sourceURL=/extensions/amp-subscriptions/0.1/amp-subscriptions.css*/"):"[subscriptions-action]:not(.i-amphtml-subs-display),[subscriptions-actions]:not(.i-amphtml-subs-display),[subscriptions-section=actions]:not(.i-amphtml-subs-display),body.i-amphtml-subs-delegated [subscriptions-section=actions],body.i-amphtml-subs-grant-unk [subscriptions-action],body.i-amphtml-subs-grant-unk [subscriptions-section=actions],body:not(.i-amphtml-subs-grant-no) [subscriptions-section=content-not-granted],body:not(.i-amphtml-subs-grant-yes) [subscriptions-section=content],body:not(.i-amphtml-subs-loading) [subscriptions-section=loading]{display:none!important}amp-subscriptions-dialog{display:block!important;position:fixed!important;bottom:0!important;left:0!important;margin-left:0!important;width:100%!important;z-index:2147483641!important;max-height:90vh;box-sizing:border-box;opacity:1;background-image:none;background-color:#fff;box-shadow:0 0 5px 0 rgba(0,0,0,0.2);margin-bottom:0;transition:transform 0.3s ease-in}.i-amphtml-subs-dialog-close-button{position:absolute;width:28px;height:28px;top:-28px;right:0;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='13' height='13' viewBox='341 8 13 13' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%234F4F4F' d='M354 9.31L352.69 8l-5.19 5.19L342.31 8 341 9.31l5.19 5.19-5.19 5.19 1.31 1.31 5.19-5.19 5.19 5.19 1.31-1.31-5.19-5.19z' fill-rule='evenodd'/%3E%3C/svg%3E\");background-size:13px 13px;background-position:9px;background-color:#fff;background-repeat:no-repeat;box-shadow:0 -1px 1px 0 rgba(0,0,0,0.2);border:none;border-radius:12px 0 0 0;cursor:pointer}body:not(.i-amphtml-subs-grant-yes) .i-amphtml-subs-dialog-close-button{display:none}.i-amphtml-subs-progress{height:2px;background-color:#ccc;position:relative;margin:8px;overflow:hidden}.i-amphtml-subs-progress:after{content:\"\";background-color:#2196f3;height:2px;position:absolute;left:0;top:0;width:20%;animation:i-amphtml-subs-loading-progress 1500ms ease-in-out infinite}@keyframes i-amphtml-subs-loading-progress{0%{transform:translateX(-100%)}to{transform:translateX(500%)}}@media (min-width:480px){amp-subscriptions-dialog{width:480px!important;left:-240px!important;margin-left:50vw!important}}\n/*# sourceURL=/extensions/amp-subscriptions/0.1/amp-subscriptions.css*/"}
function $c(a,b){var c=a.styleSheets;for(a=0;a<c.length;a++)if(c[a].ownerNode==b)return!0;return!1};self.__AMP_ERRORS=self.__AMP_ERRORS||[];function cd(a){this.h=a;this.ba=null;this.L=L(a.win);this.V=I(a,"viewport")}cd.prototype.scheduleView=function(a){var b=this;this.ba=null;return this.h.whenReady().then(function(){return(new Promise(function(a){b.h.isVisible()&&a();b.h.onVisibilityChanged(function(){b.h.isVisible()&&a()})})).then(function(){return dd(b,a)})})};
function dd(a,b){if(a.ba)return a.ba;B().fine("local-viewer","start view monitoring");a.ba=ed(a,b).catch(function(b){B().fine("local-viewer","view cancelled:",b);a.ba=null;throw b;});return a.ba}
function ed(a,b){if(0==b)return p();var c=[];return(new Promise(function(d,e){c.push(a.h.onVisibilityChanged(function(){a.h.isVisible()||e(Error("CANCELLED"))}));var f=a.L.delay(d,b);c.push(function(){return a.L.cancel(f)});c.push(a.V.onScroll(d));c.push(qc(a.h.getRootNode(),d))})).then(function(){c.forEach(function(a){return a()})},function(a){c.forEach(function(a){return a()});throw a;})};function fd(a){return a.waitForBodyOpen().then(function(){var b=a.getBody(),c=Sa(b,function(){return!!b.firstElementChild});return L(a.win).timeoutPromise(2E3,c).then(function(){return"AMP-STORY"===b.firstElementChild.tagName},function(){return!1})})};function gd(a){var b=a.getElementById("amp-subscriptions");this.h=a;Xc(a,function(){});this.Ma=null;this.S=new dc(a);this.j=this.G=this.O=null;this.cb=A().assertElement(b);this.A=new M(this.cb);this.o=new gc(this);this.w=new nb(a);this.Hb=new cd(a);this.U=I(a,"viewer");this.Xa=null;this.L=L(a.win);this.qb=(this.Ga=this.U.hasCapability("auth"))&&this.U.hasCapability("paywall");this.ob=Na(K(a),"cid");this.jb={};this.Ea=new P(a)}h=gd.prototype;
h.start=function(){var a=this;hd(this).then(function(){a.A.event("subscriptions-started");a.S.toggleLoading(!0);D(a.O,"Page config is null");if(a.Ga)id(a),jd(a,!1);else{D(a.G.services,"Services not configured in service config");var b=a.G.services.map(function(a){return a.serviceId||"local"});kd(a,b);a.G.services.forEach(function(b){"local"==(b.serviceId||"local")&&a.j.resolvePlatform("local",Uc(a.h,b,a.o))});a.j.getAvailablePlatforms().forEach(function(b){ld(a,b)});fd(a.h).then(function(b){jd(a,
!b)})}});return this};h.getAccessReaderId=function(){var a=this;return hd(this).then(function(){return a.getReaderId("local")})};h.getAnalytics=function(){return this.A};h.getAuthdataField=function(a){var b=this;return hd(this).then(function(){return b.j.getEntitlementPromiseFor("local")}).then(function(b){return db(b.json(),a)})};h.getDialog=function(){return this.w};h.getEncryptedDocumentKey=function(a){return this.Ea.getEncryptedDocumentKey(a)};h.getPageConfig=function(){return this.O};
h.getReaderId=function(a){var b=this.jb[a];if(!b){var c=p(),d="amp-access"+("local"==a?"":"-"+a);b=this.ob.then(function(a){return a.get({scope:d,createCookieIfNotPresent:!0},c)});this.jb[a]=b}return b};h.getScoreFactorStates=function(){return this.j.getScoreFactorStates()};
h.registerPlatform=function(a,b){var c=this;return hd(this).then(function(){if(!c.Ga){var d=c.G.services.filter(function(b){return(b.serviceId||"local")===a}),e=D(d[0],"No matching services for the ID found"),f=b(e,c.o);c.j.resolvePlatform(f.getServiceId(),f);c.A.serviceEvent("subscriptions-service-registered",f.getServiceId());c.A.serviceEvent("subscriptions-platform-registered",f.getServiceId());ld(c,f)}})};h.selectPlatformForLogin=function(){return this.j.selectPlatformForLogin()};
function hd(a){if(!a.Ma){var b=new Qb(a.h),c=new Db(b);a.Ma=Promise.all([md(a),c.resolveConfig()]).then(function(b){a.G=b[0];a.O=b[1]})}return a.Ma}function md(a){return new Promise(function(b){var c=eb(a.cb.textContent,function(a){throw A().createError('Failed to parse "amp-subscriptions" JSON: ',a);});b(c)})}function nd(a,b,c){a.j.resolveEntitlement(b,c);c.decryptedDocumentKey&&a.Ea.tryToDecryptDocument(c.decryptedDocumentKey);a.A.serviceEvent("subscriptions-entitlement-resolved",b)}
function od(a,b){return b.getEntitlements().then(function(c){return c&&c.granted&&a.Ea.isDocumentEncrypted()&&!c.decryptedDocumentKey?(("local"==b.getServiceId()?A():B()).error("amp-subscriptions",b.getServiceId()+": Subscription granted and encryption enabled, but no decrypted document key returned."),null):c})}
function ld(a,b){if(pd(a))p();else{var c=3E3;sa().development&&(c=6E3);(b.isPrerenderSafe()?p():a.h.whenFirstVisible()).then(function(){return a.L.timeoutPromise(c,od(a,b)).then(function(c){c=c||V(b.getServiceId());nd(a,b.getServiceId(),c);return c}).catch(function(c){var d=b.getServiceId();a.j.reportPlatformFailureAndFallback(d);throw A().createError("fetch entitlements failed for "+d,c);})})}}
function kd(a,b){var c=a.G.fallbackEntitlement?Tb(a.G.fallbackEntitlement):V("local");a.j=new Vb(b,a.G.score,c);b=a.j;pd(a)&&b.resolveEntitlement("local",new U({source:"",raw:"",granted:!0,grantReason:"UNLOCKED",dataObject:{}}))}
function id(a){var b=Ga(a.h.win);kd(a,["local"]);a.G.services.forEach(function(c){if("local"==(c.serviceId||"local")){var d=new Vc(a.h,c,a.o,b);a.j.resolvePlatform("local",d);od(a,d).then(function(b){nd(a,"local",b)}).catch(function(b){a.j.reportPlatformFailureAndFallback("local");B().error("amp-subscriptions","Viewer auth failed:",b)})}})}
function jd(a,b){b=void 0===b?!0:b;a.j.getGrantStatus().then(function(b){a.S.toggleLoading(!1);a.Xa=a.Hb.scheduleView(2E3);a.qb&&!b||a.S.setGrantState(b);qd(a)});b&&rd(a)}
function rd(a){Promise.all([a.j.getGrantStatus(),a.j.selectPlatform(),a.j.getGrantEntitlement()]).then(function(b){var c=b[1],d=b[2],e=a.j.getResolvedEntitlementFor(c.getServiceId()),f=d||e;c.activate(e,d);a.A.serviceEvent("subscriptions-service-activated",c.getServiceId());a.A.serviceEvent("subscriptions-platform-activated",c.getServiceId());f.granted?a.A.serviceEvent("subscriptions-access-granted",f.service):(a.A.serviceEvent("subscriptions-paywall-activated",c.getServiceId()),a.A.serviceEvent("subscriptions-access-denied",
c.getServiceId()))})}function qd(a){a.Xa&&a.Xa.then(function(){a.j.getAvailablePlatforms().forEach(function(b){b.isPingbackEnabled()&&(b.pingbackReturnsAllEntitlements()?a.j.getAllPlatformsEntitlements().then(function(a){return b.pingback(a)}):a.j.getGrantEntitlement().then(function(a){return b.pingback(a||V("local"))}))})})}
h.resetPlatforms=function(){var a=this;this.j=this.j.resetPlatformStore();this.S.toggleLoading(!0);this.j.getAvailablePlatforms().forEach(function(b){ld(a,b)});this.A.serviceEvent("subscriptions-service-re-authorized","");this.A.serviceEvent("subscriptions-platform-re-authorized","");jd(this)};h.delegateActionToLocal=function(a,b){return this.delegateActionToService(a,"local",b)};
h.delegateActionToService=function(a,b,c){var d=this;c=void 0===c?null:c;return new Promise(function(e){d.j.onPlatformResolves(b,function(f){d.A.event("subscriptions-action-delegated",q({action:a,serviceId:b}),q({action:a,status:"started"}));e(f.executeAction(a,c))})})};h.decorateServiceAction=function(a,b,c,d){this.j.onPlatformResolves(b,function(b){b.decorateUI(a,c,d)})};function pd(a){return!a.O.isLocked()||a.G.alwaysGrant}(function(a){a.registerServiceForDoc("subscriptions",function(a){return(new gd(a)).start()})})(self.AMP);
})});

//# sourceMappingURL=amp-subscriptions-0.1.js.map
