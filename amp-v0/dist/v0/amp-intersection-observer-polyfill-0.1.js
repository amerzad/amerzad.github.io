(self.AMP=self.AMP||[]).push({n:"amp-intersection-observer-polyfill",v:"2008290323002",f:(function(AMP,_){
'use strict';function t(c){for(var e=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],d=0;d<e.length;++d){var g=e[d];if(g&&g.Math==Math)return}(function(){throw Error("Cannot find global object");})()}t(this);
function x(){(function(){function c(a){try{return a.defaultView&&a.defaultView.frameElement||null}catch(b){return null}}function e(a){this.time=a.time;this.target=a.target;this.rootBounds=w(a.rootBounds);this.boundingClientRect=w(a.boundingClientRect);this.intersectionRect=w(a.intersectionRect||u());this.isIntersecting=!!a.intersectionRect;var b=this.boundingClientRect,c=b.width*b.height,d=this.intersectionRect,e=d.width*d.height;this.intersectionRatio=c?Number((e/c).toFixed(4)):this.isIntersecting?
1:0}function d(a,b){b=b||{};if("function"!=typeof a)throw Error("callback must be a function");if(b.root&&1!=b.root.nodeType)throw Error("root must be an Element");this._checkForIntersections=f(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT);this._callback=a;this._observationTargets=[];this._queuedEntries=[];this._rootMarginValues=this._parseRootMargin(b.rootMargin);this.thresholds=this._initThresholds(b.threshold);this.root=b.root||null;this.rootMargin=this._rootMarginValues.map(function(a){return a.value+
a.unit}).join(" ");this._monitoringDocuments=[];this._monitoringUnsubscribes=[]}function g(){return window.performance&&performance.now&&performance.now()}function f(a,b){var c=null;return function(){c||(c=setTimeout(function(){a();c=null},b))}}function q(a,b,c,d){"function"==typeof a.addEventListener?a.addEventListener(b,c,d||!1):"function"==typeof a.attachEvent&&a.attachEvent("on"+b,c)}function h(a,b,c,d){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,d||!1):"function"==typeof a.detatchEvent&&
a.detatchEvent("on"+b,c)}function K(a,b){var c=Math.max(a.top,b.top),d=Math.min(a.bottom,b.bottom),e=Math.max(a.left,b.left),f=Math.min(a.right,b.right),g=f-e,h=d-c;return 0<=g&&0<=h&&{top:c,bottom:d,left:e,right:f,width:g,height:h}||null}function l(a){try{var b=a.getBoundingClientRect()}catch(p){}if(!b)return u();b.width&&b.height||(b={top:b.top,right:b.right,bottom:b.bottom,left:b.left,width:b.right-b.left,height:b.bottom-b.top});return b}function u(){return{top:0,bottom:0,left:0,right:0,width:0,
height:0}}function w(a){return!a||"x"in a?a:{top:a.top,y:a.top,bottom:a.bottom,left:a.left,x:a.left,right:a.right,width:a.width,height:a.height}}function A(a,b){var c=b.top-a.top,d=b.left-a.left;return{top:c,left:d,height:b.height,width:b.width,bottom:c+b.height,right:d+b.width}}function B(a,b){for(var c=b;c;){if(c==a)return!0;c=v(c)}return!1}function v(a){var b=a.parentNode;return 9==a.nodeType&&a!=k?c(a):b&&11==b.nodeType&&b.host?b.host:b&&b.assignedSlot?b.assignedSlot.parentNode:b}if("object"===
typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return 0<this.intersectionRatio}});else{var k=function(a){for(var b=a,d=c(b);d;)b=d.ownerDocument,d=c(b);return b}(window.document),r=[],m=null,n=null;d.prototype.THROTTLE_TIMEOUT=100;d.prototype.POLL_INTERVAL=
null;d.prototype.USE_MUTATION_OBSERVER=!0;d._setupCrossOriginUpdater=function(){m||(m=function(a,b){n=a&&b?A(a,b):u();r.forEach(function(a){a._checkForIntersections()})});return m};d._resetCrossOriginUpdater=function(){n=m=null};d.prototype.observe=function(a){if(!this._observationTargets.some(function(b){return b.element==a})){if(!a||1!=a.nodeType)throw Error("target must be an Element");this._registerInstance();this._observationTargets.push({element:a,entry:null});this._monitorIntersections(a.ownerDocument);
this._checkForIntersections()}};d.prototype.unobserve=function(a){this._observationTargets=this._observationTargets.filter(function(b){return b.element!=a});this._unmonitorIntersections(a.ownerDocument);0==this._observationTargets.length&&this._unregisterInstance()};d.prototype.disconnect=function(){this._observationTargets=[];this._unmonitorAllIntersections();this._unregisterInstance()};d.prototype.takeRecords=function(){var a=this._queuedEntries.slice();this._queuedEntries=[];return a};d.prototype._initThresholds=
function(a){var b=a||[0];Array.isArray(b)||(b=[b]);return b.sort().filter(function(a,b,c){if("number"!=typeof a||isNaN(a)||0>a||1<a)throw Error("threshold must be a number between 0 and 1 inclusively");return a!==c[b-1]})};d.prototype._parseRootMargin=function(a){var b=(a||"0px").split(/\s+/).map(function(a){var b=/^(-?\d*\.?\d+)(px|%)$/.exec(a);if(!b)throw Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(b[1]),unit:b[2]}});b[1]=b[1]||b[0];b[2]=b[2]||b[0];b[3]=b[3]||
b[1];return b};d.prototype._monitorIntersections=function(a){var b=a.defaultView;if(b&&-1==this._monitoringDocuments.indexOf(a)){var d=this._checkForIntersections,e=null,f=null;this.POLL_INTERVAL?e=b.setInterval(d,this.POLL_INTERVAL):(q(b,"resize",d,!0),q(a,"scroll",d,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in b&&(f=new b.MutationObserver(d),f.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0})));this._monitoringDocuments.push(a);this._monitoringUnsubscribes.push(function(){var b=
a.defaultView;b&&(e&&b.clearInterval(e),h(b,"resize",d,!0));h(a,"scroll",d,!0);f&&f.disconnect()});if(a!=(this.root&&this.root.ownerDocument||k)){var g=c(a);g&&this._monitorIntersections(g.ownerDocument)}}};d.prototype._unmonitorIntersections=function(a){var b=this._monitoringDocuments.indexOf(a);if(-1!=b){var d=this.root&&this.root.ownerDocument||k;if(!this._observationTargets.some(function(b){var e=b.element.ownerDocument;if(e==a)return!0;for(;e&&e!=d;)if(e=(b=c(e))&&b.ownerDocument,e==a)return!0;
return!1})){var e=this._monitoringUnsubscribes[b];this._monitoringDocuments.splice(b,1);this._monitoringUnsubscribes.splice(b,1);e();a!=d&&(b=c(a))&&this._unmonitorIntersections(b.ownerDocument)}}};d.prototype._unmonitorAllIntersections=function(){var a=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0;for(var b=this._monitoringUnsubscribes.length=0;b<a.length;b++)a[b]()};d.prototype._checkForIntersections=function(){if(this.root||!m||n){var a=this._rootIsInDom(),b=a?this._getRootRect():
u();this._observationTargets.forEach(function(c){var d=c.element,f=l(d),p=this._rootContainsTarget(d),h=c.entry,q=a&&p&&this._computeTargetAndRootIntersection(d,f,b),k=c.entry=new e({time:g(),target:d,boundingClientRect:f,rootBounds:m&&!this.root?null:b,intersectionRect:q});h?a&&p?this._hasCrossedThreshold(h,k)&&this._queuedEntries.push(k):h&&h.isIntersecting&&this._queuedEntries.push(k):this._queuedEntries.push(k)},this);this._queuedEntries.length&&this._callback(this.takeRecords(),this)}};d.prototype._computeTargetAndRootIntersection=
function(a,b,c){if("none"!=window.getComputedStyle(a).display){a=v(a);for(var d=!1;!d&&a;){var e=null,f=1==a.nodeType?window.getComputedStyle(a):{};if("none"==f.display)return null;if(a==this.root||9==a.nodeType)if(d=!0,a==this.root||a==k)m&&!this.root?!n||0==n.width&&0==n.height?b=e=a=null:e=n:e=c;else{var g=(a=v(a))&&l(a),h=a&&this._computeTargetAndRootIntersection(a,g,c);g&&h?e=A(g,h):b=a=null}else{var p=a.ownerDocument;a!=p.body&&a!=p.documentElement&&"visible"!=f.overflow&&(e=l(a))}e&&(b=K(e,
b));if(!b)break;a=a&&v(a)}return b}};d.prototype._getRootRect=function(){if(this.root)var a=l(this.root);else{var b=k.documentElement;a=k.body;a={top:0,left:0,right:b.clientWidth||a.clientWidth,width:b.clientWidth||a.clientWidth,bottom:b.clientHeight||a.clientHeight,height:b.clientHeight||a.clientHeight}}return this._expandRectByRootMargin(a)};d.prototype._expandRectByRootMargin=function(a){var b=this._rootMarginValues.map(function(b,c){return"px"==b.unit?b.value:b.value*(c%2?a.width:a.height)/100}),
c={top:a.top-b[0],right:a.right+b[1],bottom:a.bottom+b[2],left:a.left-b[3]};c.width=c.right-c.left;c.height=c.bottom-c.top;return c};d.prototype._hasCrossedThreshold=function(a,b){var c=a&&a.isIntersecting?a.intersectionRatio||0:-1,d=b.isIntersecting?b.intersectionRatio||0:-1;if(c!==d)for(a=0;a<this.thresholds.length;a++)if(b=this.thresholds[a],b==c||b==d||b<c!==b<d)return!0};d.prototype._rootIsInDom=function(){return!this.root||B(k,this.root)};d.prototype._rootContainsTarget=function(a){return B(this.root||
k,a)&&(!this.root||this.root.ownerDocument==a.ownerDocument)};d.prototype._registerInstance=function(){0>r.indexOf(this)&&r.push(this)};d.prototype._unregisterInstance=function(){var a=r.indexOf(this);-1!=a&&r.splice(a,1)};window.IntersectionObserver=d;window.IntersectionObserverEntry=e}})()};function y(c,e){e=void 0===e?"":e;try{return decodeURIComponent(c)}catch(d){return e}};var z=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function C(c){var e=Object.create(null);if(!c)return e;for(var d;d=z.exec(c);){var g=y(d[1],d[1]),f=d[2]?y(d[2].replace(/\+/g," "),d[2]):"";e[g]=f}return e};var D="";
function E(c){var e=c||self;if(e.__AMP_MODE)e=e.__AMP_MODE;else{var d=C(e.location.originalHash||e.location.hash);var g=C(e.location.search);D||(D=e.AMP_CONFIG&&e.AMP_CONFIG.v?e.AMP_CONFIG.v:"012008290323002");d={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(d.development)||e.AMP_DEV_MODE),examiner:"2"==d.development,esm:!1,geoOverride:d["amp-geo"],minified:!0,lite:void 0!=g.amp_lite,test:!1,log:d.log,version:"2008290323002",rtvVersion:D};e=e.__AMP_MODE=d}return e}
;var F=self.AMP_CONFIG||{},G=("string"==typeof F.cdnProxyRegex?new RegExp(F.cdnProxyRegex):F.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function H(c){if(self.document&&self.document.head&&(!self.location||!G.test(self.location.origin))){var e=self.document.head.querySelector('meta[name="'+c+'"]');e&&e.getAttribute("content")}}F.cdnUrl||H("runtime-host");F.geoApiUrl||H("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
(function(c){return c||{}})({c:!0,v:!0,a:!0,ad:!0});function I(c){c=c.__AMP_TOP||(c.__AMP_TOP=c);return J(c,"iframeMessagingClient")?L(c,"iframeMessagingClient"):null}function L(c,e){J(c,e);c=M(c)[e];c.obj||(c.obj=new c.ctor(c.context),c.ctor=null,c.context=null,c.resolve&&c.resolve(c.obj));return c.obj}function M(c){var e=c.__AMP_SERVICES;e||(e=c.__AMP_SERVICES={});return e}function J(c,e){c=c.__AMP_SERVICES&&c.__AMP_SERVICES[e];return!(!c||!c.ctor&&!c.obj)};function N(c,e,d,g){return{left:c,top:e,width:d,height:g,bottom:e+g,right:c+d,x:c,y:e}};function O(c){if(c!=c.top&&"inabox"==E(c).runtime){var e=I(c),d=c.IntersectionObserver._setupCrossOriginUpdater;if(e&&d){var g=d();e.makeRequest("send-positions","position",function(c){var d=c.targetRect,e=c.viewportRect;c=Math.max(d.top,0);var f=Math.max(d.left,0),l=Math.min(d.bottom,e.height);e=Math.min(d.right,e.width);c=c>l||f>e?N(0,0,0,0):N(f,c,e-f,l-c);g(d,c)})}}};var P;function Q(c,e){var d=c.IntersectionObserver;if(d&&"_upgraders"in d){delete c.IntersectionObserver;delete c.IntersectionObserverEntry;e();var g=c.IntersectionObserver,f=d._upgraders.slice(0);P||(P=Promise.resolve(void 0));var q=P;var h=function(c){q.then(function(){return c(g)})};0<f.length&&f.forEach(h);d._upgraders={push:h}}else e()};function R(c){Q(c,function(){x();O(c)});return{}}(function(){var c=window,e=c=c.__AMP_TOP||(c.__AMP_TOP=c),d=c,g=M(e),f=g["amp-intersection-observer-polyfill"];f||(f=g["amp-intersection-observer-polyfill"]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});f.ctor||f.obj||(f.ctor=R,f.context=d,f.resolve&&L(e,"amp-intersection-observer-polyfill"));L(c,"amp-intersection-observer-polyfill")})(self.AMP);
})});

//# sourceMappingURL=amp-intersection-observer-polyfill-0.1.js.map
