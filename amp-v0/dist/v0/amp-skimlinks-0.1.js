(self.AMP=self.AMP||[]).push({n:"amp-skimlinks",v:"2007102309000",f:(function(AMP,_){
var k,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ba(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}return function(){throw Error("Cannot find global object");}()}var ca=ba(this);"function"===typeof Symbol&&Symbol("x");var l;
if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var n;a:{var da={a:!0},p={};try{p.__proto__=da;n=p.a;break a}catch(a){}n=!1}l=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ea=l;
function fa(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ea)ea(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.xa=b.prototype};function ha(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function ia(a){var b=!1,c=null,d=a;return function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];b||(c=d.apply(self,e),b=!0,d=null);return c}};var r=self.AMP_CONFIG||{},ja=("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ka(a){if(self.document&&self.document.head&&(!self.location||!ja.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}r.cdnUrl||ka("runtime-host");r.geoApiUrl||ka("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var t=self.__AMP_LOG;function u(){if(t.dev)return t.dev;throw Error("failed to call initLogConstructor");}function la(a,b){if(!t.user)throw Error("failed to call initLogConstructor");t.user.assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};function v(a){return a||{}};function w(){this.ma=100;this.R=this.Y=0;this.L=Object.create(null)}w.prototype.has=function(a){return!!this.L[a]};w.prototype.get=function(a){var b=this.L[a];if(b)return b.access=++this.R,b.payload};w.prototype.put=function(a,b){this.has(a)||this.Y++;this.L[a]={payload:b,access:this.R};if(!(this.Y<=this.ma)){u().warn("lru-cache","Trimming LRU cache");a=this.L;var c=this.R+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.Y--)}};v({c:!0,v:!0,a:!0,ad:!0,action:!0});var x,ma;
function na(a){x||(x=self.document.createElement("a"),ma=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new w));var b=ma,c=x;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a};function y(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return z(a,b)}function A(a,b){var c=C(a);c=D(c);return z(c,b)}function C(a){return a.nodeType?y((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function D(a){a=C(a);return a.isSingleDoc()?a.win:a}function z(a,b){a=E(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function oa(a,b){var c=pa(a,b);if(c)return c;a=E(a);a[b]=qa();return a[b].promise}
function pa(a,b){var c=E(a)[b];if(c){if(c.promise)return c.promise;z(a,b);return c.promise=Promise.resolve(c.obj)}return null}function E(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function qa(){var a=new ha,b=a.promise,c=a.resolve;a=a.reject;b.catch(function(){});return{obj:null,promise:b,resolve:c,reject:a,context:null,ctor:null}};var F;function G(){return F?F:F=Promise.resolve(void 0)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var H;function ra(a,b,c){a=a.createElement(b);for(var d in c)a.setAttribute(d,c[d]);return a};function sa(a){var b=pa(D(a),"amp-analytics-instrumentation");if(b)return b;var c=C(a);return c.waitForBodyOpen().then(function(){var a=c.win;var b=c.win.document.head;if(b){var f={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(var g=0;g<b.length;g++){var h=b[g];h=h.getAttribute("custom-element")||h.getAttribute("custom-template");f[h]=!0}f=Object.keys(f)}else f=[];return f.includes("amp-analytics")?y(a,"extensions").waitForExtension(a,"amp-analytics"):G()}).then(function(){var b=
c.win;return b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-analytics"]?oa(D(a),"amp-analytics-instrumentation"):null})};function ta(a,b,c){var d=!1;c=void 0===c?{}:c;d=void 0===d?!0:d;sa(a).then(function(e){e&&e.triggerEventForTarget(a,b,c,d)})};function ua(a,b){var c=!0;c=void 0===c?!1:c;var d=void 0===d?!1:d;var e=a.ownerDocument,f=ra(e,"amp-analytics",v({sandbox:"true",trigger:d?"":"immediate"})),g=ra(e,"script",v({type:"application/json"}));g.textContent=JSON.stringify(b);f.appendChild(g);f.CONFIG=b;c?(b=y(a.ownerDocument.defaultView,"extensions"),c=C(a),b.installExtensionForDoc(c,"amp-analytics")):sa(a).then(function(){});a.appendChild(f)}
function va(a,b){var c=this;this.da=a.getResourceId();this.H=a;this.w=b;for(var d in b.triggers)b.triggers[d].on="sandbox-"+this.da+"-"+b.triggers[d].on;this.H.signals().whenSignal("load-start").then(function(){ua(c.H,b)})}va.prototype.trigger=function(a,b){ta(this.H,"sandbox-"+this.da+"-"+a,b)};function I(a){this.H=a;this.w={requests:{},triggers:{}}}I.prototype.setTransportConfig=function(a){this.w.transport=a};I.prototype.setExtraUrlParams=function(a){this.w.extraUrlParams=a};
I.prototype.track=function(a,b){b=Array.isArray(b)?b:[b];for(var c=[],d=0;d<b.length;d++){var e=a+"-request-"+d;this.w.requests[e]=b[d];c.push(e)}this.w.triggers[a]={on:a,request:c};return this};I.prototype.build=function(){var a=new va(this.H,this.w);this.w=null;return a};function J(a){return a?a.hostname.replace(/^www\./,""):""}function K(a,b){var c=b.excludedDomains;return c&&-1!==c.indexOf(a)}function wa(a,b){a=J(a);return K(a,b)};var L={pageTrackingUrl:"https://t.skimresources.com/api/track.php?data=${data}",linksTrackingUrl:"https://t.skimresources.com/api/link?data=${data}",nonAffiliateTrackingUrl:"https://t.skimresources.com/api/?call=track&rnd=${rnd}&data=${data}",beaconUrl:"https://r.skimresources.com/api"},xa="facebook.com go.redirectingat.com go.skimresources.com instagram.com twitter.com youtube.com".split(" ");function M(a,b,c){this.N=b.tracking;for(var d=b.customTrackingId,e="",f=0;8>f;f++)e+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);this.I={customTrackingId:d,guid:null,pageImpressionId:e,pageUrl:"CANONICAL_URL",pubcode:b.pubcode,referrer:c,timezone:"TIMEZONE"};this.h=b;a=new I(a);b=this.h.config;d=b.linksTrackingUrl;e=b.nonAffiliateTrackingUrl;a.track("page-impressions",b.pageTrackingUrl);a.track("link-impressions",d);a.track("non-affiliate-click",e);a.setTransportConfig(v({beacon:!0,
image:!0,xhrpost:!1}));this.S=a.build()}M.prototype.getTrackingInfo=function(){return this.I};M.prototype.setTrackingInfo=function(a){Object.assign(this.I,a)};
M.prototype.sendImpressionTracking=function(a){if(this.N){var b=this.I,c=v({pub:b.pubcode,pag:b.pageUrl,guid:b.guid,uuid:b.pageImpressionId,tz:b.timezone,jv:"amp@1.0.3"});b=Da(this,a);var d=b.numberAffiliateLinks,e=b.urls;b=this.I;b=Object.assign(v({slc:d,jsl:0,pref:b.referrer,uc:b.customTrackingId,t:1}),c);this.S.trigger("page-impressions",v({data:JSON.stringify(b)}));0!==d&&(b=Object.assign(v({dl:e,hae:d?1:0,typ:"l"}),c),this.S.trigger("link-impressions",v({data:JSON.stringify(b)})))}};
M.prototype.sendNaClickTracking=function(a){if(this.N&&!wa(a,this.h)){var b=this.I,c=b.pageImpressionId,d=b.timezone,e=b.customTrackingId;a=v({pubcode:b.pubcode,referrer:b.pageUrl,pref:b.referrer,site:"false",url:a.href,custom:a.getAttribute("data-skimlinks-custom-tracking-id")||e,xtz:d,uuid:c,product:"1",jv:"amp@1.0.3"});this.S.trigger("non-affiliate-click",v({data:JSON.stringify(a),rnd:"RANDOM"}))}};
function Da(a,b){var c=0,d=v({});b.forEach(function(b){var e=b.replacementUrl,g=b.anchor,h=wa(g,a.h);e&&!h&&(d[g.href]=d[g.href]||v({ae:1,count:0}),d[g.href].count+=1,c+=1)});return{numberAffiliateLinks:c,urls:d}};function Ea(a,b){this.syncResponse=a;this.asyncResponse=b};function N(a,b,c){this.P=a;this.h=b;this.O=c;this.B=v({});this.firstRequest=null}N.prototype.fetchDomainResolverApi=function(a){var b=v({pubcode:this.h.pubcode,page:"",domains:a}),c=this.h.config.beaconUrl;c=c+"?data="+JSON.stringify(b);return this.P.fetchJson(c,{method:"GET",ampCors:!1,credentials:"include"}).then(function(a){return a.json()})};
N.prototype.resolveUnknownAnchors=function(a){var b=Fa(this,a),c=null,d=Ga(this,a);if(d.length){Ha(this,d);var e=this.U(a,d);c=Ia(this,e,d)}return new Ea(b,c)};function Fa(a,b){return b.map(function(b){var c=null;var e=J(b);e=K(e,a.h)?"ignore":a.B[e]||"unknown";if("affiliate"===e||"unknown"===e)c=a.O.getAffiliateUrl(b);return{anchor:b,replacementUrl:c}})}function Ga(a,b){return b.reduce(function(b,d){d=J(d);var c=a.B[d],f=K(d,a.h),g=-1!==b.indexOf(d);c||f||g||b.push(d);return b},[])}
function Ha(a,b){b.forEach(function(b){a.B[b]||(K(b,a.h)&&(a.B[b]="ignore"),a.B[b]="unknown")})}N.prototype.U=function(a,b){return a.filter(function(a){var c=J(a);return-1!==b.indexOf(c)})};function Ia(a,b,c){var d=a.fetchDomainResolverApi(c);a.firstRequest||(a.firstRequest=d);return d.then(function(d){Ja(a,c,d.merchant_domains||[]);return Fa(a,b)})}function Ja(a,b,c){b.forEach(function(b){var d=-1!==c.indexOf(b);a.B[b]=d?"affiliate":"non-affiliate"})};var O,Ka="Webkit webkit Moz moz ms O o".split(" ");var La=!1;function Q(){this.l=[]}Q.prototype.peek=function(){var a=this.l.length;return a?this.l[a-1].item:null};Q.prototype.enqueue=function(a,b){if(isNaN(b))throw Error("Priority must not be NaN.");for(var c=-1,d=0,e=this.l.length;d<=e;){c=Math.floor((d+e)/2);if(c===this.l.length)break;if(this.l[c].priority<b)d=c+1;else if(0<c&&this.l[c-1].priority>=b)e=c-1;else break}this.l.splice(c,0,{item:a,priority:b})};Q.prototype.forEach=function(a){for(var b=this.l.length;b--;)a(this.l[b].item)};
Q.prototype.dequeue=function(){return this.l.length?this.l.pop().item:null};ca.Object.defineProperties(Q.prototype,{length:{configurable:!0,enumerable:!0,get:function(){return this.l.length}}});var Ma=/nochunking=1/.test(self.location.hash),R=G();function Na(a,b){if(Ma)R.then(b);else{var c=S,d=C(a),e=D(d),f=E(e),g=f.chunk;g||(g=f.chunk={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});g.ctor||g.obj||(g.ctor=c,g.context=d,g.resolve&&z(e,"chunk"));A(a,"chunk").run(b,10)}}function T(a){this.state="not_run";this.T=a}function Oa(a,b){if("run"!=a.state){a.state="run";try{a.T(b)}catch(c){throw a.ga(),c;}}}T.prototype.ga=function(){};T.prototype.ea=function(){return!1};
T.prototype.ia=function(){return!1};function U(a,b,c){T.call(this,a);this.$=c}fa(U,T);
U.prototype.ga=function(){var a=self.document;if(!La){La=!0;a=a.body;var b={opacity:1,visibility:"visible",animation:"none"},c;for(c in b){var d=a,e=b[c];var f=d.style;var g=c;if(2>g.length?0:0==g.lastIndexOf("--",0))f=g;else{O||(O=Object.create(null));var h=O[g];if(!h){h=g;if(void 0===f[g]){var m=g;m=m.charAt(0).toUpperCase()+m.slice(1);b:{for(var q=0;q<Ka.length;q++){var B=Ka[q]+m;if(void 0!==f[B]){m=B;break b}}m=""}void 0!==f[m]&&(h=m)}O[g]=h}f=h}f&&((2>f.length?0:0==f.lastIndexOf("--",0))?d.style.setProperty(f,
e):d.style[f]=e)}}};U.prototype.ea=function(){return this.$.ampdoc.isVisible()};U.prototype.ia=function(){return this.$.aa};
function S(a){var b=this;this.ampdoc=a;this.F=a.win;this.D=new Q;this.Z=this.ca.bind(this);this.C=0;this.M=!1;this.ka=this.F.document.documentElement.hasAttribute("i-amphtml-no-boilerplate");this.F.addEventListener("message",function(a){"amp-macro-task"==a.data&&b.ca(null)});this.aa=!1;oa(D(a),"viewer").then(function(){b.aa=!0});a.onVisibilityChanged(function(){a.isVisible()&&V(b)})}S.prototype.run=function(a,b){var c=new T(a);this.D.enqueue(c,b);V(this)};
S.prototype.runForStartup=function(a){a=new U(a,this.F,this);this.D.enqueue(a,Number.POSITIVE_INFINITY);V(this)};function Pa(a,b){for(var c=a.D.peek();c&&"not_run"!==c.state;)a.D.dequeue(),c=a.D.peek();c&&b&&a.D.dequeue();return c}
S.prototype.ca=function(a){var b=this,c=Pa(this,!0);if(!c)return this.M=!1,this.C=0,!1;try{var d=Date.now();Oa(c,a)}finally{R.then().then().then().then().then().then().then().then().then(function(){b.M=!1;b.C+=Date.now()-d;u().fine("CHUNK",c.T.displayName||c.T.name,"Chunk duration",Date.now()-d,b.C);V(b)})}return!0};function Qa(a){a.ka&&5<a.C?(a.C=0,Ra(a)):R.then(function(){a.Z(null)})}
function V(a){if(!a.M){var b=Pa(a);b&&(b.ea()?(a.M=!0,Qa(a)):b.ia()&&a.F.requestIdleCallback?Sa(a.F,a.Z):Ra(a))}}function Ra(a){a.F.postMessage("amp-macro-task","*")}
function Sa(a,b){function c(e){if(15>e.timeRemaining()){var f=2E3-(Date.now()-d);0>=f||e.didTimeout?(u().fine("CHUNK","Timed out",2E3,e.didTimeout),b(e)):(u().fine("CHUNK","Rescheduling with",f,e.timeRemaining()),a.requestIdleCallback(c,{timeout:f}))}else u().fine("CHUNK","Running idle callback with ",15),b(e)}var d=Date.now();a.requestIdleCallback(c,{timeout:2E3})};function Ta(){this.G=[];this.X=[]}k=Ta.prototype;k.updateLinkList=function(a){this.X=a.map(this.getReplacementUrlForAnchor.bind(this));this.G=a};k.updateReplacementUrls=function(a){var b=this;a.forEach(function(a){var c=a.replacementUrl,e=b.G.indexOf(a.anchor);-1!==e&&(b.X[e]=c)})};k.getReplacementUrlForAnchor=function(a){a=this.G.indexOf(a);return-1!==a?this.X[a]:null};k.isInCache=function(a){return-1!==this.G.indexOf(a)};
k.getAnchorReplacementList=function(){var a=this;return this.G.map(function(b){return{anchor:b,replacementUrl:a.getReplacementUrlForAnchor(b)}})};function Ua(){this.j=null}k=Ua.prototype;k.add=function(a){var b=this;this.j||(this.j=[]);this.j.push(a);return function(){b.remove(a)}};k.remove=function(a){this.j&&(a=this.j.indexOf(a),-1<a&&this.j.splice(a,1))};k.removeAll=function(){this.j&&(this.j.length=0)};k.fire=function(a){if(this.j)for(var b=this.j,c=0;c<b.length;c++)(0,b[c])(a)};k.getHandlerCount=function(){return this.j?this.j.length:0};function Va(a,b,c,d){this.events=new Ua;this.id=b;this.A=a;this.ta=c;this.oa=d.linkSelector||"a";this.ua=300;this.o=new Ta}k=Va.prototype;k.getReplacementUrl=function(a){return this.isWatchingLink(a)?this.o.getReplacementUrlForAnchor(a):null};k.getAnchorReplacementList=function(){return this.o.getAnchorReplacementList()};k.isWatchingLink=function(a){return this.o.isInCache(a)};
k.rewriteAnchorUrl=function(a){var b=this.getReplacementUrl(a);if(!b||b===a.href)return!1;a.setAttribute("data-link-rewriter-original-url",a.href);a.href=b;setTimeout(function(){a.href=a.getAttribute("data-link-rewriter-original-url");a.removeAttribute("data-link-rewriter-original-url")},this.ua);return!0};
k.onDomUpdated=function(){var a=this;return new Promise(function(b){Na(a.A.nodeType==Node.DOCUMENT_NODE?a.A.documentElement:a.A,function(){return Wa(a).then(function(){a.events.fire({type:"PAGE_SCANNED"});b()})})})};
function Wa(a){var b=Xa(a),c=a.U(b);a.o.updateLinkList(b);if(!c.length)return G();a.o.updateReplacementUrls(c.map(function(a){return{anchor:a,replacementUrl:null}}));var d=a.ta(c);la(d instanceof Ea,'Invalid response from provided "resolveUnknownLinks" function."resolveUnknownLinks" should return an instance of TwoStepsResponse');d.syncResponse&&a.o.updateReplacementUrls(d.syncResponse);return d.asyncResponse?d.asyncResponse.then(function(b){a.o.updateReplacementUrls(b)}):G()}
k.U=function(a){var b=this,c=[];a.forEach(function(a){b.isWatchingLink(a)||c.push(a)});return c};function Xa(a){var b=a.A.querySelectorAll(a.oa);return[].slice.call(b)};function W(a){this.A=a.getRootNode();var b=a.getMetaByName("amp-link-rewriter-priorities");this.sa=b?b.trim().split(/\s+/):[];this.V=[];this.A.addEventListener("amp:dom-update",this.qa.bind(this));A(a,"navigation").registerAnchorMutator(this.maybeRewriteLink.bind(this),0)}W.prototype.registerLinkRewriter=function(a,b,c){var d=new Va(this.A,a,b,c);Ya(this.V,d,this.sa);d.onDomUpdated();return d};
W.prototype.maybeRewriteLink=function(a,b){var c=Za(this,a);if(c.length){for(var d=null,e=0;e<c.length;e++)if(c[e].rewriteAnchorUrl(a)){d=c[e];break}var f={linkRewriterId:d?d.id:null,anchor:a,clickType:b.type};c.forEach(function(a){a.events.fire({type:"CLICK",eventData:f})})}};W.prototype.qa=function(){this.V.forEach(function(a){a.onDomUpdated()})};function $a(a){var b=a.hasAttribute("data-link-rewriters")?a.getAttribute("data-link-rewriters").trim():null;return b?b.split(/\s+/):[]}
function Ya(a,b,c){a.push(b);a.sort(function(a,b){var d=c.indexOf(a.id),e=c.indexOf(b.id);return-1===d&&-1===e?0:-1===d?1:-1===e?-1:d>e?1:-1})}function Za(a,b){var c=$a(b);return a.V.reduce(function(a,e){e.isWatchingLink(b)&&Ya(a,e,c);return a},[])};function ab(a,b,c,d){this.N=c;this.na=d;this.la=A(a,"documentInfo").get().canonicalUrl;this.wa=""+(new Date).getTimezoneOffset();this.h=b}
ab.prototype.getAffiliateUrl=function(a){if(!a)return null;var b=this.N.getTrackingInfo(),c=b.pubcode,d=b.pageImpressionId,e=b.customTrackingId;b=b.guid;var f=a.getAttribute("data-skimlinks-custom-tracking-id")||e,g=v({id:c,url:a.href,sref:this.la,pref:this.na,xguid:b,xuuid:d,xtz:this.wa,xs:"1",jv:"amp@1.0.3"});f&&(g.xcust=f);a=this.h.waypointBaseUrl;c=[];for(h in g)if(d=g[h],null!=d)if(Array.isArray(d))for(e=0;e<d.length;e++)b=d[e],c.push(encodeURIComponent(h)+"="+encodeURIComponent(b));else c.push(encodeURIComponent(h)+
"="+encodeURIComponent(d));var h=c.join("&");h?(a=a.split("#",2),c=a[0].split("?",2),h=c[0]+(c[1]?"?"+c[1]+"&"+h:"?"+h),h+=a[1]?"#"+a[1]:""):h=a;return h};function Y(a,b){la(a,"<amp-skimlinks> Invalid option => "+b)}
function bb(a,b){var c=a.getAttribute("publisher-code");Y(c,'"publisher-code" is required.');var d=[];b.canonicalUrl&&d.push(na(b.canonicalUrl).hostname.replace(/^www\./,""));b.sourceUrl&&d.push(na(b.sourceUrl).hostname.replace(/^www\./,""));d=cb(a,d);var e;(e=a.getAttribute("tracking"))?(Y("true"===e||"false"===e,'"tracking" possible values are "true" or "false".'),e="true"===e):e=!0;var f=a.getAttribute("custom-tracking-id");f&&Y(50>=f.length,'"custom-tracking-id" should be <=50 characters and only contain upper and lowercase characters, numbers, underscores and pipes.');
var g=a.getAttribute("link-selector")||null,h;(h=a.getAttribute("custom-redirect-domain"))?(h=h.replace(/^\/\/|^https?:\/\/|\/$/g,""),h="http://"+h):h="https://go.skimresources.com";try{/^[\w-]+$/.test("script");if(void 0!==H)var m=H;else{try{var q=a.ownerDocument,B=q.createElement("div"),ya=q.createElement("div");B.appendChild(ya);var za=B.querySelector(":scope div")===ya}catch(Aa){za=!1}m=H=za}if(m)var Ba=a.querySelectorAll("> script".replace(/^|,/g,"$&:scope "));else{a.classList.add("i-amphtml-scoped");
var db="> script".replace(/^|,/g,"$&.i-amphtml-scoped "),eb=a.querySelectorAll(db);a.classList.remove("i-amphtml-scoped");Ba=eb}var X=Ba;if(1!==X.length)throw Error("Found "+X.length+" <script> children. Expected 1.");var P=X[0];if("SCRIPT"!=P.tagName||!P.hasAttribute("type")||"APPLICATION/JSON"!=P.getAttribute("type").toUpperCase())throw Error('<script> child must have type="application/json"');try{var fb=JSON.parse(P.textContent)}catch(Aa){throw Error("Failed to parse <script> contents. Is it valid JSON?");
}a=fb;var Ca={pageTrackingUrl:a.pageTrackingUrl||L.pageTrackingUrl,linksTrackingUrl:a.linksTrackingUrl||L.linksTrackingUrl,nonAffiliateTrackingUrl:a.nonAffiliateTrackingUrl||L.nonAffiliateTrackingUrl,beaconUrl:a.beaconUrl||L.beaconUrl}}catch(Aa){Ca=L}return{pubcode:c,excludedDomains:d,tracking:e,customTrackingId:f,linkSelector:g,waypointBaseUrl:h,config:Ca}}
function cb(a,b){var c=[].concat(b).concat(xa),d=a.getAttribute("excluded-domains");d&&(c=c.concat(d.trim().split(/\s+/).map(function(a){return a.replace(/^www\./,"")})));return c};function Z(a){a=AMP.BaseElement.call(this,a)||this;a.P=null;a.m=null;a.ba=null;a.ja=null;a.fa=null;a.h={};a.J=null;a.K=null;a.O=null;a.ha=null;a.W=null;return a}fa(Z,AMP.BaseElement);k=Z.prototype;
k.buildCallback=function(){var a=this;this.P=y(this.win,"xhr");this.m=this.getAmpDoc();this.ba=A(this.m,"documentInfo").get();this.ja=A(this.m,"viewer");this.fa=new W(this.m);this.h=bb(this.element,this.ba);return this.m.waitForBodyOpen().then(function(){return a.ja.getReferrerUrl()}).then(function(b){a.W=b;a.signals().signal("load-start");b=new M(a.element,a.h,a.W);a.J=b;a.O=new ab(a.m,a.h,a.J,a.W);a.K=new N(a.P,a.h,a.O);a.ha=gb(a)})};
k.va=function(a){var b=this;this.J.setTrackingInfo({guid:a.guid});this.m.whenFirstVisible().then(function(){b.J.sendImpressionTracking(b.ha.getAnchorReplacementList())})};k.ra=function(){return(this.K.firstRequest||this.K.fetchDomainResolverApi([])).then(this.va.bind(this))};
function gb(a){var b=a.fa.registerLinkRewriter("amp-skimlinks",function(b){return a.K.resolveUnknownAnchors(b)},{linkSelector:a.h.linkSelector}),c={},d=(c.PAGE_SCANNED=ia(a.ra.bind(a)),c.CLICK=a.pa.bind(a),c);b.events.add(function(a){var b=d[a.type];b&&b(a.eventData)});return b}k.pa=function(a){"amp-skimlinks"!==a.linkRewriterId&&"contextmenu"!==a.clickType&&this.J.sendNaClickTracking(a.anchor)};k.isLayoutSupported=function(){return!0};(function(a){a.registerElement("amp-skimlinks",Z)})(self.AMP);
})});

//# sourceMappingURL=amp-skimlinks-0.1.js.map
