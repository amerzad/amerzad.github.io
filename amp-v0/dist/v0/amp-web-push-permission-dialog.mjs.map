{"version":3,"mappings":"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","names":["tryDecodeUriComponent_","component","fallback","decodeURIComponent","e","regex","parseQueryString_","queryString","params","Object","match","name","value","rtvVersion","env","self","cdnProxyRegex","RegExp","getMetaUrl","metaEl","user","dev","userForEmbed","logs","Error","LruCache","constructor","capacity","this","capacity_","access_","size_","cache_","has","key","get","cacheable","put","payload","access","evict_","cache","oldest","oldestKey","undefined","dict","opt_initial","c","v","a","ad","parseUrlDeprecated","url","opt_nocache","opt_cache","info","href","protocol","host","hostname","port","pathname","search","hash","origin","parseUrlWithA","WindowMessenger","options","debug","windowContext","window","messages_","listeners_","debug_","connected_","connecting_","listening_","onChannelMessageReceivedProc_","onConnectConnectionMessageReceivedProc_","onListenConnectionMessageReceivedProc_","messagePort_","channel_","window_","listen","allowedOrigins","Promise","resolve","reject","Array","isArray","onListenConnectionMessageReceived_","bind","addEventListener","fine","TAG","then","send","Topics","CONNECT_HANDSHAKE","P","resolvePromise","rejectPromise","messageChannelEvent","message","event","messagePorts","normalizedOrigin","i","length","l","topic","removeEventListener","onChannelMessageReceived_","start","connect","remoteWindowContext","expectedRemoteOrigin","MessageChannel","port1","onConnectConnectionMessageReceived_","postMessage","port2","O","messagePort","NOTIFICATION_PERMISSION_STATE","SERVICE_WORKER_STATE","SERVICE_WORKER_REGISTRATION","SERVICE_WORKER_QUERY","STORAGE_GET","J","id","isReply","existingMessage","promiseResolver","data","sendReply_","listeners","on","callback","push","off","callbackIndex","indexOf","splice","K","crypto","getRandomValues","Uint8Array","join","onCloseIconClick_","z","closeIcon","document","querySelector","closeDialog","storeNotificationPermission_","A","localStorage","setItem","NOTIFICATION_PERMISSION","Notification","permission","onPermissionDefaultOrGranted_","B","requestNotificationPermission","isCurrentDialogPopup","ampMessenger_","opener","result","closeFrame","onPermissionDenied_","D","navigator","permissions","query","permissionStatus","onchange","DEFAULT","GRANTED","setDomElementVisibility_","E","domElement","isVisible","classList","remove","invisibilityCssClassName","add","AmpWebPushPermissionDialog","requestPermission","run","allSections","showTargetPermissionSection_","querySelectorAll","section","CSS","preloadSection","showPostloadSection_","postloadSection","DENIED","close","queryParams","fakeLocation","location","opt_fallback","redirectToUrl","redirectLocation","parsedUrl","getMode","opt_win","win","hashQuery","searchQuery","k","localDev","IS_DEV","development","examiner","esm","geoOverride","minified","IS_MINIFIED","lite","test","log","version","_ampWebPushPermissionDialog"],"sources":["src/url-try-decode-uri-component.js","src/url-parse-query-string.js","src/mode.js","src/config.js","src/log.js","src/utils/lru-cache.js","src/utils/object.js","src/url.js","build/all/amp-web-push-0.1/window-messenger.js","build/all/amp-web-push-0.1/vars.js","src/event-helper.js","build/all/amp-web-push-0.1/amp-web-push-permission-dialog.js","src/css.js"],"file":"amp-web-push-permission-dialog.mjs","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}