(self.AMP=self.AMP||[]).push({n:"amp-gwd-animation",v:"2007102309000",f:(function(AMP,_){
var h,k="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function p(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object");})()}p(this);"function"===typeof Symbol&&Symbol("x");var q;
if("function"==typeof Object.setPrototypeOf)q=Object.setPrototypeOf;else{var r;a:{var aa={a:!0},t={};try{t.__proto__=aa;r=t.a;break a}catch(a){}r=!1}q=r?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var u=q;function v(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var ba=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function ca(a){return a?Array.prototype.slice.call(a):[]};var w=self.AMP_CONFIG||{},da=("string"==typeof w.cdnProxyRegex?new RegExp(w.cdnProxyRegex):w.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function x(a){if(self.document&&self.document.head&&(!self.location||!da.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}w.cdnUrl||x("runtime-host");w.geoApiUrl||x("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var y=self.__AMP_LOG;function z(){if(!y.user)throw Error("failed to call initLogConstructor");return y.user}function ea(){}function A(a,b){return z().assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var B=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function C(a,b,c,d,e){return e?e:b?"\ufffd":d?a.slice(0,-1)+"\\"+a.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+a};var D;var E=Object.prototype.hasOwnProperty;function fa(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else var f=d.setInterval(function(){b(a)&&(d.clearInterval(f),c())},5)}};function F(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var e=a.AMP_CONFIG["allow-doc-opt-in"],f=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');
if(f){var l=f.getAttribute("content").split(",");for(c=0;c<l.length;c++)-1!=e.indexOf(l[c])&&(b[l[c]]=!0)}}Object.assign(b,ha(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];var g=a.location.originalHash||a.location.hash;a=Object.create(null);if(g)for(var m;m=ba.exec(g);){var n=v(m[1],m[1]);m=m[2]?v(m[2].replace(/\+/g," "),m[2]):"";a[n]=m}for(g=0;g<c.length;g++)n=a["e-"+c[g]],"1"==n&&(b[c[g]]=!0),"0"==
n&&(b[c[g]]=!1)}return b}function ha(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){if(y.dev)a=y.dev;else throw Error("failed to call initLogConstructor");a.warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};var G=[{experimentId:"ampdoc-fie",isTrafficEligible:function(){return!0},branches:["21065001","21065002"]}];
function H(a){if(!F(a)["ampdoc-fie"])return!1;a.__AMP_EXPERIMENT_BRANCHES=a.__AMP_EXPERIMENT_BRANCHES||{};for(var b=0;b<G.length;b++){var c=G[b],d=c.experimentId;E.call(a.__AMP_EXPERIMENT_BRANCHES,d)||(c.isTrafficEligible&&c.isTrafficEligible(a)?!a.__AMP_EXPERIMENT_BRANCHES[d]&&F(a)[d]&&(c=c.branches,a.__AMP_EXPERIMENT_BRANCHES[d]=c[Math.floor(Math.random()*c.length)]||null):a.__AMP_EXPERIMENT_BRANCHES[d]=null)}return"21065002"===(a.__AMP_EXPERIMENT_BRANCHES?a.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:
null)};function I(a,b){var c=a.ownerDocument.defaultView,d=J(c),e=c!=d,f=H(d);e&&!f?b=K(c,b)?L(c,b):null:(a=M(a),a=N(a),b=K(a,b)?L(a,b):null);return b}function ia(a,b){var c=J(a);ea(!K(a,"gwd"));if(H(c)){var d=M(a.document);O(N(d),d,function(){return b},!0)}else O(a,a,function(){return b}),L(a,"gwd")}function J(a){return a.__AMP_TOP||(a.__AMP_TOP=a)}function M(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=J(b);a=L(b,"ampdoc").getAmpDoc(a)}return a}
function N(a){a=M(a);return a.isSingleDoc()?a.win:a}function L(a,b){K(a,b);a=P(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function O(a,b,c,d){var e=P(a),f=e.gwd;f||(f=e.gwd={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});if(d||!f.ctor&&!f.obj)f.ctor=c,f.context=b,f.resolve&&L(a,"gwd")}function P(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}
function K(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)};function Q(a){return"loading"!=a.readyState&&"uninitialized"!=a.readyState}function ja(a,b){var c=Q(a);if(c)b(a);else{var d=function(){Q(a)&&(c||(c=!0,b(a)),a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}}function ka(a){return new Promise(function(b){ja(a,b)})};var R=["animationend","webkitAnimationEnd"];function S(a,b){var c=this;this.D=a;this.j=b||a.win;this.c=this.j.document;this.l=this.B.bind(this);(b?ka(this.c):a.whenReady()).then(function(){var a=c.c.body;fa(a,function(){return!!a.querySelector("."+"gwd-page-wrapper".replace(B,C))},c.A.bind(c))})}S.installInEmbedWindow=function(a,b){ia(a,new S(b,a))};h=S.prototype;h.A=function(){for(var a=0;a<R.length;a++)this.c.body.addEventListener(R[a],this.l,!0);this.setCurrentPage(0)};
h.setEnabled=function(a){this.c.body.classList.toggle("i-amphtml-gwd-animation-disabled",!a)};
h.setCurrentPage=function(a){var b=this.c.body.querySelectorAll("."+"gwd-page-wrapper".replace(B,C));if(0==b.length)z().warn("GWD","Could not set current page. No pages were found in the document.");else{var c="."+"gwd-page-wrapper".replace(B,C)+"."+"gwd-play-animation".replace(B,C);var d=this.c.body;if(void 0!==D)var e=D;else{try{var f=d.ownerDocument,l=f.createElement("div"),g=f.createElement("div");l.appendChild(g);e=l.querySelector(":scope div")===g}catch(na){e=!1}e=D=e}e?d=d.querySelector(c.replace(/^|,/g,
"$&:scope ")):(d.classList.add("i-amphtml-scoped"),e=c.replace(/^|,/g,"$&.i-amphtml-scoped "),e=d.querySelectorAll(e),d.classList.remove("i-amphtml-scoped"),d=void 0===e[0]?null:e[0]);var m=d;m&&la(m);var n=b[a];n?n.classList.add("gwd-play-animation"):z().error("GWD","Could not find page with index "+a+".")}};
function la(a){a.classList.remove("gwd-play-animation");[a].concat(ca(a.querySelectorAll("*"))).forEach(function(a){a.classList.remove("gwd-pause-animation");if(a.hasAttribute("data-gwd-label-animation")){var b=a.getAttribute("data-gwd-label-animation");a.classList.remove(b);a.removeAttribute("data-gwd-label-animation")}delete a.__AMP_GWD_GOTO_COUNTERS__})}h.play=function(a){(a=this.getReceiver(a))&&a.classList.remove("gwd-pause-animation")};h.pause=function(a){(a=this.getReceiver(a))&&a.classList.add("gwd-pause-animation")};
h.togglePlay=function(a){(a=this.getReceiver(a))&&a.classList.toggle("gwd-pause-animation")};h.gotoAndPlay=function(a,b){(a=this.getReceiver(a))&&T(a,b)};h.gotoAndPause=function(a,b){var c=this,d=this.getReceiver(a);d&&(T(d,b),this.j.setTimeout(function(){c.pause(a)},40))};
h.gotoAndPlayNTimes=function(a,b,c,d){if(0>=c)z().error("GWD","Invalid maxCount parameter: "+c);else if(d){if(a=this.getReceiver(a)){var e=d+"_"+b,f=a.__AMP_GWD_GOTO_COUNTERS__&&E.call(a.__AMP_GWD_GOTO_COUNTERS__,e)?a.__AMP_GWD_GOTO_COUNTERS__[e]:0;f<c&&(T(a,b),a.__AMP_GWD_GOTO_COUNTERS__||(a.__AMP_GWD_GOTO_COUNTERS__={}),E.call(a.__AMP_GWD_GOTO_COUNTERS__,e)||(a.__AMP_GWD_GOTO_COUNTERS__[e]=0),a.__AMP_GWD_GOTO_COUNTERS__[e]=f+1)}}else z().error("GWD","Event name required but not specified.")};
h.getReceiver=function(a){if("document.body"==a)return this.c.body;var b=this.c.getElementById(a);if(b&&b.classList)return b;z().error("GWD","Could not get receiver with id "+a+".");return null};
function T(a,b){a.classList.remove("gwd-pause-animation");var c=a.getAttribute("data-gwd-label-animation");c&&(a.classList.remove(c),a.removeAttribute("data-gwd-label-animation"));c==b&&(self.__AMP_GWD_TEMP=a.offsetWidth,delete self.__AMP_GWD_TEMP);a.classList.add(b);a.setAttribute("data-gwd-label-animation",b)}
h.B=function(a){var b=a.target.getAttribute("data-event-name");if(b){a={eventName:b,sourceEvent:a};var c=this.j,d={detail:a};Object.assign(d,void 0);"function"==typeof c.CustomEvent?a=new c.CustomEvent("gwd.timelineEvent",d):(c=c.document.createEvent("CustomEvent"),c.initCustomEvent("gwd.timelineEvent",!!d.bubbles,!!d.cancelable,a),a=c);this.c.dispatchEvent(a)}};h.dispose=function(){for(var a=0;a<R.length;a++)this.c.body.removeEventListener(R[a],this.l,!0)};var U={play:["args.id"],pause:["args.id"],togglePlay:["args.id"],gotoAndPlay:["args.id","args.label"],gotoAndPause:["args.id","args.label"],gotoAndPlayNTimes:["args.id","args.label","args.N","event.detail.eventName"],setCurrentPage:["args.index"]};function V(a){a=AMP.BaseElement.call(this,a)||this;a.o="";a.h=null;a.m=a.C.bind(a);return a}var W=AMP.BaseElement;V.prototype=k(W.prototype);V.prototype.constructor=V;
if(u)u(V,W);else for(var X in W)if("prototype"!=X)if(Object.defineProperties){var Y=Object.getOwnPropertyDescriptor(W,X);Y&&Object.defineProperty(V,X,Y)}else V[X]=W[X];V.F=W.prototype;
V.prototype.buildCallback=function(){this.o=this.element.getAttribute("timeline-event-prefix")||"";a:{var a=this.element,b=this.getAmpDoc().win;a=(a.ownerDocument||a).defaultView;b=b||J(a);if(a&&a!=b&&J(a)==b)try{var c=a.frameElement;break a}catch(l){}c=null}c&&(this.h=c.__AMP_EMBED__);Z(this).addEventListener("gwd.timelineEvent",this.m,!0);var d=Z(this).getElementById("pagedeck");if(d){A(this.element.id,"The amp-gwd-animation element must have an id.");c=this.element;b=this.element.id+".setCurrentPage(index=event.index)";
a=d.getAttribute("on")||"";var e=a.indexOf("slideChange:");-1!=e?(e+=12,a=a.substr(0,e)+b+","+a.substr(e)):(a&&(a+=";"),a+="slideChange:"+b);I(c,"action").setActions(d,a)}c=this.w.bind(this);for(var f in U)this.registerAction(f,c)};function Z(a){return a.h?a.h.win.document:a.getAmpDoc().getRootNode()}V.prototype.w=function(a){var b="setCurrentPage"==a.method?(b=Z(this).getElementById("pagedeck"))&&a.source==b:!0;b&&ma(this,a)};
function ma(a,b){a=A(I(a.element,"gwd"),"Cannot execute action because the GWD service is not registered.");var c=U[b.method].map(function(a){for(var c=a.split("."),d=b,l=0;l<c.length;l++){var g=c[l];if(g&&d&&void 0!==d[g])d=d[g];else{d=void 0;break}}return d});a[b.method].apply(a,c)}V.prototype.C=function(a){I(this.element,"action").trigger(this.element,""+this.o+a.detail.eventName,a,3)};V.prototype.detachedCallback=function(){Z(this).removeEventListener("gwd.timelineEvent",this.m,!0);return!0};
(function(a){a.registerServiceForDoc("gwd",S);a.registerElement("amp-gwd-animation",V,".i-amphtml-gwd-animation-disabled [class*=-animation],.i-amphtml-gwd-animation-disabled [class*=gwdanimation]{animation:none!important}\n/*# sourceURL=/extensions/amp-gwd-animation/0.1/amp-gwd-animation.css*/")})(self.AMP);
})});

//# sourceMappingURL=amp-gwd-animation-0.1.js.map
