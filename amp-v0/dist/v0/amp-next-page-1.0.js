(self.AMP=self.AMP||[]).push({n:"amp-next-page",v:"2008290323002",f:(function(AMP,_){
'use strict';var k,aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function ba(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}return function(){throw Error("Cannot find global object");}()}var n=ba(this);"function"===typeof Symbol&&Symbol("x");var p;
if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var q;a:{var ca={a:!0},da={};try{da.__proto__=ca;q=da.a;break a}catch(a){}q=!1}p=q?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ea=p;
function r(a,b){a.prototype=aa(b.prototype);a.prototype.constructor=a;if(ea)ea(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Wa=b.prototype};function fa(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var ha=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function ia(a){var b=Object.create(null);if(!a)return b;for(var c;c=ha.exec(a);){var d=fa(c[1],c[1]),e=c[2]?fa(c[2].replace(/\+/g," "),c[2]):"";b[d]=e}return b};var ja="";
function ka(){var a=self;if(a.__AMP_MODE)var b=a.__AMP_MODE;else{b=ia(a.location.originalHash||a.location.hash);var c=ia(a.location.search);ja||(ja=a.AMP_CONFIG&&a.AMP_CONFIG.v?a.AMP_CONFIG.v:"012008290323002");b={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(b.development)||a.AMP_DEV_MODE),examiner:"2"==b.development,esm:!1,geoOverride:b["amp-geo"],minified:!0,lite:void 0!=c.amp_lite,test:!1,log:b.log,version:"2008290323002",rtvVersion:ja};b=a.__AMP_MODE=b}return b}
;var la=Object.prototype.toString;function t(a){return a?Array.prototype.slice.call(a):[]};var u=self.AMP_CONFIG||{},ma=("string"==typeof u.cdnProxyRegex?new RegExp(u.cdnProxyRegex):u.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function na(a){if(!self.document||!self.document.head||self.location&&ma.test(self.location.origin))return null;var b=self.document.head.querySelector('meta[name="'+a+'"]');return b&&b.getAttribute("content")||null}
var oa={thirdParty:u.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:u.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof u.thirdPartyFrameRegex?new RegExp(u.thirdPartyFrameRegex):u.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:u.cdnUrl||na("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:ma,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:u.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:u.betaErrorReportingUrl||
"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:u.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:u.geoApiUrl||na("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var v=self.__AMP_LOG;function x(){if(!v.user)throw Error("failed to call initLogConstructor");return v.user}function y(){if(v.dev)return v.dev;throw Error("failed to call initLogConstructor");}function z(a,b,c,d,e){x().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)};var A;function pa(a){var b=a.ownerDocument||a;A&&A.ownerDocument===b||(A=b.createElement("div"));return qa}function qa(a){var b=A;b.innerHTML=a[0];a=b.firstElementChild;b.removeChild(a);return a}function ra(a){var b=a.querySelectorAll("[ref]"),c=Object.create(null);for(a=0;a<b.length;a++){var d=b[a],e=d.getAttribute("ref");d.removeAttribute("ref");c[e]=d}return c};function B(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)};var C,sa="Webkit webkit Moz moz ms O o".split(" ");function D(a,b,c){var d=a.style;if(!B(b,"--")){C||(C=Object.create(null));var e=C[b];if(!e){e=b;if(void 0===d[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);b:{for(var h=0;h<sa.length;h++){var g=sa[h]+f;if(void 0!==d[g]){f=g;break b}}f=""}void 0!==d[f]&&(e=f)}C[b]=e}b=e}b&&(B(b,"--")?a.style.setProperty(b,c):a.style[b]=c)}function ta(a,b){void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")};var ua;function E(){return ua?ua:ua=Promise.resolve(void 0)};function va(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function F(){this.Pa=100;this.ea=this.pa=0;this.X=Object.create(null)}F.prototype.has=function(a){return!!this.X[a]};F.prototype.get=function(a){var b=this.X[a];if(b)return b.access=++this.ea,b.payload};F.prototype.put=function(a,b){this.has(a)||this.pa++;this.X[a]={payload:b,access:this.ea};if(!(this.pa<=this.Pa)){y().warn("lru-cache","Trimming LRU cache");a=this.X;var c=this.ea+1,d;for(d in a){var e=a[d].access;if(e<c){c=e;var f=d}}void 0!==f&&(delete a[f],this.pa--)}};var ya;ya={c:!0,v:!0,a:!0,ad:!0};var za,Aa,Ba=/[?&]amp_js[^&]*/,Ca=/[?&]amp_gsa[^&]*/,Da=/[?&]amp_r[^&]*/,Ea=/[?&]amp_kit[^&]*/,Fa=/[?&]usqp[^&]*/;
function G(a){za||(za=self.document.createElement("a"),Aa=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new F));var b=Aa,c=za;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=
c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}
function Ga(a,b){var c=void 0===c?"source":c;z(null!=a,"%s %s must be available",b,c);var d=a;"string"==typeof d&&(d=G(d));var e;(e="https:"==d.protocol||"localhost"==d.hostname||"127.0.0.1"==d.hostname)||(d=d.hostname,e=d.length-10,e=0<=e&&d.indexOf(".localhost",e)==e);z(e||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,c,a)}
function Ha(a){"string"==typeof a&&(a=G(a));var b=a;"string"==typeof b&&(b=G(b));if(!oa.cdnProxyRegex.test(b.origin))return a.href;b=a.pathname.split("/");z(ya[b[1]],"Unknown path prefix in url %s",a.href);var c=b[2],d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);z(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(Ba,"").replace(Ca,"").replace(Da,"").replace(Ea,"").replace(Fa,"").replace(/^[?&]/,
""))?"?"+d:"":"";return b+d+(a.hash||"")};function Ia(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){y().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};function Ja(a,b){var c=a.ownerDocument.defaultView,d=c.__AMP_TOP||(c.__AMP_TOP=c),e=c!=d;if(d.__AMP__EXPERIMENT_TOGGLES)var f=d.__AMP__EXPERIMENT_TOGGLES;else{d.__AMP__EXPERIMENT_TOGGLES=Object.create(null);f=d.__AMP__EXPERIMENT_TOGGLES;if(d.AMP_CONFIG)for(var h in d.AMP_CONFIG){var g=d.AMP_CONFIG[h];"number"===typeof g&&0<=g&&1>=g&&(f[h]=Math.random()<g)}if(d.AMP_CONFIG&&Array.isArray(d.AMP_CONFIG["allow-doc-opt-in"])&&0<d.AMP_CONFIG["allow-doc-opt-in"].length&&(h=d.AMP_CONFIG["allow-doc-opt-in"],
g=d.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){g=g.getAttribute("content").split(",");for(var m=0;m<g.length;m++)-1!=h.indexOf(g[m])&&(f[g[m]]=!0)}Object.assign(f,Ia(d));if(d.AMP_CONFIG&&Array.isArray(d.AMP_CONFIG["allow-url-opt-in"])&&0<d.AMP_CONFIG["allow-url-opt-in"].length)for(h=d.AMP_CONFIG["allow-url-opt-in"],d=ia(d.location.originalHash||d.location.hash),g=0;g<h.length;g++)m=d["e-"+h[g]],"1"==m&&(f[h[g]]=!0),"0"==m&&(f[h[g]]=!1)}var l=!!f["ampdoc-fie"];e&&!l?b=Ka(c,
b)?H(c,b):null:(a=I(a),a=K(a),b=Ka(a,b)?H(a,b):null);return b}function L(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return H(a,b)}function M(a,b){var c=I(a);c=K(c);return H(c,b)}function La(a,b){return Ma(K(a),b)}function I(a){return a.nodeType?L((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function K(a){a=I(a);return a.isSingleDoc()?a.win:a}function H(a,b){Ka(a,b);a=N(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}
function Na(a,b){var c=Ma(a,b);if(c)return c;a=N(a);a[b]=Oa();return a[b].promise}function Ma(a,b){var c=N(a)[b];if(c){if(c.promise)return c.promise;H(a,b);return c.promise=Promise.resolve(c.obj)}return null}function N(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}
function Pa(a){a=N(a);var b={},c;for(c in a){b.H=c;if(Object.prototype.hasOwnProperty.call(a,b.H)){var d=a[b.H];d.obj?Qa(b.H,d.obj):d.promise&&d.promise.then(function(a){return function(b){return Qa(a.H,b)}}(b))}b={H:b.H}}}function Qa(a,b){if("function"==typeof b.dispose)try{b.dispose()}catch(c){y().error("SERVICE","failed to dispose service",a,c)}}function Ka(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}
function Oa(){var a=new va,b=a.promise,c=a.resolve;a=a.reject;b.catch(function(){});return{obj:null,promise:b,resolve:c,reject:a,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var O=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function P(a,b,c,d,e){return e?e:b?"\ufffd":d?a.slice(0,-1)+"\\"+a.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+a};var Q;function Ra(a){try{var b=a.ownerDocument,c=b.createElement("div"),d=b.createElement("div");c.appendChild(d);return c.querySelector(":scope div")===d}catch(e){return!1}};function Sa(a,b,c){if(b(a))c();else{var d=a.ownerDocument.defaultView;if(d.MutationObserver){var e=new d.MutationObserver(function(){b(a)&&(e.disconnect(),c())});e.observe(a,{childList:!0})}else var f=d.setInterval(function(){b(a)&&(d.clearInterval(f),c())},5)}}function Ta(a,b){Sa(a.documentElement,function(){return!!a.body},b)}function Ua(a){return new Promise(function(b){return Ta(a,b)})}function R(a){a.parentElement&&a.parentElement.removeChild(a)}
function Va(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Wa(a,b){a.insertBefore(b,a.firstChild)}function Xa(a,b){/^[\w-]+$/.test(b);return S(a,"> ["+b+"]")}function Ya(a,b){/^[\w-]+$/.test(b);b="> "+b;return(void 0!==Q?Q:Q=Ra(a))?a.querySelectorAll(b.replace(/^|,/g,"$&:scope ")):Za(a,b)}function Za(a,b){a.classList.add("i-amphtml-scoped");var c=b.replace(/^|,/g,"$&.i-amphtml-scoped ");b=a.querySelectorAll(c);a.classList.remove("i-amphtml-scoped");return b}
function S(a,b){if(void 0!==Q?Q:Q=Ra(a))return a.querySelector(b.replace(/^|,/g,"$&:scope "));var c=Za(a,b);return void 0===c[0]?null:c[0]}function $a(a,b){for(var c=a.length,d=0;d<c;d++)b(a[d],d)}function ab(a){return"SCRIPT"==a.tagName&&a.hasAttribute("type")&&"APPLICATION/JSON"==a.getAttribute("type").toUpperCase()};function bb(a,b,c){var d=La(a,b);if(d)return d;var e=I(a);return e.waitForBodyOpen().then(function(){return cb(e.win,c,e.win.document.head)}).then(function(){var d=e.win;return d.__AMP_EXTENDED_ELEMENTS&&d.__AMP_EXTENDED_ELEMENTS[c]?Na(K(a),b):null})}function db(a){var b=Ja(a,"bind");if(b)return Promise.resolve(b);b=a.ownerDocument.defaultView;var c=b.__AMP_TOP||(b.__AMP_TOP=b);return b!==c?eb(b):bb(a,"bind","amp-bind")}
function cb(a,b,c){if(c){var d={};c=c.querySelectorAll("script[custom-element],script[custom-template]");for(var e=0;e<c.length;e++){var f=c[e];f=f.getAttribute("custom-element")||f.getAttribute("custom-template");d[f]=!0}d=Object.keys(d)}else d=[];return d.includes(b)?L(a,"extensions").waitForExtension(a,b):E()}
function eb(a){return Ua(a.document).then(function(){return cb(a,"amp-bind",a.document.head)}).then(function(){return a.__AMP_EXTENDED_ELEMENTS&&a.__AMP_EXTENDED_ELEMENTS["amp-bind"]?Na(a,"bind"):null})};function T(a){return M(a,"viewport")};function fb(a,b){return{left:0,top:0,width:a,height:b,bottom:0+b,right:0+a,x:0,y:0}}function gb(a,b){return a&&b?a.left==b.left&&a.top==b.top&&a.width==b.width&&a.height==b.height:!1};function hb(a,b,c,d){this.element=b;this.wa=d;this.fidelity=c;this.turn=0==c?Math.floor(4*Math.random()):0;this.Z=null;this.l=T(a)}
hb.prototype.update=function(a){var b=this;if(!a){if(0!=this.turn){this.turn--;return}0==this.fidelity&&(this.turn=4)}var c=this.l.getSize(),d=fb(c.width,c.height);this.l.getClientRectAsync(this.element).then(function(a){var c={positionRect:a,viewportRect:d,relativePos:null},e=b.Z;if(!(e&&gb(e.positionRect,c.positionRect)&&gb(e.viewportRect,c.viewportRect))){e=c.positionRect;var g=c.viewportRect;c.relativePos=e.top<g.top?"top":e.bottom>g.bottom?"bottom":"inside";g=c.viewportRect;e.top<=g.bottom&&
g.top<=e.bottom&&e.left<=g.right&&g.left<=e.right?(b.Z=c,b.wa(c)):b.Z&&(b.Z=null,c.positionRect=null,b.wa(c))}})};function ib(a,b){function c(c){f=null;e=a.setTimeout(d,200);b.apply(null,c)}function d(){e=0;f&&c(f)}var e=0,f=null;return function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];e?f=b:c(b)}}function jb(a,b){function c(){d=0;var h=500-(a.Date.now()-e);if(0<h)d=a.setTimeout(c,h);else{var g=f;f=null;b.apply(null,g)}}var d=0,e=0,f=null;return function(b){for(var g=[],h=0;h<arguments.length;++h)g[h-0]=arguments[h];e=a.Date.now();f=g;d||(d=a.setTimeout(c,500))}};function U(a){var b=this;this.o=a;this.D=a.win;this.B=[];this.W=L(this.D,"vsync");this.l=T(a);this.da=[];this.fa=this.ma=this.ka=!1;this.Oa=jb(this.D,function(){b.ka=!1})}U.prototype.observe=function(a,b,c){var d=this,e=new hb(this.o,a,b,c);this.B.push(e);this.fa||kb(this);e.update();return function(){for(var a=0;a<d.B.length;a++)if(d.B[a]==e){d.B.splice(a,1);0==d.B.length&&lb(d);break}}};
U.prototype.unobserve=function(a){for(var b=0;b<this.B.length;b++)if(this.B[b].element==a){this.B.splice(b,1);0==this.B.length&&lb(this);return}y().error("POSITION_OBSERVER","cannot unobserve unobserved element")};function kb(a){a.fa=!0;a.da.push(a.l.onScroll(function(){a.Oa();a.ka=!0;a.ma||mb(a)}));a.da.push(a.l.onResize(function(){a.updateAllEntries(!0)}))}function lb(a){for(a.fa=!1;a.da.length;)a.da.pop()()}U.prototype.updateAllEntries=function(a){for(var b=0;b<this.B.length;b++)this.B[b].update(a)};
function mb(a){a.updateAllEntries();a.ma=!0;a.ka?a.W.measure(function(){mb(a)}):a.ma=!1};function V(a,b){this.Y=a;this.ra=this.Ia=null;this.callback=b}
V.prototype.observe=function(a,b){var c=this,d=a.ownerDocument.createElement("div");d.classList.add("i-amphtml-next-page-document-top-sentinel");var e=a.ownerDocument.createElement("div");e.classList.add("i-amphtml-next-page-document-bottom-sentinel");b.insertBefore(d,a);b.insertBefore(e,a.nextSibling);this.Y.getPositionObserver().observe(d,0,function(a){c.Ia=a.relativePos;c.Y.updateRelativePos(c)});this.Y.getPositionObserver().observe(e,0,function(a){c.ra=a.relativePos;c.Y.updateRelativePos(c)})};
V.prototype.usesSentinel=function(){return!0};n.Object.defineProperties(V.prototype,{top:{configurable:!0,enumerable:!0,get:function(){return this.Ia}},bottom:{configurable:!0,enumerable:!0,get:function(){return this.ra}}});function W(a,b,c){V.call(this,a,b);this.Ua=c}r(W,V);W.prototype.usesSentinel=function(){return!1};n.Object.defineProperties(W.prototype,{nextPageEl:{configurable:!0,enumerable:!0,get:function(){return this.Ua}}});
function nb(a){this.o=a;this.ga=[];this.la=0;this.ba=-1;this.za=null;this.l=T(a);this.La=0;this.na=!1;this.G=M(a,"mutator");var b=ib(a.win,this.Ja.bind(this));this.l.onScroll(b.bind(this));this.l.onResize(b.bind(this));this.Ja()}k=nb.prototype;
k.Ja=function(){var a=this;this.na||(this.na=!0,this.G.measureElement(function(){a.La=a.l.getHeight();var b=a.l.getScrollTop(),c=b-a.la;if(!(20>Math.abs(c))){var d=0<c?-1:1;a.ga.forEach(function(b){b.usesSentinel()&&a.za===d||a.updateRelativePos(b)});a.la=b;a.za=a.ba;a.ba=d}}).then(function(){a.na=!1}))};k.isScrollingUp=function(){return 1===this.ba};k.isScrollingDown=function(){return-1===this.ba};k.observe=function(a,b,c){c=new V(this,c);this.ga.push(c);c.observe(a,b)};
k.observeHost=function(a,b){a=new W(this,b,a);this.ga.push(a)};k.getPositionObserver=function(){var a=I(this.o),b=K(a),c=N(b),d=c["position-observer"];d||(d=c["position-observer"]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null});d.ctor||d.obj||(d.ctor=U,d.context=a,d.resolve&&H(b,"position-observer"));return M(this.o.getHeadNode(),"position-observer")};
k.updateRelativePos=function(a){var b=a.usesSentinel()?this.getRelativePosFromSentinel(a):this.getRelativePosFromScroll(a);b&&a.callback(b)};k.getRelativePosFromScroll=function(a){var b=this.La,c=this.la;a=a.nextPageEl.getLayoutBox().top;return c<a-b?5:c<a&&a<=b&&0>=c?1:c<a?this.isScrollingDown()?3:4:2};
k.getRelativePosFromSentinel=function(a){var b=a.top;a=a.bottom;if(!b&&!a)return null;if("inside"===b&&"inside"===a)return 1;if(!(b&&"top"!==b||a&&"bottom"!==a))return 5;if((!b||"top"===b)&&"top"===a||"bottom"===b&&(!a||"bottom"===a))return 2;var c=("top"===b||"inside"===b)&&(!a||"bottom"===a),d=this.isScrollingUp();return!!c===!!d?3:4};n.Object.defineProperties(nb.prototype,{mutator:{configurable:!0,enumerable:!0,get:function(){return this.G}}});function X(a,b){this.N=a;this.Va=b.title;this.Sa=this.Ka=b.url;this.Ra=b.image;this.ta=this.sa=this.A=null;this.m=1;this.V="prerender";this.Ga=2}k=X.prototype;k.is=function(a){return this.m===a};k.isLoaded=function(){return 3===this.m||5===this.m||6===this.m};k.isVisible=function(){return this.isLoaded()&&"visible"===this.V};
k.setVisibility=function(a){this.isLoaded()&&a!=this.V&&(this.is(6)&&"visible"===a&&this.resume(),this.V=a,this.A&&(this.A.setVisibilityState(a),this.A.ampdoc.getBody().classList.toggle("amp-next-page-visible",this.isVisible()),this.A.ampdoc.getBody().classList.toggle("amp-next-page-hidden",!this.isVisible())))};k.pause=function(){var a=this;return this.A?this.A.close().then(function(){return a.N.closeDocument(a).then(function(){a.A=null;a.V="hidden";a.m=6})}):E()};k.resume=function(){return ob(this)};
k.fetch=function(){var a=this;if(5===this.m||2===this.m||3===this.m||4===this.m)return E();this.m=2;return this.N.fetchPageDocument(this).then(function(b){a.m=3;a.ta=b;a.sa=a.N.createDocumentContainerForPage(a);return ob(a)}).catch(function(){a.m=4})};function ob(a){return a.N.attachDocumentToPage(a,a.ta,a.is(6)).then(function(b){b?(a.m=5,a.A=b,a.is(6)||a.N.setLastFetchedPage(a)):a.m=4})}
n.Object.defineProperties(X.prototype,{url:{configurable:!0,enumerable:!0,get:function(){return this.Ka},set:function(a){this.Ka=a}},initialUrl:{configurable:!0,enumerable:!0,get:function(){return this.Sa}},image:{configurable:!0,enumerable:!0,get:function(){return this.Ra}},title:{configurable:!0,enumerable:!0,get:function(){return this.Va}},relativePos:{configurable:!0,enumerable:!0,get:function(){return this.Ga},set:function(a){this.Ga=a}},document:{configurable:!0,enumerable:!0,get:function(){if(this.A)return this.A.ampdoc.getRootNode()}},
container:{configurable:!0,enumerable:!0,get:function(){return this.sa}},shadowDoc:{configurable:!0,enumerable:!0,get:function(){return this.A}}});function pb(a,b,c,d,e){X.call(this,a,b);this.m=c;this.V=d;this.Qa=e}r(pb,X);n.Object.defineProperties(pb.prototype,{document:{configurable:!0,enumerable:!0,get:function(){return this.Qa}}});function qb(a){this.J=a.document.implementation.createHTMLDocument("");this.J.open();this.W=L(a,"vsync");this.Na=this.Ta.bind(this);this.R=this.O=this.P=null;this.oa=!1;this.T=E();this.I=!1;this.ca=null}k=qb.prototype;k.onBody=function(a){this.P=a};k.onBodyChunk=function(a){this.O=a};k.onEnd=function(a){this.R=a};k.write=function(a){if(this.I)throw Error("closed already");a&&this.J.write(a);rb(this);return this.T};k.close=function(){this.J.close();this.I=!0;rb(this);return this.T};
k.abort=function(){throw Error("Not implemented");};k.releaseLock=function(){throw Error("Not implemented");};function rb(a){a.oa||(a.oa=!0,a.W.mutate(a.Na))}k.Ta=function(){this.oa=!1;!this.ca&&this.J.body&&(this.ca=this.P(this.J));if(this.ca){var a=this.J.body,b=this.ca,c=0;for(sb(a);a.firstChild;)c++,b.appendChild(a.firstChild);0<c&&this.O()}this.I&&this.R()};
n.Object.defineProperties(qb.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented");}},desiredSize:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented");}},ready:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented");}}});function tb(a){this.va=[];this.W=L(a,"vsync");this.R=this.O=this.P=null;this.T=E();this.I=!1}k=tb.prototype;k.onBody=function(a){this.P=a};k.onBodyChunk=function(a){this.O=a};
k.onEnd=function(a){this.R=a};k.write=function(a){if(this.I)throw Error("closed already");a&&this.va.push(a);return this.T};k.close=function(){var a=this;this.I=!0;this.W.mutate(function(){var b=a.va.join(""),c=(new DOMParser).parseFromString(b,"text/html");if(c.body){b=c.body;c=a.P(c);var d=0;for(sb(b);b.firstChild;)d++,c.appendChild(b.firstChild);0<d&&a.O()}a.R()});return this.T};k.abort=function(){throw Error("Not implemented");};k.releaseLock=function(){throw Error("Not implemented");};
n.Object.defineProperties(tb.prototype,{closed:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented");}},desiredSize:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented");}},ready:{configurable:!0,enumerable:!0,get:function(){throw Error("Not implemented");}}});function sb(a){var b=Ya(a,"noscript");$a(b,function(a){R(a)})};/*

 Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 Use of this source code is governed by a BSD-style
 license that can be found in the LICENSE file or at
 https://developers.google.com/open-source/licenses/bsd */
var xb={strictStyling:!1,scopeRules:function(a,b,c){var d="";a&&Array.prototype.forEach.call(a,function(a){if(a.selectorText&&a.style&&void 0!==a.style.cssText)d+=this.scopeSelector(a.selectorText,b,this.strictStyling,c)+" {\n\t",d+=this.propertiesFromRule(a)+"\n}\n\n";else if(a.type===CSSRule.MEDIA_RULE)d+="@media "+a.media.mediaText+" {\n",d+=this.scopeRules(a.cssRules,b),d+="\n}\n\n";else try{a.cssText&&(d+=a.cssText+"\n\n")}catch(f){a.type===CSSRule.KEYFRAMES_RULE&&a.cssRules&&(d+=this.ieSafeCssTextFromKeyFrameRule(a))}},
this);return d},ieSafeCssTextFromKeyFrameRule:function(a){var b="@keyframes "+a.name+" {";Array.prototype.forEach.call(a.cssRules,function(a){b+=" "+a.keyText+" {"+a.style.cssText+"}"});return b+=" }"},scopeSelector:function(a,b,c,d){var e=[];a.split(",").forEach(function(a){a=a.trim();d&&(a=d(a));this.selectorNeedsScoping(a,b)&&(a=c&&!a.match(ub)?this.applyStrictSelectorScope(a,b):this.applySelectorScope(a,b));e.push(a)},this);return e.join(", ")},selectorNeedsScoping:function(a,b){if(Array.isArray(b))return!0;
var c=this.makeScopeMatcher(b);return!a.match(c)},makeScopeMatcher:function(a){a=a.replace(/\[/g,"\\[").replace(/\]/g,"\\]");return new RegExp("^("+a+")"+vb,"m")},applySelectorScope:function(a,b){return Array.isArray(b)?this.applySelectorScopeList(a,b):this.applySimpleSelectorScope(a,b)},applySelectorScopeList:function(a,b){for(var c=[],d=0,e;e=b[d];d++)c.push(this.applySimpleSelectorScope(a,e));return c.join(", ")},applySimpleSelectorScope:function(a,b){return a.match(wb)?(a=a.replace(ub,b),a.replace(wb,
b+" ")):b+" "+a},applyStrictSelectorScope:function(a,b){b=b.replace(/\[is=([^\]]*)\]/g,"$1");var c=[" ",">","+","~"],d=a,e="["+b+"]";c.forEach(function(a){d=d.split(a).map(function(a){var b=a.trim().replace(wb,"");b&&0>c.indexOf(b)&&0>b.indexOf(e)&&(a=b.replace(/([^:]*)(:*)(.*)/,"$1"+e+"$2$3"));return a}).join(a)});return d},propertiesFromRule:function(a){var b=a.style.cssText;a.style.content&&!a.style.content.match(/['"]+|attr/)&&(b=b.replace(/content:[^;]*;/g,"content: '"+a.style.content+"';"));
a=a.style;for(var c in a)"initial"===a[c]&&(b+=c+": initial; ");return b}},vb="([>\\s~+[.,{:][\\s\\S]*)?$",ub="-shadowcsshost-no-combinator",wb=/-shadowcsshost/gim;var yb,zb;function Ab(){void 0===zb&&(zb="none"!=Bb()&&(Cb(Element.prototype.attachShadow)||Cb(Element.prototype.createShadowRoot)));return zb}function Cb(a){return!!a&&-1!=a.toString().indexOf("[native code]")}function Bb(){if(void 0===yb){var a=Element;yb=a.prototype.attachShadow?"v1":a.prototype.createShadowRoot?"v0":"none"}return yb};function Y(a,b,c,d){var e=a.getHeadNode();var f=(a=e.__AMP_CSS_TR)?a(b):b;a:{var h=c||!1,g=d||null;(b=e.__AMP_CSS_SM)||(b=e.__AMP_CSS_SM=Object.create(null));var m=!h&&g&&"amp-custom"!=g&&"amp-keyframes"!=g;if(a=h?"amp-runtime":m?"amp-extension="+g:null){var l=Db(e,b,a);if(l){l.textContent!==f&&(l.textContent=f);break a}}l=(e.ownerDocument||e).createElement("style");l.textContent=f;f=null;h?l.setAttribute("amp-runtime",""):m?(l.setAttribute("amp-extension",g||""),f=Db(e,b,"amp-runtime")):(g&&l.setAttribute(g,
""),f=e.lastChild);h=f;(h=void 0===h?null:h)?e.insertBefore(l,h.nextSibling):Wa(e,l);a&&(b[a]=l)}}function Db(a,b,c){return b[c]?b[c]:(a=a.querySelector("style["+c+"]"))?b[c]=a:null}function Eb(a,b){a.__AMP_CSS_TR=b};var Fb=/[^\.\-_0-9a-zA-Z]/,Gb=/[^\-_0-9a-zA-Z]/,Hb;
function Ib(a){var b=a.ownerDocument.defaultView,c=a.shadowRoot||a.__AMP_SHADOW_ROOT;if(c)return c.innerHTML="",c;var d=Bb();if("v1"==d){var e=a.attachShadow({mode:"open"});e.styleSheets||Object.defineProperty(e,"styleSheets",{get:function(){var a=[];$a(e.childNodes,function(b){"STYLE"===b.tagName&&a.push(b.sheet)});return a}})}else e="v0"==d?a.createShadowRoot():Jb(a);if(!Ab()){var f="i-amphtml-sd-"+b.Math.floor(1E4*b.Math.random());e.id=f;e.host.classList.add(f);Eb(e,function(a){var b=e,c=b.id;
b=b.ownerDocument;var d=null;try{d=Kb(b.implementation.createHTMLDocument(""),a)}catch(w){}if(!d)try{d=Kb(b,a)}catch(w){}return d?xb.scopeRules.call(xb,d,"."+c,Lb):a})}return e}
function Jb(a){var b=a.ownerDocument;a.classList.add("i-amphtml-shadow-host-polyfill");var c=b.createElement("style");c.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}";a.appendChild(c);var d=b.createElement("i-amphtml-shadow-root");a.appendChild(d);a.__AMP_SHADOW_ROOT=d;Object.defineProperty(a,"shadowRoot",{enumerable:!0,configurable:!0,value:d});d.host=a;d.getElementById=function(a){var b=String(a).replace(O,P);return d.querySelector("#"+b)};Object.defineProperty(d,
"styleSheets",{get:function(){return b.styleSheets?t(b.styleSheets).filter(function(a){return d.contains(a.ownerNode)}):[]}});return d}
function Mb(a,b,c){var d=a.ownerDocument;if(Ab())var e=d.importNode(b,c);else{e=d.createElement("amp-body");e.style.display="block";for(var f=0;f<b.attributes.length;f++)e.setAttribute(b.attributes[0].name,b.attributes[0].value);if(c)for(b=b.firstChild;b;b=b.nextSibling)e.appendChild(d.importNode(b,!0))}D(e,"position","relative");var h=a.body;h&&a.removeChild(h);a.appendChild(e);Object.defineProperty(a,"body",{configurable:!0,value:e});return e}function Lb(a){return a.replace(/(html|body)/g,Nb)}
function Nb(a,b,c,d){var e=d.charAt(c-1),f=d.charAt(c+a.length);return e&&!Fb.test(e)||f&&!Gb.test(f)?a:"amp-"+a}function Kb(a,b){var c=a.createElement("style");c.textContent=b;try{return(a.head||a.documentElement).appendChild(c),c.sheet?c.sheet.cssRules:null}finally{c.parentNode&&c.parentNode.removeChild(c)}}
function Ob(a){void 0===Hb&&(Hb=!a.document.implementation||"function"!=typeof a.document.implementation.createHTMLDocument||L(a,"platform").isFirefox()?!1:!0);return Hb?new qb(a):new tb(a)};function Pb(a,b,c,d){this.win=a;this.Ma=b;this.ha=c;this.qa=d;this.L=[]}
function Qb(a,b,c,d,e){d=d||Object.create(null);Rb(a);D(b,"visibility","hidden");var f=Ib(b);f.AMP&&(x().warn("multidoc-manager","Shadow doc wasn't previously closed"),Sb(a,f));var h={};f.AMP=h;h.url=c;var g=G(c).origin,m=a.Ma.installShadowDoc(c,f,{params:d});h.ampdoc=m;y().fine("multidoc-manager","Attach to shadow root:",f,m);Y(m,AMP.combinedCss,!0);AMP.installAmpdocServices(m);var l=M(m,"viewer");h.setVisibilityState=function(a){m.overrideVisibilityState(a)};h.postMessage=l.receiveMessage.bind(l);
var w;h.onMessage=function(a){w=a};l.setMessageDeliverer(function(b,c,d){if("broadcast"==b)return Tb(a,c,f),d?E():void 0;if(w)return w(b,c,d)},g);h.close=function(){return Sb(a,f)};ka().development&&(h.toggleRuntime=l.toggleRuntime.bind(l),h.resources=M(m,"resources"));h.getState=function(a){return db(f).then(function(b){return b?b.getState(a):Promise.reject("amp-bind is not available in this document")})};h.setState=function(a){return db(f).then(function(b){return b?"string"===typeof a?b.setStateWithExpression(a,
{}):"[object Object]"===la.call(a)||Array.isArray(a)?b.setStateWithObject(a):Promise.reject("Invalid state"):Promise.reject("amp-bind is not available in this document")})};e(h,f,m).then(function(){m.setReady();m.signals().signal("render-start");D(b,"visibility","visible")});a.L.includes(f)||a.L.push(f);y().fine("multidoc-manager","Shadow root initialization is done:",f,m);return h}
Pb.prototype.attachShadowDoc=function(a,b,c,d){var e=this;x().assertString(c);y().fine("multidoc-manager","Attach shadow doc:",b);return Qb(this,a,c,d,function(c,d,g){var f=Ub(e,g,d,b);e.ha.installExtensionsInDoc(g,f);b.body&&(c=Mb(d,b.body,!0),c.classList.add("amp-shadow"),g.setBody(c));setTimeout(function(){g.signals().signal("render-start");D(a,"visibility","visible")},50);return E()})};
Pb.prototype.attachShadowDocAsStream=function(a,b,c){var d=this;x().assertString(b);y().fine("multidoc-manager","Attach shadow doc as stream");return Qb(this,a,b,c,function(b,c,h){var e=!1,f=Ob(d.win);b.writer=f;f.onBody(function(a){var b=Ub(d,h,c,a);d.ha.installExtensionsInDoc(h,b);a=Mb(c,a.body,!1);a.classList.add("amp-shadow");h.setBody(a);return a});f.onBodyChunk(function(){e||(e=!0,setTimeout(function(){h.signals().signal("render-start");D(a,"visibility","visible")},50))});return new Promise(function(a){f.onEnd(function(){a();
b.writer=null})})})};
function Ub(a,b,c,d){var e=[];if(d.head){c.AMP.head=d.head;for(var f={},h=Ya(a.win.document.head,"link"),g=0;g<h.length;g++){var m=h[g].getAttribute("href");m&&(f[m]=!0)}for(d=d.head.firstElementChild;d;d=d.nextElementSibling){g=d.tagName;var l=d.getAttribute("name"),w=d.getAttribute("rel");switch(g){case "TITLE":c.AMP.title=d.textContent;y().fine("multidoc-manager","- set title: ",c.AMP.title);break;case "META":d.hasAttribute("charset")||"viewport"!=l&&(l?b.setMetaByName(l,d.getAttribute("content")||""):
y().warn("multidoc-manager","meta ignored: ",d));break;case "LINK":g=d.getAttribute("href");"canonical"==w?(c.AMP.canonicalUrl=g,y().fine("multidoc-manager","- set canonical: ",c.AMP.canonicalUrl)):"stylesheet"==w?f[g]?(y().fine("multidoc-manager","- stylesheet already included: ",g),Y(b,'@import "'+g+'"',!1)):(f[g]=!0,l=a.win.document.createElement("link"),l.setAttribute("rel","stylesheet"),l.setAttribute("type","text/css"),l.setAttribute("href",g),a.win.document.head.appendChild(l),y().fine("multidoc-manager",
"- import font to parent: ",g,l)):y().fine("multidoc-manager","- ignore link rel=",w);break;case "STYLE":d.hasAttribute("amp-boilerplate")?y().fine("multidoc-manager","- ignore boilerplate style: ",d):d.hasAttribute("amp-custom")?(Y(b,d.textContent,!1,"amp-custom"),y().fine("multidoc-manager","- import style: ",d)):d.hasAttribute("amp-keyframes")&&(Y(b,d.textContent,!1,"amp-keyframes"),y().fine("multidoc-manager","- import style: ",d));break;case "SCRIPT":if(d.hasAttribute("src")){y().fine("multidoc-manager",
"- src script: ",d);g=d.getAttribute("src");l=g.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)$/i);var wa={extensionId:l?l[2]:void 0,extensionVersion:l?l[3]:void 0},ec=!wa.extensionId,J=d.getAttribute("custom-element"),xa=d.getAttribute("custom-template");ec?y().fine("multidoc-manager","- ignore runtime script: ",g):J||xa?(a.ha.installExtensionForDoc(b,J||xa,wa.extensionVersion),y().fine("multidoc-manager","- load extension: ",J||xa," ",wa.extensionVersion),J&&e.push(J)):d.hasAttribute("data-amp-report-test")||
x().error("multidoc-manager","- unknown script: ",d,g)}else-1==(d.getAttribute("type")||"application/javascript").indexOf("javascript")?(c.appendChild(a.win.document.importNode(d,!0)),y().fine("multidoc-manager","- non-src script: ",d)):x().error("multidoc-manager","- unallowed inline javascript: ",d);break;case "NOSCRIPT":break;default:x().error("multidoc-manager","- UNKNOWN head element:",d)}}}return e}
function Tb(a,b,c){Rb(a);a.L.forEach(function(d){if(d!=c){var e=M(d.AMP.ampdoc,"viewer");a.qa.delay(function(){e.receiveMessage("broadcast",b,!1)},0)}})}
function Sb(a,b){Vb(a,b);var c=b.AMP;delete b.AMP;var d=c.ampdoc;d.overrideVisibilityState("inactive");Pa(d);return a.qa.timeoutPromise(15,new a.win.Promise(function(a){La(d,"resources").then(function(b){if(b)b.onNextPass(a);else a()})}),"Timeout reached waiting for visibility state change callback").catch(function(a){x().info("multidoc-manager",a)})}function Vb(a,b){b=a.L.indexOf(b);-1!=b&&a.L.splice(b,1)}function Wb(a,b){a.qa.delay(function(){Sb(a,b)},0)}
function Rb(a){a.L.forEach(function(b){var c;if(!(c=!b.host)){c=b.host;var d=c.isConnected;if(void 0!==d)c=d;else{do{if(Node.prototype.getRootNode)c=c.getRootNode()||c;else for(;c.parentNode&&(!c||"I-AMPHTML-SHADOW-ROOT"!=c.tagName&&(11!=c.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(c)));c=c.parentNode);if(c.host)c=c.host;else break}while(1);c=c.nodeType===Node.DOCUMENT_NODE}c=!c}c&&(x().warn("multidoc-manager","Shadow doc wasn't previously closed"),Vb(a,b),Wb(a,b))})};function Xb(a,b){try{return JSON.parse(a)}catch(c){return b&&b(c),null}};function Yb(a,b,c){c=void 0===c?{}:c;var d=void 0===c.expr?".":c.expr,e=void 0===c.urlReplacement?0:c.urlReplacement,f=void 0===c.refresh?!1:c.refresh,h=void 0===c.xssiPrefix?void 0:c.xssiPrefix;Ga(b.getAttribute("src"),b);var g=L(a.win,"batched-xhr");return Zb(b,e,f).then(function(a){return g.fetchJson(a.xhrUrl,a.fetchOpt)}).then(function(b){return L(a.win,"xhr").xssiJson(b,h)}).then(function(a){if(null==a)throw Error("Response is undefined.");var b=d||".";if("."==b)b=a;else{b=b.split(".");for(var c=
0;c<b.length;c++){var e=b[c];if(e&&a&&void 0!==a[e]&&(null==a||"object"!=typeof a?0:Object.prototype.hasOwnProperty.call(a,e)))a=a[e];else{a=void 0;break}}b=a}return b}).catch(function(a){throw x().createError("failed fetching JSON data",a);})}
function Zb(a,b,c){var d=a.getAttribute("src"),e=Ja(a,"url-replace");return(1<=b?e.expandUrlAsync(d):Promise.resolve(d)).then(function(d){if(1==b){var f=e.collectDisallowedVarsSync(a);if(0<f.length)throw x().createError('URL variable substitutions in CORS fetches from dynamic URLs (e.g. via amp-bind) require opt-in. Please add data-amp-replace="'+(f.join(" ")+'" to the <')+(a.tagName+"> element. See https://bit.ly/amp-var-subs."));}var g={};a.hasAttribute("credentials")&&(g.credentials=a.getAttribute("credentials"));
c&&(g.cache="reload");return{xhrUrl:d,fetchOpt:g}})};function $b(a,b){for(var c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1};function ac(a){var b=a.querySelector('script[type="application/ld+json"]');if(b){var c=Xb(b.textContent);if(c&&c.image){if("string"===typeof c.image)return c.image;if(c.image["@list"]&&"string"===typeof c.image["@list"][0])return c.image["@list"][0];if("string"===typeof c.image.url)return c.image.url;if("string"===typeof c.image[0])return c.image[0]}}};function bc(a,b,c){var d=!1;c=void 0===c?{}:c;d=void 0===d?!0:d;bb(a,"amp-analytics-instrumentation","amp-analytics").then(function(e){e&&e.triggerEventForTarget(a,b,c,d)})};function cc(a,b){a=G(a);var c=G(b).origin,d=G(Ha(b)).origin;z(a.origin===c||a.origin===d,"Invalid page URL supplied to amp-next-page, pages must be from the same origin as the current document");return a}
function dc(a,b){x().assertString(a.url,"page url must be a string");var c=Ha(b),d=G(b).origin,e=a.url;"string"==typeof c&&(c=G(c));if("function"==typeof URL)e=(new URL(e,c.href)).toString();else{"string"==typeof c&&(c=G(c));e=e.replace(/\\/g,"/");var f=G(e);e=B(e.toLowerCase(),f.protocol)?f.href:B(e,"//")?c.protocol+e:B(e,"/")?c.origin+e:c.origin+c.pathname.replace(/\/[^/]*$/,"/")+e}a.url=e;e=cc(a.url,b);x().assertString(a.image,"page image must be a string");x().assertString(a.title,"page title must be a string");
b=G(Ha(b)).origin;b!==d&&e.origin===b&&(a.url=d+"/c/"+("https:"===e.protocol?"s/":"")+encodeURIComponent(e.host)+e.pathname+(e.search||"")+(e.hash||""))};var fc=['<div class=amp-next-page-separator aria-label="Next article separator" tabindex=0></div>'],gc=['<div class=amp-next-page-links aria-label="Read more articles"></div>'],hc=["<a class=amp-next-page-link><img ref=image class=amp-next-page-image> <span ref=title class=amp-next-page-text></span></a>"];function ic(){return E()}
function jc(a){var b=this;this.o=a;this.D=a.win;this.w=this.D.document;this.l=T(a);this.G=M(a,"mutator");this.M=L(this.D,"templates");this.S=this.Ha=null;this.K=ic;this.ia=!1;this.ua=this.C=this.ya=this.Ca=this.ja=this.Ba=this.U=this.j=this.$=null;this.aa={};this.xa=!1;this.Aa=Infinity;this.Fa=this.F=null;this.Ea=new Promise(function(a){b.Fa=a})}k=jc.prototype;k.isBuilt=function(){return!!this.h};
k.build=function(a){function b(){c.K();c.Fa()}var c=this;if(this.isBuilt())return E();this.o.getBody().lastElementChild!==a&&x().warn("amp-next-page","should be the last element in the body of the document, a footer element can be added as a child of <amp-next-page> if it has the `footer` attribute");this.j=a;this.F=this.j.getAttribute("src");this.xa=this.j.hasAttribute("deep-parsing")?"false"!==this.j.getAttribute("deep-parsing"):!this.F;this.Aa=this.j.hasAttribute("max-pages")?parseInt(this.j.getAttribute("max-pages"),
10):Infinity;this.Ha=kc(this,a);this.S=lc(this,a);this.C=this.createHostPage();this.toggleHiddenAndReplaceableElements(this.w);Wa(this.j,this.S);this.ja=M(this.o,"history");this.initializeHistory();this.Ca=M(this.o,"navigation");this.Ba=new Pb(this.D,L(this.D,"ampdoc"),L(this.D,"extensions"),L(this.D,"timer"));this.U=new nb(this.o);this.Ea.then(function(){c.U.observeHost(c.j,function(a){c.C.relativePos=a;c.updateVisibility()})});this.h||(this.h=[this.C],this.setLastFetchedPage(this.C));mc(this).then(function(){return nc(c)}).then(b,
b);this.j.classList.add("i-amphtml-next-page");return this.Ea};function mc(a){return new Promise(function(b){if(0!=a.l.getScrollTop())return b();var c=a.l.onScroll(function(){b();c()})})}
k.maybeFetchNext=function(a){var b=this;a=void 0===a?!1:a;var c=this.h.filter(function(a){return!a.is(1)}).length>this.Aa,d=this.h.some(function(a){return a.is(2)}),e=3<oc(this)&&!a;if(this.ia||d||e||c)return E();var f=this.h.length,h=this.h[this.h.indexOf(this.ya)+1];return h?h.fetch().then(function(){h.is(4)&&b.setLastFetchedPage(h)}).then(function(){return b.K()},function(a){return b.K().then(function(){throw a;})}):pc(this).then(function(a){return qc(b,a)}).then(function(){return b.h.length<=
f?(b.ia=!0,b.K()):b.maybeFetchNext(!0)})};
k.updateVisibility=function(){var a=this;this.h.forEach(function(b,c){2===b.relativePos?b.isVisible()&&b.setVisibility("hidden"):3!==b.relativePos&&(b.isVisible()||b.setVisibility("visible"),rc(a,c),sc(a,c))});this.h.some(function(a){return a.isVisible()})||this.C.setVisibility("visible");this.h.filter(function(a){return a.isVisible()}).forEach(function(b){return a.toggleHiddenAndReplaceableElements(b.document)});var b=$b(this.h,function(a){return a.isVisible()}),c=this.h[b]||null;c&&this.ua!==c&&
this.setTitlePage(c);this.maybeFetchNext()};function rc(a,b){a.U.isScrollingDown()&&a.C.isVisible()&&a.C.setVisibility("hidden");var c=a.U.isScrollingDown()?a.h.slice(1,b).reverse():a.h.slice(b+1);Promise.all(c.filter(function(a){return 2===a.relativePos}).map(function(a,b){a.isVisible()&&a.setVisibility("hidden");if(5<=b)return a.pause()}))}
function sc(a,b){var c=a.h.slice(1).slice(Math.max(0,b-5-1),Math.min(a.h.length,b+5+1)).filter(function(a){return a.is(6)});Promise.all(c.map(function(a){return a.resume()}))}k.setLastFetchedPage=function(a){this.ya=a};k.setTitlePage=function(a){if(a=void 0===a?this.C:a){var b=a,c=b.title;b=b.url;this.w.title=c;this.ja.replace({title:c,url:b});this.ua=a;bc(this.j,"amp-next-page-scroll",{title:c,url:b})}else y().warn("amp-next-page","setTitlePage called before next-page-service is built")};
k.initializeHistory=function(){var a=this.C;this.ja.push(void 0,{title:a.title,url:a.url})};k.createHostPage=function(){var a=this.w,b=a.title;a=a.location.href;var c;(c=ac(this.w))||(c=(c=this.w.querySelector('meta[property="og:image"]'))?c.getAttribute("content"):void 0);c||(c=this.w,c=(c=c.querySelector('link[rel="shortcut icon"]')||c.querySelector('link[rel="icon"]'))?c.getAttribute("href"):void 0);return new pb(this,{url:a,title:b||"",image:c||""},5,"visible",this.w)};
k.createDocumentContainerForPage=function(a){var b=this,c=this.w.createElement("div");c.classList.add("i-amphtml-next-page-document-container");this.j.insertBefore(c,this.S);var d=this.w.createElement("div");d.classList.add("i-amphtml-next-page-shadow-root");c.appendChild(d);this.U.observe(d,c,function(c){a.relativePos=c;b.updateVisibility()});return c};
k.attachDocumentToPage=function(a,b,c){c=void 0===c?!1:c;if(1>oc(this)&&!c)return Promise.resolve(null);c=a.container;var d=S(c,"> ."+"i-amphtml-next-page-shadow-root".replace(O,P));if(!d){a.is(6);var e=S(c,"> ."+"i-amphtml-next-page-placeholder".replace(O,P));d=this.w.createElement("div");d.classList.add("i-amphtml-next-page-shadow-root");c.replaceChild(d,e)}this.sanitizeDoc(b);try{var f=this.Ba.attachShadowDoc(d,b,"",{visibilityState:"prerender"}),h=f.ampdoc;Y(h,'.i-amphtml-next-page-document{overflow:hidden}.i-amphtml-next-page-document:not(.amp-next-page-visible) [i-amphtml-fixedid]{display:none}.i-amphtml-next-page-document.amp-next-page-visible{opacity:1;overflow:visible}.i-amphtml-next-page-document:after,.i-amphtml-next-page-document:before{content:" ";display:table}.i-amphtml-next-page-placeholder{background:#eee}.amp-next-page-separator{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,0.1);margin-top:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,0.1);display:block;overflow:auto;padding:10px 0;text-decoration:none}.amp-next-page-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.amp-next-page-text{position:relative;margin:5px 30px 5px 0;color:#3c4043;font-size:17px}\n/*# sourceURL=/extensions/amp-next-page/1.0/amp-next-page.css*/',
!1,"amp-next-page");h.getBody().classList.add("i-amphtml-next-page-document");var g=this.Ha.cloneNode(!0);Wa(c,g);return tc(this,g,a).then(function(){return f})}catch(m){return y().error("amp-next-page","failed to attach shadow document for page",m),Promise.resolve(null)}};
k.closeDocument=function(a){if(a.is(6))return E();var b=a.container,c=S(b,"> ."+"i-amphtml-next-page-shadow-root".replace(O,P)),d=this.w.createElement("div");d.classList.add("i-amphtml-next-page-placeholder");var e=0,f=0;return this.G.measureMutateElement(c,function(){e=c.offsetHeight;f=c.offsetWidth},function(){var a={height:e+"px",width:f+"px"},g;for(g in a)D(d,g,a[g]);b.replaceChild(d,c)})};
k.sanitizeDoc=function(a){var b=this;t(a.querySelectorAll("amp-next-page")).forEach(function(a){if(b.xa){var c=uc(a);vc(b,c)}R(a)});a.body.classList.add("amp-next-page-hidden");this.toggleHiddenAndReplaceableElements(a,!1)};
k.toggleHiddenAndReplaceableElements=function(a,b){var c=this;b=void 0===b?!0:b;a!==this.C.document&&t(a.querySelectorAll("[next-page-hide]")).forEach(function(a){return ta(a,!1)});b&&t(a.querySelectorAll("*:not(amp-next-page) [next-page-replace]")).forEach(function(a){var b=a.getAttribute("next-page-replace");b||(b=String(Date.now()+Math.floor(100*Math.random())),a.setAttribute("next-page-replace",b));c.aa[b]&&c.aa[b]!==a&&ta(c.aa[b],!1);c.aa[b]=a;ta(a,!0)})};
function oc(a){return Math.round((a.l.getScrollHeight()-a.l.getScrollTop()-a.l.getHeight())/a.l.getHeight())}k.fetchPageDocument=function(a){var b=this;return L(this.D,"xhr").fetch(a.url,{ampCors:!1}).then(function(c){cc(c.url,b.o.getUrl());a.url=c.url;return c.text()}).then(function(a){var c=b.w.implementation.createHTMLDocument("");c.open();c.write(a);c.close();return c}).catch(function(b){x().error("amp-next-page","failed to fetch %s",a.url,b);throw b;})};
function nc(a){var b=uc(a.j);if(b.length)return vc(a,b);z(a.F,"%s should contain a <script> child or a URL specified in [src]","amp-next-page");return pc(a).then(function(b){return 0===b.length?(x().warn("amp-next-page","Could not find recommendations"),E()):vc(a,b)})}
function qc(a,b){if(!b.length||a.ia)return E();b.forEach(function(b){try{dc(b,a.o.getUrl()),a.h.some(function(a){return a.initialUrl==b.url})||a.h.push(new X(a,b))}catch(d){x().error("amp-next-page","Failed to queue page due to error:",d)}});return E()}function vc(a,b){return qc(a,b).then(function(){return a.maybeFetchNext()})}
function uc(a){var b=Ya(a,"SCRIPT");if(!b.length)return[];z(1===b.length,"amp-next-page should contain at most one <script> child");var c=b[0];z(ab(c),'amp-next-page page list should be inside a <script> tag with type="application/json"');a=Xb(c.textContent,function(a){x().error("amp-next-page","failed to parse inline page list",a)});a=x().assertArray(a,"amp-next-page Page list expected an array, found: "+typeof a);R(c);return a}
function pc(a){if(!a.F)return Promise.resolve([]);if(a.$)return a.$;a.$=Yb(a.o,a.j,{urlReplacement:2,xssiPrefix:a.j.getAttribute("xssi-prefix")||void 0}).then(function(b){a.F=b.next||null;a.F&&a.j.setAttribute("src",a.F);return b.pages||[]}).catch(function(b){x().error("amp-next-page","error fetching page list from remote server",b);a.F=null;return[]});return a.$}function kc(a,b){var c=Xa(b,"separator");return c?(R(c),c.hasAttribute("tabindex")||c.setAttribute("tabindex","0"),c):pa(a.j)(fc)}
function tc(a,b,c){return a.M.hasTemplate(b)?a.M.findAndRenderTemplate(b,{title:c.title,url:c.url,image:c.image}).then(function(c){return a.G.mutateElement(b,function(){Va(b);b.appendChild(c)})}):E()}function lc(a,b){var c=Xa(b,"recommendation-box");if(c)return a.K=a.M.hasTemplate(c)?function(){return wc(a)}:ic,c;a.K=function(){return xc(a)};return pa(a.j)(gc)}
function wc(a){var b=a.S;a.M.hasTemplate(b);var c=a.M.maybeFindTemplate(b),d={pages:(a.h||[]).filter(function(a){return!a.isLoaded()&&!a.is(2)}).map(function(a){return{title:a.title,url:a.url,image:a.image}})};return a.M.findAndRenderTemplate(b,d).then(function(d){return a.G.mutateElement(b,function(){Va(b);b.appendChild(c);b.appendChild(d)})})}
function xc(a){var b=a.S,c={pages:(a.h||[]).filter(function(a){return!a.isLoaded()&&!a.is(2)}).map(function(a){return{title:a.title,url:a.url,image:a.image}})},d=pa(a.j),e=c.pages.map(function(b){var c=d(hc),e=ra(c),f=e.title;e.image.src=b.image;f.textContent=b.title;c.href=b.url;c.addEventListener("click",function(c){bc(a.j,"amp-next-page-click",{title:b.title,url:b.url});a.Ca.navigateToAmpUrl(b.url,"content-discovery")&&c.preventDefault()});return c});return a.G.mutateElement(b,function(){Va(b);
e.forEach(function(a){return b.appendChild(a)})})};function Z(a){a=AMP.BaseElement.call(this,a)||this;a.Da=null;return a}r(Z,AMP.BaseElement);Z.prototype.isLayoutSupported=function(a){return"container"===a};Z.prototype.buildCallback=function(){this.Da=M(this.element,"next-page");return this.Da.build(this.element)};(function(a){a.registerServiceForDoc("next-page",jc);a.registerElement("amp-next-page",Z,'.i-amphtml-next-page-document{overflow:hidden}.i-amphtml-next-page-document:not(.amp-next-page-visible) [i-amphtml-fixedid]{display:none}.i-amphtml-next-page-document.amp-next-page-visible{opacity:1;overflow:visible}.i-amphtml-next-page-document:after,.i-amphtml-next-page-document:before{content:" ";display:table}.i-amphtml-next-page-placeholder{background:#eee}.amp-next-page-separator{border-bottom:1px solid rgba(0,0,0,0.12)}.amp-next-page-links{border-top:1px solid rgba(0,0,0,0.1);margin-top:16px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.amp-next-page-link{border-bottom:1px solid rgba(0,0,0,0.1);display:block;overflow:auto;padding:10px 0;text-decoration:none}.amp-next-page-image{width:72px;height:72px;float:left;margin:0 10px;background-size:cover;background-position:50%}.amp-next-page-text{position:relative;margin:5px 30px 5px 0;color:#3c4043;font-size:17px}\n/*# sourceURL=/extensions/amp-next-page/1.0/amp-next-page.css*/')})(self.AMP);
})});

//# sourceMappingURL=amp-next-page-1.0.js.map
