(self.AMP=self.AMP||[]).push({n:"amp-experiment",v:"2007102309000",f:(function(AMP,_){
var f="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function k(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object");})()}k(this);"function"===typeof Symbol&&Symbol("x");var m;
if("function"==typeof Object.setPrototypeOf)m=Object.setPrototypeOf;else{var n;a:{var p={a:!0},q={};try{q.__proto__=p;n=q.a;break a}catch(a){}n=!1}m=n?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var r=m;var t=Object.prototype.toString;var u=self.AMP_CONFIG||{},v=("string"==typeof u.cdnProxyRegex?new RegExp(u.cdnProxyRegex):u.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function w(a){if(self.document&&self.document.head&&(!self.location||!v.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}u.cdnUrl||w("runtime-host");u.geoApiUrl||w("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var x=self.__AMP_LOG;function y(a,b,c,d,e,g){if(!x.user)throw Error("failed to call initLogConstructor");return x.user.assert(a,b,c,d,e,g,void 0,void 0,void 0,void 0,void 0)};var z=Object.prototype.hasOwnProperty;var A;function B(){return A?A:A=Promise.resolve(void 0)};function C(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});function D(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return E(a,b)}function F(a,b){a=G(a);var c=H(a,b);c?b=c:(a=I(a),a[b]=J(),b=a[b].promise);return b}function K(a){return a.nodeType?D((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function G(a){a=K(a);return a.isSingleDoc()?a.win:a}function E(a,b){a=I(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}
function H(a,b){var c=I(a)[b];if(c){if(c.promise)return c.promise;E(a,b);return c.promise=Promise.resolve(c.obj)}return null}function I(a){var b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function J(){var a=new C,b=a.promise,c=a.resolve;a=a.reject;b.catch(function(){});return{obj:null,promise:b,resolve:c,reject:a,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function L(a){return M(a).then(function(a){return y(a,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","userNotificationManager","amp-user-notification","amp-user-notification","amp-user-notification")})}
function M(a){var b=H(G(a),"userNotificationManager");if(b)return b;var c=K(a);return c.waitForBodyOpen().then(function(){var a=c.win;var b=c.win.document.head;if(b){var g={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(var h=0;h<b.length;h++){var l=b[h];l=l.getAttribute("custom-element")||l.getAttribute("custom-template");g[l]=!0}g=Object.keys(g)}else g=[];return g.includes("amp-user-notification")?D(a,"extensions").waitForExtension(a,"amp-user-notification"):B()}).then(function(){var b=
c.win;return b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-user-notification"]?F(a,"userNotificationManager"):null})};var N=/^[\w-]+$/;function O(a){this.ampdoc=a;this.h=new C}O.prototype.init=function(a){this.h.resolve(a)};O.prototype.getVariants=function(){return this.h.promise};O.prototype.whenReady=function(){return this.getVariants()};
function P(a,b,c){Q(b);R(c);var d=a.getParam("amp-x-"+b);if(d&&z.call(c.variants,d))return Promise.resolve(d);var e=!1!==c.sticky,g=c.cidScope||"amp-experiment",h=Promise.resolve(!0);if(e&&c.consentNotificationId){var l=a.getHeadNode();h=L(l).then(function(a){return a.getNotification(c.consentNotificationId)}).then(function(a){y(a,"Notification not found: "+c.consentNotificationId);return a.isDismissed()})}return h.then(function(d){return d?S(a,c.group||b,e?g:null).then(function(a){for(var b=0,d=
Object.keys(c.variants).sort(),e=0;e<d.length;e++)if(b+=c.variants[d[e]],a<b)return d[e];return null}):null})}function R(a){var b=a.variants;y("[object Object]"===t.call(b)&&0<Object.keys(b).length,"Missing experiment variants config.");a.group&&Q(a.group);var c=0,d;for(d in b)if(z.call(b,d)){Q(d);var e=b[d];y("number"===typeof e&&0<e&&100>e,"Invalid percentage %s:%s. Has to be greater than 0 and less than 100",d,e);c+=e}y(100>=c.toFixed(6),"Total percentage is bigger than 100: "+c)}
function S(a,b,c){if(!c)return Promise.resolve(100*a.win.Math.random());var d=F(a,"cid").then(function(a){return a.get({scope:c,createCookieIfNotPresent:!0},B())});return Promise.all([d,D(a.win,"crypto")]).then(function(a){return a[1].uniform(b+":"+a[0])}).then(function(a){return 100*a})}function Q(a){y(N.test(a),"Invalid name: %s. Allowed chars are [a-zA-Z0-9-_].",a)};function T(){return AMP.BaseElement.apply(this,arguments)||this}var U=AMP.BaseElement;T.prototype=f(U.prototype);T.prototype.constructor=T;if(r)r(T,U);else for(var V in U)if("prototype"!=V)if(Object.defineProperties){var W=Object.getOwnPropertyDescriptor(U,V);W&&Object.defineProperty(T,V,W)}else T[V]=U[V];T.l=U.prototype;T.prototype.isLayoutSupported=function(a){return"nodisplay"==a||"container"==a};T.prototype.prerenderAllowed=function(){return!0};T.prototype.isBuildRenderBlocking=function(){return!0};
T.prototype.buildCallback=function(){var a=this;return F(this.getAmpDoc(),"variant").then(function(b){try{var c=X(a),d=Object.create(null),e=Object.keys(c).map(function(b){return P(a.getAmpDoc(),b,c[b]).then(function(a){d[b]=a})}),g=Promise.all(e).then(function(){return d}).then(a.j.bind(a));b.init(g)}catch(h){throw b.init({}),h;}})};
function X(a){a=a.element.children;y(1==a.length&&"SCRIPT"==a[0].tagName&&"APPLICATION/JSON"==a[0].getAttribute("type").toUpperCase(),'<amp-experiment> should contain exactly one <script type="application/json"> child.');return JSON.parse(a[0].textContent)}T.prototype.j=function(a){return this.getAmpDoc().waitForBodyOpen().then(function(b){for(var c in a)a[c]&&b.setAttribute("amp-x-"+c,a[c]);return a})};(function(a){a.registerServiceForDoc("variant",O);a.registerElement("amp-experiment",T)})(self.AMP);
})});

//# sourceMappingURL=amp-experiment-0.1.js.map
