{"version":3,"mappings":"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","names":["resolved","Deferred","constructor","resolve","reject","this","promise","Promise","res","rej","tryDecodeUriComponent_","component","fallback","decodeURIComponent","e","regex","toArray","arrayLike","Array","env","self","cdnProxyRegex","RegExp","getMetaUrl","name","metaEl","user","dev","userForEmbed","dict","opt_initial","c","v","a","ad","getExperimentToggles","win","experimentsString","LOCAL_STORAGE_KEY","tokens","toggles","Object","i","getService","id","getServiceInternal","getServiceForDoc","elementOrAmpDoc","ampdoc","getAmpdoc","holder","getAmpdocServiceHolder","nodeOrDoc","defaultView","getAmpdocService","isServiceRegistered","services","s","getServices","service","closest","element","callback","el","opt_stopAt","closestAncestorElementBySelector","disabledSelector","matcher","matches","whenUpgradedToCustomElement","tag","prefix","string","deferred","test","resolvedPromise","undefined","ENABLED_LD_JSON_TYPES","Article","NewsArticle","BlogPosting","LiveBlogPosting","DiscussionForumPosting","NOOP","srcsetWidthRe","markAsVisited","candidate","Services","VISITED_ATTR","whenLoaded","LOAD_END","getAllLdJsonTypes","getRootNode","SCRIPT_LD_JSON","b","JSON","textContent","tryParseJson","typeOrUndefined","hasValidLdJsonType","DocMetaAnnotations","type","usesLightboxExplicitly","exists","selector","requiredExtensionSelector","lightboxedElementsSelector","uid","apply","mutator","LIGHTBOXABLE_ATTR","mutatePromise","REQUIRED_EXTENSION","NEWLY_SET","runCandidates","candidates","Criteria","naturalWidth","img","naturalHeight","ratio","max","srcsetAttr","match","width","parseInt","f","getMaxWidthFromSrcset","getMaxNaturalDimensions","renderWidth","height","renderHeight","viewport","vw","vh","renderArea","isCoveringSignificantArea","VIEWPORT_AREA_RATIO","isLargerThanViewport","RENDER_AREA_RATIO","meetsSizingCriteria","document","topWin","isEmbed","experimentId","frequency","Math","allowed","meta","optedInExperiments","params","queryString","value","param","parseQueryString_","ampdocFieExperimentOn","experimentToggles","E","y","getServiceForDocOrNullInternal","hasResolvableAction","scan","opt_root","d","META_OG_TYPE","root","Scanner","AMP","DOM_UPDATE","target"],"sources":["src/resolved-promise.js","src/utils/promise.js","src/url-try-decode-uri-component.js","src/url-parse-query-string.js","src/types.js","src/config.js","src/log.js","src/utils/object.js","src/url.js","src/experiments.js","src/service.js","src/dom.js","extensions/amp-auto-lightbox/0.1/amp-auto-lightbox.js","src/string.js","src/chunk.js","src/services.js","src/common-signals.js","src/json.js","src/auto-lightbox.js","src/ampdoc-fie.js","src/amp-events.js"],"file":"amp-auto-lightbox-0.1.mjs","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}