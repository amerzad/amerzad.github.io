(self.AMP=self.AMP||[]).push({n:"amp-orientation-observer",v:"2007102309000",f:(function(AMP,_){
var k="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function m(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object");})()}m(this);"function"===typeof Symbol&&Symbol("x");var n;
if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var p;a:{var q={a:!0},t={};try{t.__proto__=q;p=t.a;break a}catch(a){}p=!1}n=p?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var u=n;function v(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var w=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;var x=self.AMP_CONFIG||{},y=("string"==typeof x.cdnProxyRegex?new RegExp(x.cdnProxyRegex):x.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function z(a){if(self.document&&self.document.head&&(!self.location||!y.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}x.cdnUrl||z("runtime-host");x.geoApiUrl||z("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var A=self.__AMP_LOG;var B=Object.prototype.hasOwnProperty;function C(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var f=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');
if(e){var h=e.getAttribute("content").split(",");for(c=0;c<h.length;c++)-1!=f.indexOf(h[c])&&(b[h[c]]=!0)}}Object.assign(b,D(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];var g=a.location.originalHash||a.location.hash;a=Object.create(null);if(g)for(var l;l=w.exec(g);){var r=v(l[1],l[1]);l=l[2]?v(l[2].replace(/\+/g," "),l[2]):"";a[r]=l}for(g=0;g<c.length;g++)r=a["e-"+c[g]],"1"==r&&(b[c[g]]=!0),"0"==
r&&(b[c[g]]=!1)}return b}function D(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(f){if(A.dev)a=A.dev;else throw Error("failed to call initLogConstructor");a.warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};var E=[{experimentId:"ampdoc-fie",isTrafficEligible:function(){return!0},branches:["21065001","21065002"]}];function F(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=G(b,"ampdoc").getAmpDoc(a)}return a}function G(a,b){H(a,b);var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function H(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function I(a){return a.reduce(function(a,c){return a+c})};var J=["alpha","beta","gamma"],K={alpha:180,beta:0,gamma:0},L={alpha:[0,360],beta:[-180,180],gamma:[-90,90]};function M(a){a=AMP.BaseElement.call(this,a)||this;a.w=F(a.element);a.o=null;a.l=Object.assign({},L);a.j=Object.assign({},K);a.m=Object.assign({},K);a.c={beta:[],alpha:[],gamma:[]};a.h=null;return a}var N=AMP.BaseElement;M.prototype=k(N.prototype);M.prototype.constructor=M;
if(u)u(M,N);else for(var O in N)if("prototype"!=O)if(Object.defineProperties){var P=Object.getOwnPropertyDescriptor(N,O);P&&Object.defineProperty(M,O,P)}else M[O]=N[O];M.B=N.prototype;
M.prototype.buildCallback=function(){var a=this.element,b=a.ownerDocument.defaultView,c=b.__AMP_TOP||(b.__AMP_TOP=b),d=b!=c;if(C(c)["ampdoc-fie"]){c.__AMP_EXPERIMENT_BRANCHES=c.__AMP_EXPERIMENT_BRANCHES||{};for(var f=0;f<E.length;f++){var e=E[f],h=e.experimentId;B.call(c.__AMP_EXPERIMENT_BRANCHES,h)||(e.isTrafficEligible&&e.isTrafficEligible(c)?!c.__AMP_EXPERIMENT_BRANCHES[h]&&C(c)[h]&&(e=e.branches,c.__AMP_EXPERIMENT_BRANCHES[h]=e[Math.floor(Math.random()*e.length)]||null):c.__AMP_EXPERIMENT_BRANCHES[h]=
null)}c="21065002"===(c.__AMP_EXPERIMENT_BRANCHES?c.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else c=!1;d&&!c?a=H(b,"action")?G(b,"action"):null:(a=F(a),a=F(a),a=a.isSingleDoc()?a.win:a,a=H(a,"action")?G(a,"action"):null);this.o=a;this.w.whenFirstVisible().then(this.A.bind(this))};
M.prototype.A=function(){var a=this;if(!A.user)throw Error("failed to call initLogConstructor");A.user.assert(this.win.DeviceOrientationEvent,"The current browser doesn't support the `window.DeviceOrientationEvent`",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);J.forEach(function(b){var c=a.l;var d=a.l[b];var f=a.element.getAttribute(b+"-range");f&&(d=f.trim().split(" "),d=[parseInt(d[0],10),parseInt(d[1],10)]);c[b]=d});this.h=this.element.hasAttribute("smoothing")?Number(this.element.getAttribute("smoothing"))||
4:null;this.win.addEventListener("deviceorientation",function(b){Q(a,b)},!0)};
function Q(a,b){if(b instanceof DeviceOrientationEvent){var c=a.win.screen,d=b.alpha,f=b.gamma,e=b.beta;b="orientation"in c?c.orientation.angle:c.orientation;if(90==a.win.orientation||-90==a.win.orientation){var h=f;f=e;e=h}0>b&&(f=-f,e=-e);var g={alpha:d,beta:e,gamma:f};J.forEach(function(b){if(.1<Math.abs(g[b]-a.j[b])){var c=a.j;if(a.h){var d=g[b];a.c[b].length>a.h&&a.c[b].shift();a.c[b].push(d);d=I(a.c[b])/a.h;a.c[b].length>a.h&&a.m[b]==K[b]&&(a.m[b]=d);d-=a.m[b]}else d=g[b];c[b]=d;d=a.j[b];var e=
a.l[b],f=0>e[0]?d.toFixed()-e[0]:d.toFixed();c=a.win;d={angle:Math.min(Math.max(d,e[0]),e[1]).toFixed(),percent:f/(e[1]-e[0])};e="amp-orientation-observer."+b;f={detail:d};Object.assign(f,void 0);"function"==typeof c.CustomEvent?c=new c.CustomEvent(e,f):(c=c.document.createEvent("CustomEvent"),c.initCustomEvent(e,!!f.bubbles,!!f.cancelable,d));a.o.trigger(a.element,b,c,1)}})}}(function(a){a.registerElement("amp-orientation-observer",M)})(self.AMP);
})});

//# sourceMappingURL=amp-orientation-observer-0.1.js.map
