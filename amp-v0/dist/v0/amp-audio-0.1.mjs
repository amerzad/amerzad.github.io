(self.AMP=self.AMP||[]).push({n:"amp-audio",v:"2008290323002",f:function(AMP,_){class l{constructor(){let a,b;this.promise=new Promise((c,e)=>{a=c;b=e});this.resolve=a;this.reject=b}}function m(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let n=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;let p=Object.prototype.toString;let q=self.AMP_CONFIG||{},r=("string"==typeof q.cdnProxyRegex?new RegExp(q.cdnProxyRegex):q.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function t(a){if(self.document&&self.document.head&&(!self.location||!r.test(self.location.origin))){var b=self.document.head.querySelector(`meta[name="${a}"]`);b&&b.getAttribute("content")}}q.cdnUrl||t("runtime-host");q.geoApiUrl||t("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let u=self.__AMP_LOG;function v(){}function w(a,b,c,e,f){if(!u.user)throw Error("failed to call initLogConstructor");u.user.assert(a,b,c,e,f,void 0,void 0,void 0,void 0,void 0,void 0)}class x{constructor(a){this.o=a;this.j=this.l=0;this.h=Object.create(null)}has(a){return!!this.h[a]}get(a){let b=this.h[a];if(b)return b.access=++this.j,b.payload}put(a,b){this.has(a)||this.l++;this.h[a]={payload:b,access:this.j};if(!(this.l<=this.o)){a=this.h;var c=this.j+1;for(let b in a){let{access:d}=a[b];if(d<c){c=d;var e=b}}void 0!==e&&(delete a[e],this.l--)}}}let y,z;function A(a,b){w(null!=a,"%s %s must be available",b,"source");var c=a;if("string"==typeof c){y||(y=self.document.createElement("a"),z=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new x(100)));var e=z,f=y;if(e&&e.has(c))c=e.get(c);else{f.href=c;f.protocol||(f.href=f.href);var d={href:f.href,protocol:f.protocol,host:f.host,hostname:f.hostname,port:"0"==f.port?"":f.port,pathname:f.pathname,search:f.search,hash:f.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=f.origin&&"null"!=f.origin?f.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;e&&e.put(c,d);c=d}}(e="https:"==c.protocol||"localhost"==c.hostname||"127.0.0.1"==c.hostname)||(c=c.hostname,e=c.length-10,e=0<=e&&c.indexOf(".localhost",e)==e);w(e||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,"source",a)}function B(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}function C(a){let b=a.ownerDocument.defaultView;var c=b.__AMP_TOP||(b.__AMP_TOP=b);let e=b!=c;if(c.__AMP__EXPERIMENT_TOGGLES)var f=c.__AMP__EXPERIMENT_TOGGLES;else{c.__AMP__EXPERIMENT_TOGGLES=Object.create(null);f=c.__AMP__EXPERIMENT_TOGGLES;if(c.AMP_CONFIG)for(var d in c.AMP_CONFIG){var g=c.AMP_CONFIG[d];"number"===typeof g&&0<=g&&1>=g&&(f[d]=Math.random()<g)}if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-doc-opt-in"])&&0<c.AMP_CONFIG["allow-doc-opt-in"].length&&(d=c.AMP_CONFIG["allow-doc-opt-in"],g=c.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){g=g.getAttribute("content").split(",");for(var h=0;h<g.length;h++)-1!=d.indexOf(g[h])&&(f[g[h]]=!0)}Object.assign(f,B(c));if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-url-opt-in"])&&0<c.AMP_CONFIG["allow-url-opt-in"].length){d=c.AMP_CONFIG["allow-url-opt-in"];c=c.location.originalHash||c.location.hash;g=Object.create(null);if(c)for(var k;k=n.exec(c);)h=m(k[1],k[1]),k=k[2]?m(k[2].replace(/\+/g," "),k[2]):"",g[h]=k;c=g;for(g=0;g<d.length;g++)h=c[`e-${d[g]}`],"1"==h&&(f[d[g]]=!0),"0"==h&&(f[d[g]]=!1)}}let R=!!f["ampdoc-fie"];e&&!R?a=D(b,"url")?E(b,"url"):null:(a=F(a),a=G(a),a=D(a,"url")?E(a,"url"):null);return a}function H(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return E(a,b)}function F(a){return a.nodeType?H((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function G(a){a=F(a);return a.isSingleDoc()?a.win:a}function E(a,b){D(a,b);a=I(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function J(a){let b=I(a)["amp-analytics-instrumentation"];if(b){if(b.promise)return b.promise;E(a,"amp-analytics-instrumentation");return b.promise=Promise.resolve(b.obj)}return null}function I(a){let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function D(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function K(){let a=new l,b=a.promise,c=a.resolve,e=a.reject;b.catch(()=>{});return{obj:null,promise:b,resolve:c,reject:e,context:null,ctor:null}}let L;
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */function M(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function N(a){return a.closest?a.closest("AMP-STORY"):M(a,a=>{{let b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;a=b?b.call(a,"AMP-STORY"):!1}return a})}function O(a){let b=J(G(a));if(b)return b;let c=F(a);return c.waitForBodyOpen().then(()=>{var a=c.win;var b=c.win.document.head;if(b){var d={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(let a=0;a<b.length;a++){var g=b[a];g=g.getAttribute("custom-element")||g.getAttribute("custom-template");d[g]=!0}d=Object.keys(d)}else d=[];d.includes("amp-analytics")?a=H(a,"extensions").waitForExtension(a,"amp-analytics"):(L||(L=Promise.resolve(void 0)),a=L);return a}).then(()=>{var b=c.win;if(b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-analytics"]){b=G(a);let c=J(b);c?b=c:(b=I(b),b["amp-analytics-instrumentation"]=K(),b=b["amp-analytics-instrumentation"].promise)}else b=null;return b})}let P={title:"",artist:"",album:"",artwork:[{src:""}]};function Q(a,b,c,e,f){let d=b.navigator;"mediaSession"in d&&b.MediaMetadata&&(d.mediaSession.metadata=new b.MediaMetadata(P),S(a,c),d.mediaSession.metadata=new b.MediaMetadata(c),d.mediaSession.setActionHandler("play",e),d.mediaSession.setActionHandler("pause",f))}function T(a){let b=a.querySelector('script[type="application/ld+json"]');if(b){try{var c=JSON.parse(b.textContent)}catch(e){c=null}if(c&&c.image){if("string"===typeof c.image)return c.image;if(c.image["@list"]&&"string"===typeof c.image["@list"][0])return c.image["@list"][0];if("string"===typeof c.image.url)return c.image.url;if("string"===typeof c.image[0])return c.image[0]}}}function S(a,b){let c=C(a);if(b&&b.artwork){let a=b.artwork;v(Array.isArray(a));a.forEach(a=>{a&&(a="[object Object]"===p.call(a)?a.src:a,w(c.isProtocolValid(a)))})}}let U;function V(a,b,c){let e=W();a.addEventListener(b,a=>{try{return c(a)}catch(d){throw self.__AMP_REPORT_ERROR(d),d}},e?void 0:!1)}function W(){if(void 0!==U)return U;U=!1;try{let a={get capture(){U=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return U}function X(a,b,c){V(a,b,c)}function Y(a,b){var c={};O(a).then(e=>{e&&e.triggerEventForTarget(a,b,c,!0)})}function Z(a){var{document:b}=a.getAmpDoc().win;let c=a.element.getAttribute("artist")||"",e=a.element.getAttribute("title")||a.element.getAttribute("aria-label")||b.title||"",f=a.element.getAttribute("album")||"";var d;(d=a.element.getAttribute("artwork")||T(b))||(d=(d=b.querySelector('meta[property="og:image"]'))?d.getAttribute("content"):void 0);d||(d=(b=b.querySelector('link[rel="shortcut icon"]')||b.querySelector('link[rel="icon"]'))?b.getAttribute("href"):void 0);a.m={title:e,artist:c,album:f,artwork:[{src:d||""}]}}function aa(a){Q(a.element,a.win,a.m,()=>{a.c.play()},()=>{a.c.pause()})}class ba extends AMP.BaseElement{constructor(a){super(a);this.c=null;this.m=P;this.isPlaying=!1}isLayoutSupported(a){return"fixed"==a||"fixed-height"==a}buildCallback(){"nodisplay"===this.getLayout()&&(this.element.removeAttribute("autoplay"),this.buildAudioElement());this.element.classList.add("i-amphtml-media-component");this.registerAction("play",this.A.bind(this));this.registerAction("pause",this.w.bind(this))}mutatedAttributesCallback(a){if(this.c){var b=a.src,c=a.controlsList,e=a.loop;if(void 0!==b||void 0!==c||void 0!==e)void 0!==b&&A(b,this.element),this.propagateAttributes(["src","loop","controlsList"],this.c);b=a.title;var f=a.album,d=a.artwork;void 0===a.artist&&void 0===b&&void 0===f&&void 0===d||Z(this)}}buildAudioElement(){let a=this.element.ownerDocument.createElement("audio");if(a.play){a.controls=!0;var b=this.element.getAttribute("src");b&&A(b,this.element);this.propagateAttributes("src preload autoplay muted loop aria-label aria-describedby aria-labelledby controlsList".split(" "),a);this.applyFillContent(a);this.getRealChildNodes().forEach(b=>{b.getAttribute&&b.getAttribute("src")&&A(b.getAttribute("src"),b);a.appendChild(b)});this.element.appendChild(a);this.c=a;X(this.c,"playing",()=>aa(this));X(this.c,"play",()=>Y(this.element,"audio-play"));X(this.c,"pause",()=>Y(this.element,"audio-pause"))}else this.toggleFallback(!0)}layoutCallback(){"nodisplay"!==this.getLayout()&&this.buildAudioElement();Z(this);return"none"===this.element.getAttribute("preload")?this.c:this.loadPromise(this.c)}renderOutsideViewport(){return!0}pauseCallback(){this.c&&this.c.pause()}w(){this.c&&!N(this.element)&&this.c.pause()}A(){this.c&&!N(this.element)&&this.c.play()}}(a=>{a.registerElement("amp-audio",ba)})(self.AMP)}});