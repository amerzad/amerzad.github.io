{"version":3,"sources":["src/resolved-promise.js","src/url-try-decode-uri-component.js","src/url-parse-query-string.js","src/config.js","src/log.js","src/utils/object.js","src/url.js","src/experiments.js","src/service.js","src/services.js","extensions/amp-dynamic-css-classes/0.1/amp-dynamic-css-classes.js","src/ampdoc-fie.js"],"names":["resolved","tryDecodeUriComponent_","component","fallback","decodeURIComponent","e","regex","env","self","cdnProxyRegex","RegExp","getMetaUrl","name","metaEl","user","dev","userForEmbed","logs","dict","opt_initial","getExperimentToggles","win","experimentsString","LOCAL_STORAGE_KEY","Error","TAG","tokens","toggles","Object","i","getService","id","getServiceInternal","getServiceForDoc","elementOrAmpDoc","ampdoc","getAmpdoc","holder","getAmpdocServiceHolder","nodeOrDoc","defaultView","getAmpdocService","isServiceRegistered","services","s","service","referrers_","referrer","domainBase","domains","referrers","domain","normalizedReferrers","referrerDomain","Services","hostname","element","document","topWin","isEmbed","experimentId","frequency","Math","Array","allowed","meta","optedInExperiments","params","queryString","match","value","param","ampdocFieExperimentOn","experimentToggles","getServiceForDocOrNullInternal","test","addDynamicCssClasses","classes","addCssClassesToBody","body","classList","addReferrerClasses","addViewerClass","viewer","constructor","AmpDynamicCssClasses","whenReady","Promise","undefined","AMP"],"mappings":"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","file":"amp-dynamic-css-classes-0.1.js","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}