{"version":3,"mappings":"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","names":["tryDecodeUriComponent_","component","fallback","decodeURIComponent","e","regex","toArray","arrayLike","Array","env","self","cdnProxyRegex","RegExp","getMetaUrl","name","metaEl","user","dev","userForEmbed","trimEnd","str","trim","slice","dict","opt_initial","c","v","a","ad","experimentToggles","win","Object","toggles","experimentId","frequency","Math","allowed","meta","optedInExperiments","i","getExperimentToggles","params","queryString","match","value","param","parseQueryString_","experimentsString","LOCAL_STORAGE_KEY","tokens","getAmpdoc","nodeOrDoc","getAmpdocService","getServiceInternal","id","holder","isServiceRegistered","services","s","getServices","service","closest","element","callback","el","opt_stopAt","closestAncestorElementBySelector","selector","matcher","matches","iterateCursor","iterable","cb","length","htmlContainer","htmlFor","doc","html","strings","container","b","binarySearch","end","condition","low","start","high","prefIndex","NaN","mid","res","isNaN","forEachChild","node","childNodes","flatten","removeTruncation","data","Node","ELEMENT_OVERFLOW_ATTRIBUTE","child","truncate","originalText","modifiedText","truncateText","overflowNodes","CONTAINER_OVERFLOW_ATTRIBUTE","containerRect","runTruncation","getAllNodes","root","filter","nodes","maybeEllipsizeNode","range","document","rect","text","searchIndex","offset","char","ELLIPSIS_CHARACTERS","fittingText","_template","_template2","expand_","setAttribute","collapse_","removeAttribute","setupActions_","registerAction","truncate_","useShadow_","content_","getNodesForOverflow_","querySelectorAll","mutationObserver_","takeRecords","buildShadow_","sizer","shadowRoot","mode","style","ShadowCSS","sizerSlot","content","collapsedSlot_","createShadowRoot","sr","expandedSlot_","persistentSlot_","build_","defaultSlot","querySelector","appendChild","getRealChildNodes","forEach","maybeToggle_","event","expand","target","topWin","isEmbed","ampdocFieExperimentOn","d","x","w","ampdoc","getServiceForDocOrNullInternal","getAmpdocServiceHolder","actionService","AmpTruncateText","AMP","constructor","super","this","MutationObserver","buildCallback","attachShadow","addEventListener","maybeExpand_","maybeCollapse_","layoutCallback","mutateElement","firstAttachedCallback","observe","attributes","characterData","childList","subtree","isRelayoutNeeded","isLayoutSupported","CSS"],"sources":["src/url-try-decode-uri-component.js","src/url-parse-query-string.js","src/types.js","src/config.js","src/log.js","src/string.js","src/utils/object.js","src/url.js","src/experiments.js","src/service.js","src/dom.js","extensions/amp-truncate-text/0.1/amp-truncate-text.js","src/static-template.js","extensions/amp-truncate-text/0.1/binary-search.js","extensions/amp-truncate-text/0.1/truncate-text.js","extensions/amp-truncate-text/0.1/shadow-utils.js","build/amp-truncate-text-shadow-0.1.css.js","src/ampdoc-fie.js","src/services.js","build/amp-truncate-text-0.1.css.js"],"file":"amp-truncate-text-0.1.mjs","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}