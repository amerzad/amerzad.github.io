{"version":3,"mappings":"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","names":["env","self","cdnProxyRegex","RegExp","getMetaUrl","name","metaEl","user","dev","userForEmbed","logs","Error","userAssert","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","dict","opt_initial","c","v","a","ad","appendEncodedParamStringToUrl","url","paramString","mainAndFragment","mainAndQuery","newUrl","serializeQueryString","params","s","k","Array","i","sv","encodeURIComponent","getService","win","id","getServiceInternal","getServiceForDoc","elementOrAmpDoc","ampdoc","getAmpdoc","b","getAmpdocServiceHolder","nodeOrDoc","defaultView","getAmpdocService","holder","services","getServices","optsSupported","internalListenImplementation","element","listener","wrapped","localElement","localListener","event","e","detectEvtListenerOptsSupport","eventType","opt_evtListenerOpts","capture","undefined","options","err","listen","EmbedType","POST","POLL","getVkPostIFrameSrc_","Services","ref","startWidth","offsetWidth","pageUrl","getAmpDoc","getUrl","queryParams","app","width","_ver","owner_id","ownerId_","post_id","postId_","hash","hash_","amp","referrer","title","iframeUrl","getVkPollIFrameSrc_","apiId_","poll_id","pollId_","description","getIFrameSrc_","createdTime","Date","iframeSrcPromise","embedType_","iframeSrc","AmpVk","AMP","constructor","super","this","iframe_","widgetHeight_","unlistenMessage_","preconnectCallback","opt_onLayout","buildCallback","getAttribute","postBuildCallback_","pollBuildCallback_","layoutCallback","iframe","ownerDocument","createElement","handleVkIframeMessage_","bind","then","src","applyFillContent","appendChild","loadPromise","contentWindow","eventData","matches","regExp","newHeight","parseInt","forceChangeHeight","isLayoutSupported","layout","RESPONSIVE","FLEX_ITEM","FIXED","unlayoutOnPause","unlayoutCallback"],"sources":["src/config.js","src/log.js","src/utils/object.js","src/url.js","src/types.js","src/service.js","src/services.js","src/event-helper-listen.js","extensions/amp-vk/0.1/amp-vk.js","src/event-helper.js","src/layout.js","src/dom.js"],"file":"amp-vk-0.1.mjs","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}