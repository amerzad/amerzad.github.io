(self.AMP=self.AMP||[]).push({n:"amp-image-lightbox",v:"2008290323002",f:function(AMP,_){let k;function l(){return k?k:k=Promise.resolve(void 0)}class m{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function n(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let aa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;let p=self.AMP_CONFIG||{},ba=("string"==typeof p.cdnProxyRegex?new RegExp(p.cdnProxyRegex):p.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function r(a){if(self.document&&self.document.head&&(!self.location||!ba.test(self.location.origin))){var b=self.document.head.querySelector(`meta[name="${a}"]`);b&&b.getAttribute("content")}}p.cdnUrl||r("runtime-host");p.geoApiUrl||r("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let t=self.__AMP_LOG;function u(){if(t.dev)return t.dev;throw Error("failed to call initLogConstructor")}function v(a,b,c){if(!t.user)throw Error("failed to call initLogConstructor");return t.user.assert(a,b,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}let w;function y(a,b){return b.length>a.length?!1:0==a.lastIndexOf(b,0)}function ca(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function da(a){return a.closest?a.closest("figure"):ca(a,a=>{{let b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;a=b?b.call(a,"figure"):!1}return a})}let z;let ea="Webkit webkit Moz moz ms O o".split(" ");function fa(a,b,c){var d=a.style;if(!y(b,"--")){z||(z=Object.create(null));var e=z[b];if(!e){e=b;if(void 0===d[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);b:{for(let a=0;a<ea.length;a++){let b=ea[a]+f;if(void 0!==d[b]){f=b;break b}}f=""}void 0!==d[f]&&(e=f)}z[b]=e}b=e}b&&(y(b,"--")?a.style.setProperty(b,c):a.style[b]=c)}function A(a,b){for(let c in b)fa(a,c,b[c])}function ha(a){var b=!0;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function B(a,b,c,d){let e=new ia(0,0,a,b,c,d,1,1);return e.solveYValueFromXValue.bind(e)}class ia{constructor(a,b,c,d,e,f,g,h){this.x0=a;this.y0=b;this.x1=c;this.y1=d;this.x2=e;this.y2=f;this.x3=g;this.y3=h}solveYValueFromXValue(a){return this.getPointY(this.solvePositionFromXValue(a))}solvePositionFromXValue(a){let b=(a-this.x0)/(this.x3-this.x0);if(0>=b)return 0;if(1<=b)return 1;let c=0,d=1,e=0;for(var f=0;8>f;f++){e=this.getPointX(b);let f=(this.getPointX(b+1e-6)-e)/1e-6;if(1e-6>Math.abs(e-a))return b;if(1e-6>Math.abs(f))break;else e<a?c=b:d=b,b-=(e-a)/f}for(f=0;1e-6<Math.abs(e-a)&&8>f;f++)e<a?(c=b,b=(b+d)/2):(d=b,b=(b+c)/2),e=this.getPointX(b);return b}getPointX(a){if(0==a)return this.x0;if(1==a)return this.x3;let b=this.lerp(this.x0,this.x1,a),c=this.lerp(this.x1,this.x2,a);let d=this.lerp(this.x2,this.x3,a);b=this.lerp(b,c,a);c=this.lerp(c,d,a);return this.lerp(b,c,a)}getPointY(a){if(0==a)return this.y0;if(1==a)return this.y3;let b=this.lerp(this.y0,this.y1,a),c=this.lerp(this.y1,this.y2,a);let d=this.lerp(this.y2,this.y3,a);b=this.lerp(b,c,a);c=this.lerp(c,d,a);return this.lerp(b,c,a)}lerp(a,b,c){return a+c*(b-a)}}var ja=B(.25,.1,.25,1),ka=B(.42,0,1,1),la=B(0,0,.58,1),ma=B(.42,0,.58,1);let na={linear:function(a){return a},ease:ja,"ease-in":ka,"ease-out":la,"ease-in-out":ma};function oa(a){if(!a)return null;if("string"==typeof a){if(-1!=a.indexOf("cubic-bezier")){var b=a.match(/cubic-bezier\((.+)\)/);if(b&&(b=b[1].split(",").map(parseFloat),4==b.length)){for(let a=0;4>a;a++)if(isNaN(b[a]))return null;return B(b[0],b[1],b[2],b[3])}return null}return na[a]}return a}function pa(a){return(b,c)=>{let d=[];for(let e=0;e<a.length;e++){let f=(0,a[e])(b,c);"string"==typeof f&&d.push(f)}return d.join(" ")}}function C(a,b){return(c,d)=>{for(let f in b){var e=f;"display"===e&&u().error("STYLE","`display` style detected. You must use toggle instead.");fa(a,e,b[f](c,d))}}}function D(a,b){return c=>a+(b-a)*c}function qa(a,b){return c=>{let d=a(c);"number"==typeof d&&(d=`${d}px`);if(!b)return`translate(${d})`;c=b(c);"number"==typeof c&&(c=`${c}px`);return`translate(${d},${c})`}}function ra(a){return b=>`scale(${a(b)})`}(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0});function sa(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(d){}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}function E(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return F(a,b)}function ta(a){var b=G(a);b=ua(b);return F(b,"history")}function G(a){return a.nodeType?E((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function ua(a){a=G(a);return a.isSingleDoc()?a.win:a}function F(a,b){H(a,b);{let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});a=b}b=a[b];b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));return b.obj}function H(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function va(){}function wa(a,b,c){var d=xa;return new I(a).setCurve(d).add(0,b,1).start(c)}class I{constructor(a,b){this.X=a;this.$=b||E(self,"vsync");this.Sa=null;this.H=[]}setCurve(a){a&&(this.Sa=oa(a));return this}add(a,b,c,d){this.H.push({delay:a,func:b,duration:c,curve:oa(d)});return this}start(a){return new ya(this.$,this.X,this.H,this.Sa,a)}}function J(a,b,c){if(a.Z){a.Z=!1;if(0!=c){1<a.H.length&&a.H.sort((a,b)=>a.delay+a.duration-(b.delay+b.duration));try{if(0<c)for(c=0;c<a.H.length;c++)a.H[c].func(1,!0);else for(let b=a.H.length-1;0<=b;b--)a.H[b].func(0,!1)}catch(d){u().error("Animation","completion failed: "+d,d),b=!1}}b?a.Ma():a.La()}}class ya{constructor(a,b,c,d,e){this.$=a;this.X=b;this.H=[];for(b=0;b<c.length;b++){let a=c[b];this.H.push({delay:a.delay,func:a.func,duration:a.duration,curve:a.curve||d,started:!1,completed:!1})}this.gb=e;this.ta=Date.now();this.Z=!0;this.Xa={};c=new m;this.ka=c.promise;this.Ma=c.resolve;this.La=c.reject;this.Za=this.$.createAnimTask(this.X,{mutate:this.qb.bind(this)});this.$.canAnimate(this.X)?this.Za(this.Xa):J(this,!1,0)}then(a,b){return a||b?this.ka.then(a,b):this.ka}thenAlways(a){a=a||va;return this.then(a,a)}halt(a){J(this,!1,a||0)}qb(){if(this.Z){var a=Date.now(),b=Math.min((a-this.ta)/this.gb,1);for(var c=0;c<this.H.length;c++){var d=this.H[c];!d.started&&b>=d.delay&&(d.started=!0)}for(c=0;c<this.H.length;c++)if(d=this.H[c],d.started&&!d.completed)a:{let a,c;if(0<d.duration){if(a=c=Math.min((b-d.delay)/d.duration,1),d.curve&&1!=a)try{a=d.curve(c)}catch(g){u().error("Animation","step curve failed: "+g,g);J(this,!1,0);break a}}else a=c=1;1==c&&(d.completed=!0);try{d.func(a,d.completed)}catch(g){u().error("Animation","step mutate failed: "+g,g),J(this,!1,0)}}1==b?J(this,!0,0):this.$.canAnimate(this.X)?this.Za(this.Xa):J(this,!1,0)}}}class za{constructor(){this.M=null}add(a){this.M||(this.M=[]);this.M.push(a);return()=>{this.remove(a)}}remove(a){this.M&&(a=this.M.indexOf(a),-1<a&&this.M.splice(a,1))}removeAll(){this.M&&(this.M.length=0)}fire(a){if(this.M){var b=this.M;for(let c=0;c<b.length;c++)(0,b[c])(a)}}getHandlerCount(){return this.M?this.M.length:0}}class Aa{constructor(a,b,c){this.$a=E(a,"timer");this.hb=b;this.fb=c||0;this.la=-1;this.Ja=0;this.Z=!1;this.cb=()=>{this.ra()}}isPending(){return-1!=this.la}schedule(a){a=a||this.fb;this.Z&&10>a&&(a=10);let b=Date.now()+a;return!this.isPending()||-10>b-this.Ja?(this.cancel(),this.Ja=b,this.la=this.$a.delay(this.cb,a),!0):!1}ra(){this.la=-1;this.Ja=0;this.Z=!0;this.hb();this.Z=!1}cancel(){this.isPending()&&(this.$a.cancel(this.la),this.la=-1)}}function Ba(a,b){for(let c=0;c<a.length;c++)if(b(a[c],c,a))return c;return-1}let K;function Ca(a){if(void 0!==K)return K;K=!1;try{let b={get passive(){K=!0;return!1}};a.addEventListener("test-options",null,b);a.removeEventListener("test-options",null,b)}catch(b){}return K}class Da{constructor(a,b,c,d){this.type=a;this.data=b;this.time=c;this.event=d}}function Ea(a){let b=a.__AMP_Gestures;b||(b=new Fa(a,!1,!1),a.__AMP_Gestures=b);return b}function L(a,b){a.ea[b]=!1;a.B[b]=0;a.P[b]||a.A[b].acceptCancel()}function M(a,b){let c=!!a.w||a.wa;a.wa=!1;if(!c){let b=Date.now();for(let d=0;d<a.A.length;d++)if(a.P[d]||a.B[d]&&a.B[d]>=b){c=!0;break}}c?(b.stopPropagation(),a.nb||b.preventDefault()):a.ob&&b.stopPropagation();a.Ka&&(a.Ka=!1,a.Ta())}class Fa{constructor(a,b,c){this.U=a;this.A=[];this.ea=[];this.P=[];this.B=[];this.w=null;this.nb=b;this.ob=c;this.wa=!1;this.ra=new Aa(a.ownerDocument.defaultView,this.Ta.bind(this));this.Wa=new za;this.ja=Object.create(null);this.Ra=this.mb.bind(this);this.Pa=this.kb.bind(this);this.Qa=this.lb.bind(this);this.Oa=this.jb.bind(this);let d=Ca(a.ownerDocument.defaultView);this.U.addEventListener("touchstart",this.Ra,d?{passive:!0}:!1);this.U.addEventListener("touchend",this.Pa);this.U.addEventListener("touchmove",this.Qa,d?{passive:!0}:!1);this.U.addEventListener("touchcancel",this.Oa);this.Ka=!1}cleanup(){this.U.removeEventListener("touchstart",this.Ra);this.U.removeEventListener("touchend",this.Pa);this.U.removeEventListener("touchmove",this.Qa);this.U.removeEventListener("touchcancel",this.Oa);delete this.U.__AMP_Gestures;this.ra.cancel()}onGesture(a,b){let c=new a(this),d=c.getType();let e=this.ja[d];e||(this.A.push(c),e=new za,this.ja[d]=e);return e.add(b)}removeGesture(a){let b=new a(this).getType();if(a=this.ja[b]){a.removeAll();a=Ba(this.A,a=>a.getType()==b);if(0>a)return!1;this.A.splice(a,1);this.P.splice(a,1);this.B.splice(a,1);this.ea.splice(a,1);delete this.ja[b];return!0}return!1}onPointerDown(a){return this.Wa.add(a)}mb(a){let b=Date.now();this.wa=!1;this.Wa.fire(a);for(let d=0;d<this.A.length;d++)if(!this.P[d]&&(this.B[d]&&this.B[d]<b&&L(this,d),this.A[d].onTouchStart(a))){var c=d;this.ea[c]=!0;this.B[c]=0}M(this,a)}lb(a){let b=Date.now();for(let c=0;c<this.A.length;c++)this.ea[c]&&(this.B[c]&&this.B[c]<b?L(this,c):this.A[c].onTouchMove(a)||L(this,c));M(this,a)}kb(a){let b=Date.now();for(let c=0;c<this.A.length;c++){if(!this.ea[c])continue;if(this.B[c]&&this.B[c]<b){L(this,c);continue}this.A[c].onTouchEnd(a);let d=!this.B[c],e=this.B[c]<b;this.w!=this.A[c]&&(d||e)&&L(this,c)}M(this,a)}jb(a){for(let a=0;a<this.A.length;a++){var b=a;this.P[b]=0;L(this,b)}M(this,a)}Ta(){var a=Date.now();let b=-1;for(var c=0;c<this.A.length;c++)if(!this.P[c])this.B[c]&&this.B[c]<a&&L(this,c);else if(-1==b||this.P[c]>this.P[b])b=c;if(-1!=b){var d=0;for(c=0;c<this.A.length;c++)!this.P[c]&&this.ea[c]&&(d=Math.max(d,this.B[c]-a));if(2>d){a=b;let d=this.A[a];for(let b=0;b<this.A.length;b++)b!=a&&(c=b,this.P[c]=0,L(this,c));this.P[a]=0;this.B[a]=0;this.w=d;d.acceptStart()}else this.ra.schedule(d)}}}class N{constructor(a,b){this.rb=a;this.pa=b}getType(){return this.rb}signalReady(a){var b=this.pa;if(b.w)this.acceptCancel();else{var c=Date.now();for(let d=0;d<b.A.length;d++)b.A[d]==this&&(b.P[d]=c+a,b.B[d]=0);b.Ka=!0}}signalPending(a){var b=this.pa;if(b.w)this.acceptCancel();else{var c=Date.now();for(let d=0;d<b.A.length;d++)b.A[d]==this&&(b.B[d]=c+a)}}signalEnd(){var a=this.pa;a.w==this&&(a.w=null,a.wa=!0)}signalEmit(a,b){{let c=this.pa.ja[this.getType()];c&&c.fire(new Da(this.getType(),a,Date.now(),b))}}acceptStart(){}acceptCancel(){}onTouchStart(){return!1}onTouchMove(){return!1}onTouchEnd(){}}function Ga(){}let Ha=Math.round(-16.67/Math.log(.95));function O(a,b,c){1>b&&(b=1);let d=.5+Math.min(b/33.34,.5);return a/b*d+c*(1-d)}function Ia(a,b,c,d,e,f){return new Ja(a,b,c,d,e,f,void 0).start()}class Ja{constructor(a,b,c,d,e,f,g){this.$=g||E(self,"vsync");this.X=a;this.xa=f;this.h=b;this.j=c;this.Ca=d;this.Da=e;this.L=this.K=0;a=new m;this.ka=a.promise;this.Ma=a.resolve;this.La=a.reject;this.ga=!1}start(){this.ga=!0;if(.02>=Math.abs(this.Ca)&&.02>=Math.abs(this.Da))this.xa(this.h,this.j),this.ya(!0);else{this.K=this.Ca;this.L=this.Da;let a=this.pb.bind(this),b=this.ya.bind(this,!0);this.$.runAnimMutateSeries(this.X,a,5e3).then(b,b)}return this}halt(){this.ga&&this.ya(!1)}then(a,b){return a||b?this.ka.then(a,b):this.ka}thenAlways(a){a=a||Ga;return this.then(a,a)}pb(a,b){if(!this.ga)return!1;this.h+=b*this.K;this.j+=b*this.L;if(!this.xa(this.h,this.j))return!1;let c=Math.exp(-a/Ha);this.K=this.Ca*c;this.L=this.Da*c;return.02<Math.abs(this.K)||.02<Math.abs(this.L)}ya(a){this.ga&&(this.ga=!1,this.xa(this.h,this.j),a?this.Ma():this.La())}}class Ka extends N{constructor(a){super("tap",a);this.j=this.h=this.l=this.o=0;this.Ya=null}onTouchStart(a){let b=a.touches;this.Ya=a.target;return b&&1==b.length?(this.o=b[0].clientX,this.l=b[0].clientY,!0):!1}onTouchMove(a){return(a=a.changedTouches||a.touches)&&1==a.length&&(this.h=a[0].clientX,this.j=a[0].clientY,a=8<=Math.abs(this.j-this.l),8<=Math.abs(this.h-this.o)||a)?!1:!0}onTouchEnd(){this.signalReady(0)}acceptStart(){this.signalEmit({clientX:this.h,clientY:this.j,target:this.Ya},null);this.signalEnd()}}class La extends N{constructor(a){super("doubletap",a);this.R=this.j=this.h=this.l=this.o=0;this.Ua=null}onTouchStart(a){return 1<this.R?!1:(a=a.touches)&&1==a.length?(this.o=a[0].clientX,this.l=a[0].clientY,this.h=a[0].clientX,this.j=a[0].clientY,!0):!1}onTouchMove(a){return(a=a.touches)&&1==a.length?(this.h=a[0].clientX,this.j=a[0].clientY,a=8<=Math.abs(this.j-this.l),8<=Math.abs(this.h-this.o)||a?(this.acceptCancel(),!1):!0):!1}onTouchEnd(a){this.R++;2>this.R?this.signalPending(200):(this.Ua=a,this.signalReady(0))}acceptStart(){this.R=0;this.signalEmit({clientX:this.h,clientY:this.j},this.Ua);this.signalEnd()}acceptCancel(){this.R=0}}class Ma extends N{constructor(a,b,c,d){super(a,b);this.Va=c;this.ab=d;this.w=!1;this.L=this.K=this.W=this.S=this.ta=this.ba=this.aa=this.j=this.h=this.l=this.o=0}onTouchStart(a){a=a.touches;return this.w&&a&&1<a.length?!0:a&&1==a.length?(this.ta=Date.now(),this.o=a[0].clientX,this.l=a[0].clientY,!0):!1}onTouchMove(a){var b=a.touches;if(b&&1<=b.length){let{clientX:c,clientY:d}=b[0];this.h=c;this.j=d;if(this.w)this.Y(!1,!1,a);else if(a=Math.abs(c-this.o),b=Math.abs(d-this.l),this.Va&&this.ab)(8<=a||8<=b)&&this.signalReady(-10);else if(this.Va){if(8<=a&&a>b)this.signalReady(-10);else if(8<=b)return!1}else if(this.ab){if(8<=b&&b>a)this.signalReady(-10);else if(8<=a)return!1}else return!1;return!0}return!1}onTouchEnd(a){let b=a.touches;b&&0==b.length&&this.za(a)}acceptStart(){this.w=!0;this.aa=this.o;this.ba=this.l;this.W=this.ta;this.o=this.h;this.l=this.j;this.Y(!0,!1,null)}acceptCancel(){this.w=!1}Y(a,b,c){this.S=Date.now();let d=this.S-this.W;if(!b&&4<d||b&&16<d){let a=O(this.h-this.aa,d,this.K),c=O(this.j-this.ba,d,this.L);if(!b||32<d||0!=a||0!=c)this.K=1e-4<Math.abs(a)?a:0,this.L=1e-4<Math.abs(c)?c:0;this.aa=this.h;this.ba=this.j;this.W=this.S}this.signalEmit({first:a,last:b,time:this.S,deltaX:this.h-this.o,deltaY:this.j-this.l,startX:this.o,startY:this.l,lastX:this.h,lastY:this.j,velocityX:this.K,velocityY:this.L},c)}za(a){this.w&&(this.w=!1,this.Y(!1,!0,a),this.signalEnd())}}class Na extends Ma{constructor(a){super("swipe-xy",a,!0,!0)}}class Oa extends N{constructor(a){super("tapzoom",a);this.w=!1;this.L=this.K=this.W=this.S=this.ba=this.aa=this.R=this.j=this.h=this.l=this.o=0}onTouchStart(a){return this.w?!1:(a=a.touches)&&1==a.length?(this.o=a[0].clientX,this.l=a[0].clientY,!0):!1}onTouchMove(a){let b=a.touches;if(b&&1==b.length){this.h=b[0].clientX;this.j=b[0].clientY;if(this.w)this.Y(!1,!1,a);else if(a=8<=Math.abs(this.j-this.l),8<=Math.abs(this.h-this.o)||a){if(0==this.R)return this.acceptCancel(),!1;this.signalReady(0)}return!0}return!1}onTouchEnd(a){this.w?this.za(a):(this.R++,1==this.R?this.signalPending(400):this.acceptCancel())}acceptStart(){this.R=0;this.w=!0;this.Y(!0,!1,null)}acceptCancel(){this.R=0;this.w=!1}Y(a,b,c){this.S=Date.now();a?this.K=this.L=0:2<this.S-this.W&&(this.K=O(this.h-this.aa,this.S-this.W,this.K),this.L=O(this.j-this.ba,this.S-this.W,this.L));this.aa=this.h;this.ba=this.j;this.W=this.S;this.signalEmit({first:a,last:b,centerClientX:this.o,centerClientY:this.l,deltaX:this.h-this.o,deltaY:this.j-this.l,velocityX:this.K,velocityY:this.L},c)}za(a){this.w&&(this.w=!1,this.Y(!1,!0,a),this.signalEnd())}}function P(a,b,c){return Math.min(Math.max(a,b),c)}function Pa(a,b){return Math.sqrt(a*a+b*b)}function Q(a){var b;(b=a.complete||"complete"==a.readyState)||(b=("AUDIO"===a.tagName||"VIDEO"===a.tagName)&&0<a.readyState);return!!(b||a.document&&"complete"==a.document.readyState)}function R(a,b,c,d){return{left:a,top:b,width:c,height:d,bottom:b+d,right:a+c,x:a,y:b}}function S(a){return R(Number(a.left),Number(a.top),Number(a.width),Number(a.height))}let Qa=/(\S+)(?:\s+(?:(-?\d+(?:\.\d+)?)([a-zA-Z]*)))?\s*(?:,|$)/g;function Ra(a){let b=a.getAttribute("srcset");if(b){{a=[];let d;for(;d=Qa.exec(b);){let b=d[1];let e;if(d[2]){let a=d[3].toLowerCase();if("w"==a)var c=parseInt(d[2],10);else if("x"==a)e=parseFloat(d[2]);else continue}else e=1;a.push({url:b,width:c,dpr:e})}c=new Sa(a)}return c}let d=v(a.getAttribute("src"),'Either non-empty "srcset" or "src" attribute must be specified: %s',a);return new Sa([{url:d,width:void 0,dpr:1}])}class Sa{constructor(a){v(0<a.length,"Srcset must have at least one source");this.na=a;let b=!1,c=!1;for(let d=0;d<a.length;d++){let e=a[d];b=b||!!e.width;c=c||!!e.dpr}v(!!(b^c),"Srcset must have width or dpr sources, but not both");a.sort(b?Ta:Ua);this.bb=b}select(a,b){if(this.bb){b*=a;a=this.na;var c=0,d=1/0,e=1/0;for(var f=0;f<a.length;f++){let g=a[f].width,h=Math.abs(g-b);if(h<=1.1*d||1.2<b/e)c=f,d=h,e=g;else break}b=c}else{a=this.na;c=0;d=1/0;for(e=0;e<a.length;e++)if(f=Math.abs(a[e].dpr-b),f<=d)c=e,d=f;else break;b=c}return this.na[b].url}getUrls(){return this.na.map(a=>a.url)}stringify(a){let b=[],c=this.na;for(let d=0;d<c.length;d++){let e=c[d];let f=e.url;a&&(f=a(f));f=this.bb?f+` ${e.width}w`:f+` ${e.dpr}x`;b.push(f)}return b.join(", ")}}function Ta(a,b){v(a.width!=b.width,"Duplicate width: %s",a.width);return a.width-b.width}function Ua(a,b){v(a.dpr!=b.dpr,"Duplicate dpr: %s",a.dpr);return a.dpr-b.dpr}let Va={"amp-img":!0,"amp-anim":!0},Wa=["aria-label","aria-describedby","aria-labelledby"],T=B(.4,0,.2,1),U=B(.4,0,.2,1),xa=B(.4,0,.2,1.4);function Xa(a){let b=Ea(a.D);b.onGesture(Ka,()=>{a.Ba.toggleViewMode()});b.onGesture(Na,b=>{{var c=b.data.deltaY;let d=V(a,a.o+b.data.deltaX,!0);c=W(a,a.l+c,!0);X(a,a.m,d,c,!1)}b.data.last&&Ya(a,b.data.velocityX,b.data.velocityY)});b.onPointerDown(()=>{a.V&&a.V.halt()});b.onGesture(La,b=>{Za(a,1==a.m?a.ia:a.Ga,a.C.width/2-b.data.clientX,a.C.height/2-b.data.clientY,!0).then(()=>$a(a,0,0,0,0,0,0))});b.onGesture(Oa,b=>{ab(a,b.data.centerClientX,b.data.centerClientY,b.data.deltaX,b.data.deltaY);b.data.last&&$a(a,b.data.centerClientX,b.data.centerClientY,b.data.deltaX,b.data.deltaY,b.data.velocityY,b.data.velocityY)})}function bb(a,b,c){c?(a.da=c.naturalWidth||b.offsetWidth,a.ca=c.naturalHeight||b.offsetHeight):(a.da=b.offsetWidth,a.ca=b.offsetHeight)}function Y(a,b){let c=0,d=0;let e=a.C.height-a.N.height*b;0<=e?d=c=0:(d=e/2,c=-d);let f=0,g=0;b=a.C.width-a.N.width*b;0<=b?g=f=0:(g=b/2,f=-g);a.Ha=g;a.Ia=d;a.Ea=f;a.Fa=c}function Z(a){var b=a.D;var c=a.G;var d=a.F;"number"==typeof c&&(c=`${c}px`);void 0===d?c=`translate(${c})`:("number"==typeof d&&(d=`${d}px`),c=`translate(${c}, ${d})`);A(b,{transform:c+" "+`scale(${a.m})`});1!=a.m&&a.Ba.toggleViewMode(!0)}function cb(a){if(!a.sa)return l();a.qa=Math.max(a.qa,a.m);let b=a.sa.select(a.N.width*a.qa,self.devicePixelRatio||1);return b==a.D.getAttribute("src")?l():E(a.win,"timer").promise(1).then(()=>{a.D.setAttribute("src",b);return a.ib(a.D)})}function Ya(a,b,c){let d=a.F-a.l;1==a.m&&10<Math.abs(d)?a.Ba.close():(a.V=Ia(a.D,a.G,a.F,b,c,(b,c)=>{b=V(a,b,!0);c=W(a,c,!0);if(1>Math.abs(b-a.G)&&1>Math.abs(c-a.F))return!1;X(a,a.m,b,c,!1);return!0}),a.V.thenAlways(()=>{a.V=null;return db(a)}))}function Za(a,b,c,d,e){b=P(b,a.Ga-.25,a.ia+.25);if(b!=a.m)return Y(a,b),c=V(a,a.o+c*b,!1),d=W(a,a.l+d*b,!1),X(a,b,c,d,e)}function $a(a,b,c,d,e,f,g){d=0==f&&0==g?l():Ia(a.D,d,e,f,g,(d,e)=>{ab(a,b,c,d,e);return!0}).thenAlways();let h=a.m>a.oa;return d.then(()=>db(a)).then(()=>{h&&cb(a)})}function ab(a,b,c,d,e){let f=Pa(d,e),g=Math.abs(e)>Math.abs(d)?Math.sign(e):Math.sign(-d);if(0!=g){var h=a.oa*(1+g*f/100),q=a.C.width/2-b,x=a.C.height/2-c;d=Math.min(q,f/100*q);e=Math.min(x,f/100*x);Za(a,h,d,e,!1)}}function V(a,b,c){c=c&&1<a.m?.25*a.C.width:0;return P(b,a.Ha-c,a.Ea+c)}function W(a,b,c){c=c?.25*a.C.height:0;return P(b,a.Ia-c,a.Fa+c)}function X(a,b,c,d,e){let f=b-a.m,g=Pa(c-a.G,d-a.F);let h=0;e&&(h=Math.min(250,Math.max(2.5*g,250*Math.abs(f))));if(16<h&&e){let f=D(a.m,b),g=D(a.G,c),fb=D(a.F,d);e=wa(a.D,b=>{a.m=f(b);a.G=g(b);a.F=fb(b);Z(a)},h).thenAlways(()=>{a.m=b;a.G=c;a.F=d;Z(a)})}else a.m=b,a.G=c,a.F=d,Z(a),e=e?l():void 0;return e}function db(a){let b=P(a.m,a.Ga-0,a.ia+0);b!=a.m&&Y(a,b);let c=V(a,a.G/a.m*b,!1),d=W(a,a.F/a.m*b,!1);return X(a,b,c,d,!0).then(()=>{a.oa=a.m;a.o=a.G;a.l=a.F})}class eb{constructor(a,b,c){this.Ba=a;this.win=b;this.ib=c;this.va=a.element.ownerDocument.createElement("div");this.va.classList.add("i-amphtml-image-lightbox-viewer");this.D=a.element.ownerDocument.createElement("img");this.D.classList.add("i-amphtml-image-lightbox-viewer-image");this.va.appendChild(this.D);this.sa=null;this.ca=this.da=0;this.C=R(0,0,0,0);this.N=R(0,0,0,0);this.Ga=this.qa=this.oa=this.m=1;this.ia=2;this.Fa=this.Ea=this.Ia=this.Ha=this.F=this.G=this.l=this.o=0;this.V=null;Xa(this)}getElement(){return this.va}getImage(){return this.D}getViewerBox(){return this.C}getImageBox(){return this.N}getImageBoxWithOffset(){if(0==this.G&&0==this.F)var a=this.N;else{a=this.N;var b=this.G,c=this.F;a=0==b&&0==c||0==a.width&&0==a.height?a:R(a.left+b,a.top+c,a.width,a.height)}return a}reset(){this.D.setAttribute("src","");Wa.forEach(a=>{this.D.removeAttribute(a)});this.D.removeAttribute("aria-describedby");this.sa=null;this.N=R(0,0,0,0);this.ca=this.da=0;this.oa=this.m=this.qa=1;this.ia=2;this.Fa=this.Ea=this.Ia=this.Ha=this.F=this.G=this.l=this.o=0;this.V&&this.V.halt();this.V=null}init(a,b){bb(this,a,b);this.sa=Ra(a);a.getImpl().then(a=>{a.propagateAttributes(Wa,this.D)});b&&Q(b)&&b.src&&this.D.setAttribute("src",b.src)}measure(){this.C=S(this.va.getBoundingClientRect());let a=this.da/this.ca;let b=Math.min(this.C.width/a,this.C.height),c=Math.min(this.C.height*a,this.C.width);16>=Math.abs(c-this.da)&&16>=Math.abs(b-this.ca)&&(c=this.da,b=this.ca);this.N=R(Math.round((this.C.width-c)/2),Math.round((this.C.height-b)/2),Math.round(c),Math.round(b));A(this.D,{top:`${this.N.top}px`,left:`${this.N.left}px`,width:`${this.N.width}px`,height:`${this.N.height}px`});let d=this.C.width/this.C.height;this.ia=Math.max(2,Math.max(d/a,a/d));this.oa=this.m=1;this.l=this.F=this.o=this.G=0;Y(this,this.m);Z(this);return cb(this)}}function gb(a,b){a.fa||(hb(a),b=b.caller,v(b&&Va[b.tagName.toLowerCase()],"Unsupported element: %s",b.tagName),a.fa=!0,ib(a),jb(a,b),a.win.document.documentElement.addEventListener("keydown",a.Na),a.getViewport().enterLightboxMode(),kb(a),a.ua=a.getViewport().onChanged(()=>{a.fa&&(y(E(a.win,"platform").getIosVersionString(),"10.3")?E(a.win,"timer").delay(()=>{a.O.measure()},500):a.O.measure())}),ta(a.getAmpDoc()).push(a.close.bind(a)).then(b=>{a.Aa=b}))}function hb(a){if(!a.J){a.J=a.element.ownerDocument.createElement("div");a.J.classList.add("i-amphtml-image-lightbox-container");a.element.appendChild(a.J);a.O=new eb(a,a.win,a.loadPromise.bind(a));a.J.appendChild(a.O.getElement());a.T=a.element.ownerDocument.createElement("div");a.T.setAttribute("id",a.element.getAttribute("id")+"-caption");a.T.classList.add("amp-image-lightbox-caption");a.T.classList.add("i-amphtml-image-lightbox-caption");a.J.appendChild(a.T);var b=a.element.ownerDocument.createElement("button"),c=a.element.getAttribute("data-close-button-aria-label")||"Close the lightbox";b.textContent=c;b.classList.add("i-amphtml-screen-reader");b.tabIndex=-1;b.addEventListener("click",()=>{a.close()});a.element.appendChild(b);var d=Ea(a.element);a.element.addEventListener("click",b=>{a.ha||a.O.getImage().contains(b.target)||a.close()});d.onGesture(Ka,()=>{a.ha||a.close()});d.onGesture(Na,()=>{})}}function ib(a){a.O.reset();for(var b=a.T;b.firstChild;)b.removeChild(b.firstChild);a.ma=null;a.I=null;a.toggleViewMode(!1)}function jb(a,b){a.ma=b;/^[\w-]+$/.test("img");if(void 0!==w)var c=w;else{try{var d=b.ownerDocument;let a=d.createElement("div"),e=d.createElement("div");a.appendChild(e);c=a.querySelector(":scope div")===e}catch(g){c=!1}c=w=c}c?c=b.querySelector("> img".replace(/^|,/g,"$&:scope ")):(b.classList.add("i-amphtml-scoped"),c="> img".replace(/^|,/g,"$&.i-amphtml-scoped "),c=b.querySelectorAll(c),b.classList.remove("i-amphtml-scoped"),c=void 0===c[0]?null:c[0]);a.I=c;a.O.init(a.ma,a.I);let e=null;let f=da(b);f&&(/^[\w-]+$/.test("figcaption"),e=f.querySelector("figcaption"));if(!e){let c=b.getAttribute("aria-describedby");e=a.element.ownerDocument.getElementById(c)}if(e){d=e;b=a.T;c=b.ownerDocument.createDocumentFragment();for(d=d.firstChild;d;d=d.nextSibling)c.appendChild(d.cloneNode(!0));b.appendChild(c);a.O.getImage().setAttribute("aria-describedby",a.T.getAttribute("id"))}a.T.classList.toggle("i-amphtml-empty",!e)}function kb(a){a.ha=!0;ha(a.element);A(a.element,{opacity:0});a.O.measure();let b=new I(a.element);b.add(0,C(a.element,{opacity:D(0,1)}),.6,T);let c=null;if(a.I&&Q(a.I)&&a.I.src){c=a.element.ownerDocument.createElement("div");c.classList.add("i-amphtml-image-lightbox-trans");a.getAmpDoc().getBody().appendChild(c);let d=S(a.I.getBoundingClientRect()),e=a.O.getImageBox(),f=a.I.cloneNode(!0);f.className="";A(f,{position:"absolute",top:`${d.top}px`,left:`${d.left}px`,width:`${d.width}px`,height:`${d.height}px`,transformOrigin:"top left",willChange:"transform"});c.appendChild(f);a.I.classList.add("i-amphtml-ghost");let g=e.left-d.left,h=e.top-d.top,q=0!=d.width?e.width/d.width:1,x=P(Math.abs(h)/250*.8,.2,.8);b.add(0,C(f,{transform:pa([qa(D(0,g),D(0,h)),ra(D(1,q))])}),x,T);A(a.J,{opacity:0});b.add(.8,C(a.J,{opacity:D(0,1)}),.1,T);b.add(.9,C(c,{opacity:D(1,.01)}),.1,U)}b.start(500).thenAlways(()=>{a.ha=!1;A(a.element,{opacity:""});A(a.J,{opacity:""});c&&a.getAmpDoc().getBody().removeChild(c)})}function lb(a){var b=a.O.getImage(),c=a.O.getImageBoxWithOffset();let d=new I(a.element);let e=500;d.add(0,C(a.element,{opacity:D(1,0)}),.9,U);let f=null;if(Q(b)&&b.src&&a.I){f=a.element.ownerDocument.createElement("div");f.classList.add("i-amphtml-image-lightbox-trans");a.getAmpDoc().getBody().appendChild(f);let g=S(a.I.getBoundingClientRect()),h=b.cloneNode(!0);A(h,{position:"absolute",top:`${c.top}px`,left:`${c.left}px`,width:`${c.width}px`,height:`${c.height}px`,transform:"",transformOrigin:"top left",willChange:"transform"});f.appendChild(h);d.add(0,C(a.J,{opacity:D(1,0)}),.1,U);b=g.top-c.top;let q=0!=c.width?g.width/c.width:1,x=C(h,{transform:pa([qa(D(0,g.left-c.left),D(0,b)),ra(D(1,q))])});c=P(Math.abs(b)/250*.8,.2,.8);d.add(Math.min(.8-c,.2),(b,c)=>{x(b);c&&a.I.classList.remove("i-amphtml-ghost")},c,U);d.add(.8,C(f,{opacity:D(1,.01)}),.2,U);e=P(Math.abs(b)/250*e,300,e)}d.start(e).thenAlways(()=>{a.I&&a.I.classList.remove("i-amphtml-ghost");a.collapse();A(a.element,{opacity:""});A(a.J,{opacity:""});f&&a.getAmpDoc().getBody().removeChild(f);ib(a)})}class mb extends AMP.BaseElement{constructor(a){super(a);this.Aa=-1;this.ha=this.fa=!1;this.T=this.O=this.J=this.ua=this.I=this.ma=null;this.Na=this.eb.bind(this);this.registerDefaultAction(a=>gb(this,a),"open")}buildCallback(){{var a=this.element;let h=a.ownerDocument.defaultView;var b=h.__AMP_TOP||(h.__AMP_TOP=h);let q=h!=b;var c=b;if(c.__AMP__EXPERIMENT_TOGGLES)b=c.__AMP__EXPERIMENT_TOGGLES;else{c.__AMP__EXPERIMENT_TOGGLES=Object.create(null);b=c.__AMP__EXPERIMENT_TOGGLES;if(c.AMP_CONFIG)for(var d in c.AMP_CONFIG){var e=c.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(b[d]=Math.random()<e)}if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-doc-opt-in"])&&0<c.AMP_CONFIG["allow-doc-opt-in"].length&&(d=c.AMP_CONFIG["allow-doc-opt-in"],e=c.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){e=e.getAttribute("content").split(",");for(var f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(b[e[f]]=!0)}Object.assign(b,sa(c));if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-url-opt-in"])&&0<c.AMP_CONFIG["allow-url-opt-in"].length){d=c.AMP_CONFIG["allow-url-opt-in"];c=c.location.originalHash||c.location.hash;e=Object.create(null);if(c)for(var g;g=aa.exec(c);)f=n(g[1],g[1]),g=g[2]?n(g[2].replace(/\+/g," "),g[2]):"",e[f]=g;c=e;for(e=0;e<d.length;e++)f=c[`e-${d[e]}`],"1"==f&&(b[d[e]]=!0),"0"==f&&(b[d[e]]=!1)}}b=!!b["ampdoc-fie"];q&&!b?a=H(h,"action")?F(h,"action"):null:(a=G(a),a=ua(a),a=H(a,"action")?F(a,"action"):null)}a.addToAllowlist("AMP-IMAGE-LIGHTBOX","open",["email"])}eb(a){"Escape"==a.key&&(a.preventDefault(),this.close())}close(){if(this.fa&&(this.ha=this.fa=!1,lb(this),this.ua&&(this.ua(),this.ua=null),this.getViewport().leaveLightboxMode(),-1!=this.Aa&&ta(this.getAmpDoc()).pop(this.Aa),this.win.document.documentElement.removeEventListener("keydown",this.Na),this.ma))try{this.ma.focus()}catch(a){}}toggleViewMode(a){void 0!==a?this.J.classList.toggle("i-amphtml-image-lightbox-view-mode",a):this.J.classList.toggle("i-amphtml-image-lightbox-view-mode")}}(a=>{a.registerElement("amp-image-lightbox",mb,"amp-image-lightbox{position:fixed!important;top:0!important;left:0!important;bottom:0!important;right:0!important;margin:0!important;padding:0!important;overflow:hidden!important;transform:translateZ(0)!important;-ms-touch-action:none!important;touch-action:none!important;z-index:1000;background:rgba(0,0,0,0.95);color:#f2f2f2}.i-amphtml-image-lightbox-container{position:absolute;z-index:0;top:0;left:0;right:0;bottom:0;overflow:hidden;transform:translateZ(0)}.i-amphtml-image-lightbox-trans{pointer-events:none!important;position:fixed;z-index:1001;top:0;left:0;bottom:0;right:0}.i-amphtml-image-lightbox-caption{position:absolute!important;z-index:2;bottom:0!important;left:0!important;right:0!important}.i-amphtml-image-lightbox-caption.i-amphtml-empty,.i-amphtml-image-lightbox-view-mode .i-amphtml-image-lightbox-caption{visibility:hidden}.amp-image-lightbox-caption{background:rgba(0,0,0,0.5);max-height:25%;padding:8px}.i-amphtml-image-lightbox-viewer{position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;overflow:hidden;transform:translateZ(0)}.i-amphtml-image-lightbox-viewer-image{position:absolute;z-index:1;display:block;transform-origin:50% 50%}\n/*# sourceURL=/extensions/amp-image-lightbox/0.1/amp-image-lightbox.css*/")})(self.AMP)}});