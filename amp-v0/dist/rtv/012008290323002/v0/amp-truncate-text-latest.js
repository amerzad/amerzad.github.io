(self.AMP=self.AMP||[]).push({n:"amp-truncate-text",v:"2008290323002",f:(function(AMP,_){
'use strict';var l="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b};function m(a){for(var b=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global],c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return}(function(){throw Error("Cannot find global object");})()}m(this);"function"===typeof Symbol&&Symbol("x");var n;
if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var p;a:{var r={a:!0},t={};try{t.__proto__=r;p=t.a;break a}catch(a){}p=!1}n=p?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var u=n;function v(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var w=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function x(a){return a?Array.prototype.slice.call(a):[]};var y=self.AMP_CONFIG||{},z=("string"==typeof y.cdnProxyRegex?new RegExp(y.cdnProxyRegex):y.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function A(a){if(self.document&&self.document.head&&(!self.location||!z.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}y.cdnUrl||A("runtime-host");y.geoApiUrl||A("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var B=self.__AMP_LOG;function C(a){return a.trimEnd?a.trimEnd():("_"+a).trim().slice(1)};(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0});function D(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);var b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){var d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){var e=a.AMP_CONFIG["allow-doc-opt-in"],f=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');
if(f){var h=f.getAttribute("content").split(",");for(c=0;c<h.length;c++)-1!=e.indexOf(h[c])&&(b[h[c]]=!0)}}Object.assign(b,E(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];var g=a.location.originalHash||a.location.hash;a=Object.create(null);if(g)for(var k;k=w.exec(g);){var q=v(k[1],k[1]);k=k[2]?v(k[2].replace(/\+/g," "),k[2]):"";a[q]=k}for(g=0;g<c.length;g++)q=a["e-"+c[g]],"1"==q&&(b[c[g]]=!0),"0"==
q&&(b[c[g]]=!1)}return b}function E(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){if(B.dev)a=B.dev;else throw Error("failed to call initLogConstructor");a.warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};function F(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=G(b,"ampdoc").getAmpDoc(a)}return a}function G(a,b){H(a,b);var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});a=c[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function H(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function I(a,b){for(;a&&void 0!==a;a=a.parentElement)if(b(a))return a;return null}function J(a){return a.closest?a.closest("a[href]"):I(a,function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return b?b.call(a,"a[href]"):!1})}function K(a,b){for(var c=a.length,d=0;d<c;d++)b(a[d],d)};var L;function M(a){a=a.ownerDocument||a;L&&L.ownerDocument===a||(L=a.createElement("div"));return N}function N(a){var b=L;b.innerHTML=a[0];a=b.firstElementChild;b.removeChild(a);return a};function aa(a,b){var c=1,d=1;c=void 0===c?0:c;d=void 0===d?1:d;var e=0,f=a-1,h=NaN;for(a=NaN;f>=e;){var g=e+Math.floor((f-e)/2),k=b(g);if(0<k||0==k&&1==c)h=2==d?g:h,a=0==k?g:a,e=g+1;else if(0>k||0==k&&2==c)h=1==d?g:h,a=0==k?g:a,f=g-1;else{a=g;break}}return isNaN(a)?-((isNaN(h)?1==d?e:f:h)+1):a};function O(a,b){var c="slot"==a.localName?a.assignedNodes({flatten:!0}):a.childNodes;for(a=0;a<c.length;a++)b(c[a])}function P(a){var b=a.__AMP_TRUNCATE_TEXT_DATA;b&&b.modifiedText==a.data&&(a.data=b.originalText);a.nodeType==Node.ELEMENT_NODE&&a.removeAttribute("i-amphtml-truncate-child-overflow");O(a,function(a){return P(a)})}function Q(a,b,c){a.__AMP_TRUNCATE_TEXT_DATA={originalText:b,modifiedText:c};a.data=c}
function R(a,b,c){c=void 0===c?[]:c;if(!b(a))return c;c.push(a);O(a,function(a){return R(a,b,c)});return c}function ba(a,b,c){for(var d=R(a,function(a){return!c.includes(a)}),e=d.length-1;0<=e;e--){var f=d[e];f.nodeType==Node.ELEMENT_NODE&&f.setAttribute("i-amphtml-truncate-child-overflow","");if(f.nodeType==Node.TEXT_NODE&&ca(f,a,b))break}}
function ca(a,b,c){var d=document.createRange();d.selectNode(a);var e=d.getBoundingClientRect(),f=a.data;if(e.height)if(e.top>c.bottom)Q(a,f,"");else{var h=aa(f.length,function(c){for(;!f[c].trim()&&0<c;)c--;a.data=f.slice(0,c+1)+"\u2026 ";return-(b.scrollHeight-b.offsetHeight)}),g=C(f.slice(0,0<=h?h+1:-(h+1)));Q(a,f,g?g+"\u2026 ":"");return!!g}};var da=["<div class=i-amphtml-truncate-content><span class=i-amphtml-default-slot></span> <span class=i-amphtml-truncate-collapsed-slot name=collapsed></span> <span class=i-amphtml-truncate-expanded-slot name=expanded></span> <span class=i-amphtml-truncate-persistent-slot name=persistent></span></div>"],ea=["<div class=content><slot></slot><slot class=collapsed-slot name=collapsed></slot><slot class=expanded-slot name=expanded></slot><slot class=persistent-slot name=persistent></slot></div>"];
function S(a){var b=AMP.BaseElement.call(this,a)||this;b.h=null;b.j=null;b.l=null;b.o=null;b.m=!1;b.w=new b.win.MutationObserver(function(){T(b)});return b}var U=AMP.BaseElement;S.prototype=l(U.prototype);S.prototype.constructor=S;if(u)u(S,U);else for(var V in U)if("prototype"!=V)if(Object.defineProperties){var W=Object.getOwnPropertyDescriptor(U,V);W&&Object.defineProperty(S,V,W)}else S[V]=U[V];S.A=U.prototype;
function fa(a){a.registerAction("expand",function(){return X(a)});a.registerAction("collapse",function(){return Y(a)})}S.prototype.buildCallback=function(){var a=this;(this.m=!!this.element.attachShadow&&!!D(this.win)["amp-truncate-text-shadow"])?ha(this):ia(this);fa(this);this.j.addEventListener("click",function(b){Z(a,b,!0)});this.l.addEventListener("click",function(b){Z(a,b,!1)})};
function ia(a){a.h=M(a.element)(da);var b=a.h.querySelector(".i-amphtml-default-slot");a.j=a.h.querySelector(".i-amphtml-truncate-collapsed-slot");a.l=a.h.querySelector(".i-amphtml-truncate-expanded-slot");a.o=a.h.querySelector(".i-amphtml-truncate-persistent-slot");K(a.element.querySelectorAll('[slot="collapsed"]'),function(b){a.j.appendChild(b)});K(a.element.querySelectorAll('[slot="expanded"]'),function(b){a.l.appendChild(b)});K(a.element.querySelectorAll('[slot="persistent"]'),function(b){a.o.appendChild(b)});
a.getRealChildNodes().forEach(function(a){b.appendChild(a)});a.element.appendChild(a.h)}
function ha(a){var b=M(a.element),c=a.element;b=b(ea);var d=c.querySelector("i-amphtml-sizer");d&&d.setAttribute("slot","i-amphtml-sizer");c=c.attachShadow({mode:"open"});d=document.createElement("style");d.textContent=":host{padding:0!important;border:none!important}:host([i-amphtml-truncate-expanded]){height:auto!important}:host([i-amphtml-truncate-expanded]) ::slotted(i-amphtml-sizer){display:none!important}:host([i-amphtml-truncate-expanded]) .content{position:static}:host(:not([i-amphtml-truncate-expanded])) .expanded-slot{display:none}.content{position:absolute;top:0;left:0;bottom:0;right:0}.expand-slot::slotted(*){margin:0!important;white-space:nowrap!important}:host(:not([i-amphtml-truncate-overflow])) .collapsed-slot{display:none}::slotted([i-amphtml-truncate-child-overflow]){display:none!important}\n/*# sourceURL=/extensions/amp-truncate-text/0.1/amp-truncate-text-shadow.css*/";var e=
document.createElement("slot");e.setAttribute("name","i-amphtml-sizer");c.appendChild(d);c.appendChild(e);c.appendChild(b);a.h=null;a.j=c.querySelector(".collapsed-slot");a.l=c.querySelector(".expanded-slot");a.o=c.querySelector(".persistent-slot")}S.prototype.layoutCallback=function(){var a=this;return this.mutateElement(function(){T(a)})};S.prototype.firstAttachedCallback=function(){this.w.observe(this.element,{attributes:!0,characterData:!0,childList:!0,subtree:!0})};
S.prototype.isRelayoutNeeded=function(){return!0};S.prototype.isLayoutSupported=function(){return!0};
function T(a){var b=a.m?a.element:a.h;var c=a.m?x(a.element.querySelectorAll('[slot="persistent"], [slot="collapsed"]')):x(a.element.querySelectorAll(".i-amphtml-truncate-persistent-slot, .i-amphtml-truncate-collapsed-slot"));b={container:b,overflowNodes:c};c=void 0===b?{}:b;b=c.container;c=c.overflowNodes;b.__AMP_TRUNCATE_TRUNCATED&&(b.__AMP_TRUNCATE_TRUNCATED=!1,b.removeAttribute("i-amphtml-truncate-overflow"),P(b));if(!(0>=b.scrollHeight-b.offsetHeight)){var d=b.getBoundingClientRect();b.__AMP_TRUNCATE_TRUNCATED=
!0;b.setAttribute("i-amphtml-truncate-overflow","");ba(b,d,c)}a.w.takeRecords()}function Z(a,b,c){b=b.target;var d=a.element,e=d.ownerDocument.defaultView,f=e.__AMP_TOP||(e.__AMP_TOP=e),h=e!=f;f=!!D(f)["ampdoc-fie"];h&&!f?d=H(e,"action")?G(e,"action"):null:(d=F(d),d=F(d),d=d.isSingleDoc()?d.win:d,d=H(d,"action")?G(d,"action"):null);d.hasAction(b,"tap")||J(b)||(c?X(a):Y(a))}function X(a){a.element.setAttribute("i-amphtml-truncate-expanded","")}
function Y(a){a.element.removeAttribute("i-amphtml-truncate-expanded")}(function(a){a.registerElement("amp-truncate-text",S,"amp-truncate-text{padding:0!important;border:none!important}amp-truncate-text[i-amphtml-truncate-expanded]{height:auto!important}amp-truncate-text[i-amphtml-truncate-expanded]>i-amphtml-sizer{display:none!important}amp-truncate-text[i-amphtml-truncate-expanded] .i-amphtml-truncate-content{position:static!important}amp-truncate-text:not([i-amphtml-truncate-expanded]) .i-amphtml-truncate-expanded-slot{display:none!important}.i-amphtml-truncate-content{position:absolute!important;top:0!important;left:0!important;bottom:0!important;right:0!important}.i-amphtml-truncate-content [slot=expand]{margin:0!important;white-space:nowrap!important}.i-amphtml-truncate-content:not([i-amphtml-truncate-overflow]) .i-amphtml-truncate-collapsed-slot,[i-amphtml-truncate-child-overflow]{display:none!important}\n/*# sourceURL=/extensions/amp-truncate-text/0.1/amp-truncate-text.css*/")})(self.AMP);
})});

//# sourceMappingURL=amp-truncate-text-0.1.js.map
