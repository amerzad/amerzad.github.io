(self.AMP=self.AMP||[]).push({n:"amp-access",v:"2008290323002",f:function(AMP,_){let aa;function k(){return aa?aa:aa=Promise.resolve(void 0)}class u{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c;b=d});this.resolve=a;this.reject=b}}function da(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let ea=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function fa(a){let b=Object.create(null);if(!a)return b;let c;for(;c=ea.exec(a);){let a=da(c[1],c[1]),e=c[2]?da(c[2].replace(/\+/g," "),c[2]):"";b[a]=e}return b}let ha=Object.prototype.toString;let v=self.AMP_CONFIG||{},ia=("string"==typeof v.cdnProxyRegex?new RegExp(v.cdnProxyRegex):v.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function ja(a){if(!self.document||!self.document.head||self.location&&ia.test(self.location.origin))return null;let b=self.document.head.querySelector(`meta[name="${a}"]`);return b&&b.getAttribute("content")||null}let ka={thirdParty:v.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:v.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof v.thirdPartyFrameRegex?new RegExp(v.thirdPartyFrameRegex):v.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:v.cdnUrl||ja("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:ia,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:v.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:v.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:v.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:v.geoApiUrl||ja("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let w=self.__AMP_LOG;function y(){if(!w.user)throw Error("failed to call initLogConstructor");return w.user}function z(){if(w.dev)return w.dev;throw Error("failed to call initLogConstructor")}function A(a,b,c,d,e){return y().assert(a,b,c,d,e,void 0,void 0,void 0,void 0,void 0,void 0)}let la=Object.prototype.hasOwnProperty;function D(a){return a||{}}class ma{constructor(a){this.Va=a;this.ma=this.xa=0;this.$=Object.create(null)}has(a){return!!this.$[a]}get(a){let b=this.$[a];if(b)return b.access=++this.ma,b.payload}put(a,b){this.has(a)||this.xa++;this.$[a]={payload:b,access:this.ma};if(!(this.xa<=this.Va)){a=this.$;var c=this.ma+1;for(let b in a){let{access:e}=a[b];if(e<c){c=e;var d=b}}void 0!==d&&(delete a[d],this.xa--)}}}let na=D({c:!0,v:!0,a:!0,ad:!0});let oa,pa;let qa=/[?&]amp_js[^&]*/,ra=/[?&]amp_gsa[^&]*/,sa=/[?&]amp_r[^&]*/,ta=/[?&]amp_kit[^&]*/,ua=/[?&]usqp[^&]*/;function G(a){oa||(oa=self.document.createElement("a"),pa=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new ma(100)));var b=pa,c=oa;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function va(a){let b=[];for(let d in a){let e=a[d];if(null!=e)if(Array.isArray(e))for(var c=0;c<e.length;c++){let a=e[c];b.push(`${encodeURIComponent(d)}=${encodeURIComponent(a)}`)}else c=e,b.push(`${encodeURIComponent(d)}=${encodeURIComponent(c)}`)}return b.join("&")}function J(a,b){A(null!=a,"%s %s must be available",b,"source");var c=a;"string"==typeof c&&(c=G(c));var d;(d="https:"==c.protocol||"localhost"==c.hostname||"127.0.0.1"==c.hostname)||(c=c.hostname,d=c.length-10,d=0<=d&&c.indexOf(".localhost",d)==d);A(d||/^(\/\/)/.test(a),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',b,"source",a)}function K(a){let b=a.indexOf("#");return-1==b?a:a.substring(0,b)}function L(a){"string"==typeof a&&(a=G(a));return ka.cdnProxyRegex.test(a.origin)}function wa(a){"string"==typeof a&&(a=G(a));if(!L(a))return a.href;var b=a.pathname.split("/");A(na[b[1]],"Unknown path prefix in url %s",a.href);let c=b[2];var d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);A(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(qa,"").replace(ra,"").replace(sa,"").replace(ta,"").replace(ua,"").replace(/^[?&]/,""))?"?"+d:"":"";return b+d+(a.hash||"")}function M(a){if(a.__AMP__EXPERIMENT_TOGGLES)return a.__AMP__EXPERIMENT_TOGGLES;a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);let b=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var c in a.AMP_CONFIG){let d=a.AMP_CONFIG[c];"number"===typeof d&&0<=d&&1>=d&&(b[c]=Math.random()<d)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length){let d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(e){let a=e.getAttribute("content").split(",");for(c=0;c<a.length;c++)-1!=d.indexOf(a[c])&&(b[a[c]]=!0)}}Object.assign(b,xa(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){c=a.AMP_CONFIG["allow-url-opt-in"];a=fa(a.location.originalHash||a.location.hash);for(let d=0;d<c.length;d++){let e=a[`e-${c[d]}`];"1"==e&&(b[c[d]]=!0);"0"==e&&(b[c[d]]=!1)}}return b}function xa(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(d){}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}function ya(a,b){let c=a.ownerDocument.defaultView,d=c.__AMP_TOP||(c.__AMP_TOP=c),e=c!=d,f=!!M(d)["ampdoc-fie"];e&&!f?b=N(c,b)?O(c,b):null:(a=R(a),a=S(a),b=N(a,b)?O(a,b):null);return b}function T(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return O(a,b)}function za(a){a=a.__AMP_TOP||(a.__AMP_TOP=a);return N(a,"performance")?O(a,"performance"):null}function U(a,b){var c=R(a);c=S(c);return O(c,b)}function R(a){return a.nodeType?T((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function S(a){a=R(a);return a.isSingleDoc()?a.win:a}function O(a,b){N(a,b);a=Aa(a)[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function Ba(a,b){let c=Ca(a,b);if(c)return c;a=Aa(a);a[b]=Da();return a[b].promise}function Ca(a,b){let c=Aa(a)[b];if(c){if(c.promise)return c.promise;O(a,b);return c.promise=Promise.resolve(c.obj)}return null}function Aa(a){let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});return b}function N(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}function Da(){let a=new u,b=a.promise,c=a.resolve,d=a.reject;b.catch(()=>{});return{obj:null,promise:b,resolve:c,reject:d,context:null,ctor:null}}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function Ea(a,b,c=null){c?a.insertBefore(b,c.nextSibling):a.insertBefore(b,a.firstChild)}function Fa(a,b,c){let d;try{d=a.open(b,"_blank",c)}catch(h){z().error("DOM","Failed to open url on target: ","_blank",h)}var e;if(!(e=d||!1)){e=c||"";var f;"number"!==typeof f&&(f=0);e=f+8>e.length?!1:-1!==e.indexOf("noopener",f)}e||(d=a.open(b,"_top"));return d}function Ga(a){return"SCRIPT"==a.tagName&&a.hasAttribute("type")&&"APPLICATION/JSON"==a.getAttribute("type").toUpperCase()}function Ha(a){let b=Ca(S(a),"amp-analytics-instrumentation");if(b)return b;let c=R(a);return c.waitForBodyOpen().then(()=>{var a=c.win;var b=c.win.document.head;if(b){var f={};b=b.querySelectorAll("script[custom-element],script[custom-template]");for(let a=0;a<b.length;a++){var h=b[a];h=h.getAttribute("custom-element")||h.getAttribute("custom-template");f[h]=!0}f=Object.keys(f)}else f=[];return f.includes("amp-analytics")?T(a,"extensions").waitForExtension(a,"amp-analytics"):k()}).then(()=>{var b=c.win;return b.__AMP_EXTENDED_ELEMENTS&&b.__AMP_EXTENDED_ELEMENTS["amp-analytics"]?Ba(S(a),"amp-analytics-instrumentation"):null})}function V(a){return T(a,"timer")}class Ia{constructor(a,b,c){this.ampdoc=a;this.B=c;this.Z=A(b.authorization,'"authorization" URL must be specified');J(this.Z,'"authorization"');this.S=!b.noPingback;this.ja=b.pingback;this.S&&(A(this.ja,'"pingback" URL must be specified'),J(this.ja,'"pingback"'));b.authorizationTimeout?(c=b.authorizationTimeout,A("number"==typeof c,'"authorizationTimeout" must be a number'),c=Math.min(c,3e3)):c=3e3;this.oa=c;this.X=T(a.win,"xhr");this.A=V(a.win)}getConfig(){return{authorizationUrl:this.Z,pingbackEnabled:this.S,pingbackUrl:this.ja,authorizationTimeout:this.oa}}getAuthorizationUrl(){return this.Z}isAuthorizationEnabled(){return!0}getAuthorizationTimeout(){return this.oa}authorize(){return this.B.buildUrl(this.Z,!1).then(a=>this.A.timeoutPromise(this.oa,this.X.fetchJson(a,{credentials:"include"})).then(a=>a.json()))}isPingbackEnabled(){return this.S}pingback(){return this.B.buildUrl(this.ja,!0).then(a=>this.X.sendSignal(a,{method:"POST",credentials:"include",headers:D({"Content-Type":"application/x-www-form-urlencoded"}),body:""}))}postAction(){}}function Ja(a){a.L&&!a.za&&(a.za="function"==typeof a.ya?a.ya():a.ya);return a.za}function W(a,b,c,d){let e=a.getTarget();a="connect"==c?null!=a.m?a.m:"*":a.getTargetOrigin();e.postMessage({sentinel:"__AMP__",_rsvp:b,cmd:c,payload:d||null},a)}class Ka{constructor(a,b,c){this.Ua=a;this.ya=b;this.m=c;this.L=this.za=null;this.Ga=this.bb.bind(this);this.jb=0;this.Ca={}}connect(a){if(this.L)throw Error("already connected");this.L=a;this.Ua.addEventListener("message",this.Ga)}disconnect(){this.L&&(this.L=null,this.Ua.removeEventListener("message",this.Ga))}isConnected(){return null!=this.m}getTarget(){let a=Ja(this);if(!a)throw Error("not connected");return a}getTargetOrigin(){if(null==this.m)throw Error("not connected");return this.m}sendCommand(a,b){W(this,void 0,a,b)}sendCommandRsvp(a,b){let c=String(++this.jb);let d=null;let e=new Promise(a=>{d=a});this.Ca[c]={promise:e,resolver:d};W(this,c,a,b);return e}bb(a){let b=a.data;if(b&&"__AMP__"==b.sentinel){var c=a.origin,d=b.cmd,e=b.payload||null;null==this.m&&"start"==d&&(this.m=c);null==this.m&&a.source&&Ja(this)==a.source&&(this.m=c);if(c==this.m){var f=b._rsvp,h=!!f&&"rsvp"!=d;a=this.ra(f,d,e);h&&Promise.resolve(a).then(a=>{W(this,f,"rsvp",{result:a})},a=>{W(this,f,"rsvp",{error:String(a)})})}}}ra(a,b,c){if("rsvp"==b){let b=a&&this.Ca[a];b&&("error"in c?b.resolver(Promise.reject(Error(c.error))):b.resolver(c.result),delete this.Ca[a])}else return this.L(b,c)}}function La(a,b){if("."==b)return a;b=b.split(".");for(let c=0;c<b.length;c++){let d=b[c];if(d&&a&&void 0!==a[d]&&(null==a||"object"!=typeof a?0:Object.prototype.hasOwnProperty.call(a,d)))a=a[d];else{a=void 0;break}}return a}function Ma(a,b){try{return JSON.parse(a)}catch(c){return b&&b(c),null}}function Na(a){var b=!1;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function Oa(a){return a.A.promise(3e3).then(()=>Pa(a)||a.Ya)}function Qa(a){return a.connect().then(()=>a.T.sendCommandRsvp("authorize",{})).then(b=>{b&&k().then(()=>Ra(a,b));return b})}function Ra(a,b){var c=a.ampdoc.win;if(c=c.sessionStorage||c.localStorage)try{b?c.setItem("amp-access-iframe",JSON.stringify(D({t:a.ampdoc.win.Date.now(),d:b}))):c.removeItem("amp-access-iframe")}catch(d){z().error("amp-access-iframe","failed to store access response: ",d)}}function Sa(a){return new Promise(b=>{let c=JSON.parse(JSON.stringify(a.Xa));if(a.P){let d=a.P.join("&"),e=a.B.collectUrlVars(d,!1);b(e.then(a=>{c.iframeVars=a;return c}))}else b(c)})}function Pa(a){let b=a.ampdoc.win,c=b.sessionStorage||b.localStorage;if(!c)return null;try{let b=c.getItem("amp-access-iframe");if(!b)return null;let e=JSON.parse(b);return e.t+6048e5<a.ampdoc.win.Date.now()?null:e.d||null}catch(d){z().error("amp-access-iframe","failed to restore access response: ",d);try{c.removeItem("amp-access-iframe")}catch(e){}return null}}class Ua{constructor(a,b,c){this.ampdoc=a;this.B=c;this.Xa=b;this.A=V(a.win);this.ea=A(b.iframeSrc,'"iframeSrc" URL must be specified');J(this.ea,'"iframeSrc"');(this.P=b.iframeVars||null)&&A(Array.isArray(this.P),'"iframeVars" must be an array');this.Ya=A(b.defaultResponse,'"defaultResponse" must be specified');this.m=G(this.ea).origin;this.pa=this.aa=null;this.R=a.win.document.createElement("iframe");Na(this.R);this.T=new Ka(this.ampdoc.win,()=>this.R.contentWindow,this.m);this.Ia=null}disconnect(){this.T.disconnect();this.ampdoc.getBody().removeChild(this.R)}getConfig(){return{iframeSrc:this.ea,iframeVars:this.P}}isAuthorizationEnabled(){return!0}authorize(){return Promise.race([Oa(this),Qa(this)])}isPingbackEnabled(){return!0}pingback(){return this.connect().then(()=>this.T.sendCommandRsvp("pingback",{}))}postAction(){Ra(this,null)}connect(){if(!this.pa){let a=new u;this.pa=a.promise;this.aa=a.resolve;this.Ia=Sa(this);this.T.connect(this.ra.bind(this));this.ampdoc.getBody().appendChild(this.R);this.R.src=this.ea}return this.pa}ra(a){"connect"==a&&this.Ia.then(a=>{this.T.sendCommandRsvp("start",{protocol:"amp-access",config:a}).then(()=>{this.aa&&(this.aa(),this.aa=null)})})}}class Va{constructor(a,b,c){this.ampdoc=a;this.B=c;this.na=b.authorizationFallbackResponse||null;this.F=L(a.win.location)}getConfig(){return{authorizationResponse:this.na}}isAuthorizationEnabled(){return!!this.na&&!this.F}authorize(){return Promise.resolve(this.na)}isPingbackEnabled(){return!1}pingback(){return k()}postAction(){}}function Wa(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter((function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})));c.push.apply(c,d)}return c}function Xa(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Wa(Object(c),!0).forEach((function(b){var d=c[b];b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Wa(Object(c)).forEach((function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))}))}return a}let Ya=["GET","POST"];function Za(a,b){let c=Xa({},b);var d=b.body;if(d&&"function"==typeof d.getFormData){let a=b.body;c.headers["Content-Type"]="multipart/form-data;charset=utf-8";b=a.entries();d=[];for(let a=b.next();!a.done;a=b.next())d.push(a.value);b=d;c.body=b}return{input:a,init:c}}function $a(a,b){A("[object Object]"===ha.call(a),"Object expected: %s",a);if("document"!=b)return new Response(a.body,a.init);let c=Object.create(null),d={status:200,statusText:"OK",getResponseHeader(a){return c[String(a).toLowerCase()]||null}};if(a.init){let b=a.init;Array.isArray(b.headers)&&b.headers.forEach(a=>{let b=a[1];c[String(a[0]).toLowerCase()]=String(b)});b.status&&(d.status=parseInt(b.status,10));b.statusText&&(d.statusText=String(b.statusText))}return new Response(a.body?String(a.body):"",d)}function ab(a,b,c,d){if(!b)return k();let e=d.prerenderSafe?k():b.whenFirstVisible(),f=U(b,"viewer"),h=L(c),l=f.hasCapability("xhrInterceptor"),m=d.bypassInterceptorForDev&&!1;return h||!l||m||!b.getRootNode().documentElement.hasAttribute("allow-xhr-interception")?e:e.then(()=>f.isTrustedViewer()).then(b=>{if(b||M(a)["untrusted-xhr-interception"]){var e=D({originalRequest:Za(c,d)});return f.sendMessageAwaitResponse("xhr",e).then(a=>$a(a,d.responseType))}})}function bb(a,b,c){!1!==c.ampCors&&(c=G(b),c=fa(c.search),A(!("__amp_source_origin"in c),"Source origin is not allowed in %s",b),a=G(wa(a.location.href)).origin,a=`${encodeURIComponent("__amp_source_origin")}=${encodeURIComponent(a)}`)&&(b=b.split("#",2),c=b[0].split("?",2),a=c[0]+(c[1]?`?${c[1]}&${a}`:`?${a}`),b=a+=b[1]?`#${b[1]}`:"");return b}function cb(a){a=a||{};var b=a.method;void 0===b?b="GET":(b=b.toUpperCase(),Ya.includes(b));a.method=b;a.headers=a.headers||D({});a.headers.Accept="text/html";return a}function db(a,b,c){c=c||{};let d=a.origin||G(a.location.href).origin;a=G(b).origin;d==a&&(c.headers=c.headers||{},c.headers["AMP-Same-Origin"]="true");return c}function eb(a){return new Promise(b=>{if(a.ok)return b(a);b=a.status;let c=y().createError(`HTTP error ${b}`);c.retriable=415==b||500<=b&&600>b;c.response=a;throw c})}function fb(a,b,c){let d=cb(c);d=db(a,b,d);b=bb(a,b,d);let e=T(a,"ampdoc");c=e.isSingleDoc()?e.getSingleDoc():null;d.responseType="document";return ab(a,c,b,d).then(a=>a?a.text().then(a=>(new DOMParser).parseFromString(a,"text/html")):gb(b,d).then(a=>a.xhr.responseXML))}function gb(a,b){return new Promise((c,d)=>{let e=new XMLHttpRequest;e.open(b.method||"GET",a,!0);e.withCredentials="include"==b.credentials;e.responseType="document";for(let a in b.headers)e.setRequestHeader(a,b.headers[a]);e.onreadystatechange=()=>{if(!(2>e.readyState))if(100>e.status||599<e.status)e.onreadystatechange=null,d(y().createExpectedError(`Unknown HTTP status ${e.status}`));else if(4==e.readyState){var a={status:e.status,statusText:e.statusText,headers:hb(e.getAllResponseHeaders())};a=new Response("",a);a=eb(a).then(a=>({response:a,xhr:e}));c(a)}};e.onerror=()=>{d(y().createExpectedError("Request failure"))};e.onabort=()=>{d(y().createExpectedError("Request aborted"))};"POST"==b.method?e.send(b.body):e.send()})}function hb(a){let b=D({});a.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(a){var c=a.split(":");let e=c.shift().trim();e&&(c=c.join(":").trim(),b[e]=c)}));return b}class ib{constructor(a,b,c){this.ampdoc=a;this.B=c;this.o=new Ia(a,b,c);this.X=T(a.win,"xhr");this.A=V(a.win);this.M=T(a.win,"vsync");this.H=a.getMetaByName("i-amphtml-access-state");let d=!!M(a.win)["amp-access-server"];this.F=L(a.win.location)||d;this.wa=(d?a.getParam("serverAccessService"):null)||K(a.win.location.href)}getConfig(){return{client:this.o.getConfig(),proxy:this.F,serverState:this.H}}isAuthorizationEnabled(){return!0}authorize(){return this.F&&this.H?this.B.collectUrlVars(this.o.getAuthorizationUrl(),!1).then(a=>{let b={};for(let c in a)null!=a[c]&&(b[c]=String(a[c]));a=D({url:K(this.ampdoc.win.location.href),state:this.H,vars:b});return this.A.timeoutPromise(this.o.getAuthorizationTimeout(),fb(this.ampdoc.win,this.wa,{method:"POST",body:"request="+encodeURIComponent(JSON.stringify(a)),headers:D({"Content-Type":"application/x-www-form-urlencoded"})}))}).then(a=>{let b=a.querySelector('script[id="amp-access-data"]').textContent,c=JSON.parse(b);return this.va(a).then(()=>c)}):this.o.authorize()}isPingbackEnabled(){return this.o.isPingbackEnabled()}pingback(){return this.o.pingback()}postAction(){}va(a){let b=a.querySelectorAll("[i-amphtml-access-id]");return this.M.mutatePromise(()=>{for(let a=0;a<b.length;a++){let c=b[a],e=c.getAttribute("i-amphtml-access-id"),f=this.ampdoc.getRootNode().querySelector(`[i-amphtml-access-id="${CSS.escape(e)}"]`);f&&f.parentElement.replaceChild(this.ampdoc.win.document.importNode(c,!0),f)}})}}function jb(a){if("undefined"!==typeof TextDecoder)return new TextDecoder("utf-8").decode(a);{a=new Uint8Array(a.buffer||a);let b=Array(a.length);for(let c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);a=b.join("")}return decodeURIComponent(escape(a))}function kb(a){let b=new Uint8Array(a.length);for(let c=0;c<a.length;c++){let d=a.charCodeAt(c);b[c]=d}return b}let lb={"-":"+",_:"/",".":"="};function mb(a){let b=atob(a.replace(/[-_.]/g,a=>lb[a]));return kb(b)}function nb(a){a=a.trim();a=a.replace(/^\-+BEGIN[^-]*\-+/,"");a=a.replace(/\-+END[^-]*\-+$/,"");a=a.replace(/[\r\n]/g,"").trim();return kb(atob(a))}function ob(a){function b(){throw Error(`Invalid token: "${a}"`)}let c=a.split(".");3!=c.length&&b();let d=mb(c[0]),e=mb(c[1]);return{header:Ma(jb(d),b),payload:Ma(jb(e),b),verifiable:`${c[0]}.${c[1]}`,sig:c[2]}}function pb(a,b){return b.then(b=>a.la.importKey("spki",nb(b),{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]))}class qb{constructor(a){this.win=a;this.la=a.crypto&&(a.crypto.subtle||a.crypto.webkitSubtle)||null}decode(a){return ob(a).payload}isVerificationSupported(){return!!this.la}decodeAndVerify(a,b){if(!this.la)throw Error("Crypto is not supported on this platform");return new Promise(b=>b(ob(a))).then(a=>{let c=a.header.alg;if(!c||"RS256"!=c)throw Error("Only alg=RS256 is supported");return pb(this,b).then(b=>{let c=mb(a.sig);return this.la.verify({name:"RSASSA-PKCS1-v1_5"},b,c,kb(a.verifiable))}).then(b=>{if(b)return a.payload;throw Error("Signature verification failed")})})}}function rb(a){return sb(a).then(b=>{let c=b.encoded,d=b.jwt.amp_authdata;b=va(D({url:K(a.ampdoc.win.location.href),state:a.H,jwt:c}));return a.A.timeoutPromise(3e3,fb(a.ampdoc.win,a.wa,{method:"POST",body:b,headers:D({"Content-Type":"application/x-www-form-urlencoded"})})).then(b=>a.va(b)).then(()=>d)})}function tb(a){return sb(a).then(a=>a.jwt.amp_authdata)}function sb(a){return a.B.buildUrl(a.o.getAuthorizationUrl(),!1).then(b=>a.A.timeoutPromise(3e3,a.X.fetchText(b,{credentials:"include"}))).then(a=>a.text()).then(b=>{let c=a.eb.decode(b);A(c.amp_authdata,'"amp_authdata" must be present in JWT');return{encoded:b,jwt:c}}).catch(a=>{throw y().createError("JWT fetch or validation failed: ",a)})}class ub{constructor(a,b,c){this.ampdoc=a;this.B=c;this.o=new Ia(a,b,c);this.X=T(a.win,"xhr");this.A=V(a.win);this.M=T(a.win,"vsync");this.H=a.getMetaByName("i-amphtml-access-state");c=!!M(a.win)["amp-access-server-jwt"];this.F=L(a.win.location)||c;this.wa=(c?a.getParam("serverAccessService"):null)||K(a.win.location.href);this.Ka=b.publicKey||null;this.fa=b.publicKeyUrl||null;A(this.Ka||this.fa,'"publicKey" or "publicKeyUrl" must be specified');this.fa&&J(this.fa,'"publicKeyUrl"');this.eb=new qb(a.win)}getConfig(){return{client:this.o.getConfig(),proxy:this.F,serverState:this.H,publicKey:this.Ka,publicKeyUrl:this.fa}}isAuthorizationEnabled(){return!0}authorize(){return this.F&&this.H?rb(this):tb(this)}isPingbackEnabled(){return this.o.isPingbackEnabled()}pingback(){return this.o.pingback()}postAction(){}va(a){let b=a.querySelectorAll("[i-amphtml-access-id]");return this.M.mutatePromise(()=>{for(let c=0;c<b.length;c++){let d=b[c];var a=d.getAttribute("i-amphtml-access-id");(a=this.ampdoc.getRootNode().querySelector(`[i-amphtml-access-id="${CSS.escape(a)}"]`))&&a.parentElement.replaceChild(this.ampdoc.win.document.importNode(d,!0),a)}})}}class vb{constructor(a,b){this.ampdoc=a;this.Ra=A(b.vendor,'"vendor" name must be specified');this.mb=b[this.Ra]||{};this.S=!b.noPingback;a=new u;this.Sa=a.promise;this.Ba=a.resolve}getVendorName(){return this.Ra}getConfig(){return this.mb}registerVendor(a){A(this.Ba,"Vendor has already been registered");this.Ba(a);this.Ba=null}isAuthorizationEnabled(){return!0}authorize(){return this.Sa.then(a=>a.authorize())}isPingbackEnabled(){return this.S}pingback(){return this.Sa.then(a=>a.pingback())}postAction(){}}let X;function wb(a,b,c){let f,d=a,e=c;f=a=>{try{return e(a)}catch(m){throw self.__AMP_REPORT_ERROR(m),m}};let h=xb();d.addEventListener(b,f,h?void 0:!1);return()=>{d&&d.removeEventListener(b,f,h?void 0:!1);f=d=e=null}}function xb(){if(void 0!==X)return X;X=!1;try{let a={get capture(){X=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return X}function yb(a,b){return wb(a,"message",b)}function zb(a,b){let c=b;let d=wb(a,"click",a=>{try{c(a)}finally{c=null,d()}});return d}let Ab=/RETURN_URL/;function Bb(a,b){let c=U(a,"viewer");return parseInt(a.getParam("dialog"),10)?new Cb(c,b):new Db(a.win,c,b)}function Eb(a,b){return Bb(a,b).open()}class Cb{constructor(a,b){this.viewer=a;this.urlOrPromise=b}getLoginUrl(){return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then(a=>Y(a,"RETURN_URL"))}open(){return this.getLoginUrl().then(a=>this.viewer.sendMessageAwaitResponse("openDialog",D({url:a})))}}function Fb(a){var b=a.win.screen,c=Math.floor(Math.min(700,.9*b.width));let d=Math.floor(Math.min(450,.9*b.height));b=`${`height=${d},width=${c},left=${Math.floor((b.width-c)/2)},top=${Math.floor((b.height-d)/2)}`},resizable=yes,scrollbars=yes`;let e=Gb(a);a.N=null;"string"==typeof a.urlOrPromise?(c=Y(a.urlOrPromise,e),a.w=Fa(a.win,c,b),a.w&&(a.N=k())):(a.w=Fa(a.win,"",b),a.w&&(a.N=a.urlOrPromise.then(b=>{b=Y(b,e);a.w.location.replace(b)},a=>{throw Error("failed to resolve url: "+a)})));a.N?a.N.then(()=>{Hb(a,e)},b=>{Z(a,null,b)}):Z(a,null,Error("failed to open dialog"))}function Ib(a){a.V=null;a.ua=null;if(a.w){try{a.w.close()}catch(b){}a.w=null}a.J&&(a.win.clearInterval(a.J),a.J=null);a.ha&&(a.ha(),a.ha=null)}function Gb(a){let b=a.viewer.getResolvedViewerUrl();return`${ka.cdn}/v0/amp-login-done-0.1.html?url=`+encodeURIComponent(b)}function Hb(a,b){let c=G(b).origin;a.J=a.win.setInterval(()=>{a.w.closed&&(a.win.clearInterval(a.J),a.J=null,a.win.setTimeout(()=>{Z(a,"")},3e3))},500);a.ha=yb(a.win,b=>{b.origin==c&&b.data&&"amp"==b.data.sentinel&&"result"==b.data.type&&(a.w&&a.w.postMessage(D({sentinel:"amp",type:"result-ack"}),c),Z(a,b.data.result))})}function Z(a,b,c){a.V&&(c?a.ua(c):a.V(b),Ib(a))}class Db{constructor(a,b,c){this.win=a;this.viewer=b;this.urlOrPromise=c;this.ha=this.J=this.N=this.w=this.ua=this.V=null}open(){A(!this.V,"Dialog already opened");return new Promise((a,b)=>{this.V=a;this.ua=b;Fb(this)}).then(a=>{Ib(this);return a},a=>{Ib(this);throw a})}getLoginUrl(){return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then(a=>Y(a,Gb(this)))}}function Y(a,b){return Ab.test(a)?a.replace(Ab,encodeURIComponent(b)):a+(-1==a.indexOf("?")?"?":"&")+"return="+encodeURIComponent(b)}function Jb(a,b,c={}){Ha(a).then(d=>{d&&d.triggerEventForTarget(a,b,c,!1)})}let Kb={CLIENT:"client",IFRAME:"iframe",SERVER:"server",VENDOR:"vendor",OTHER:"other"};function Lb(a,b){let c={buildUrl:a.buildUrl.bind(a),collectUrlVars:a.collectUrlVars.bind(a)},d=a.cb&&!0===b.jwt;switch(a.Aa){case"client":return d?new ub(a.ampdoc,b,c):new Ia(a.ampdoc,b,c);case"iframe":return new Ua(a.ampdoc,b,c);case"server":return d?new ub(a.ampdoc,b,c):new ib(a.ampdoc,b,c);case"vendor":return new vb(a.ampdoc,b);case"other":return new Va(a.ampdoc,b,c)}throw z().createError("Unsupported access type: ",a.Aa)}function Mb(a){if(0!=Object.keys(a.ga).length){var b=[];for(let c in a.ga)b.push(a.buildUrl(a.ga[c],!0).then(b=>{a.Na[c]=b;return{type:c,url:b}}));Promise.all(b)}}function Nb(a,b){return a.ca().then(c=>{let d={READER_ID:c,ACCESS_READER_ID:c};b&&(d.AUTHDATA=b=>{if(a.Y)return La(a.Y,b)});return d})}function Ob(a,b,c){let d=Date.now();if(a.G&&1e3>d-a.Ma)return a.G;Pb(a,c,"started");let e=a.ib(b).then(b=>{a.G=null;b=fa(b).success;let d="true"==b||"yes"==b||"1"==b;d?Pb(a,c,"success"):Pb(a,c,"rejected");if(d||!b){a.I.postAction();let b=a.runAuthorization(!0);a.sa(b);return b.then(()=>{a.ka(0)})}}).catch(b=>{Pb(a,c,"failed");a.G==e&&(a.G=null);throw b});a.G=e;a.Ma=d;return a.G}function Pb(a,b,c){a.C(`access-login-${c}`);b&&a.C(`access-login-${b}-${c}`)}class Qb{constructor(a,b,c,d,e,f){this.ampdoc=a;this.ca=c;this.ka=d;this.sa=e;this.D=f;this.Ja=!!M(a.win)["amp-access-server"];this.cb=!!M(a.win)["amp-access-jwt"];var h;(h=b.type?y().assertEnumValue(Kb,b.type,"access type"):null)||(h=b.vendor?"vendor":"client");"server"!=h||this.Ja||(h="client");"client"==h&&this.Ja&&(h="server");"iframe"!=h||M(this.ampdoc.win)["amp-access-iframe"]||(y().error("amp-access",'Experiment "amp-access-iframe" is not enabled.'),h="client");this.Aa=h;{h=b.login;let a={};if(h)if("string"==typeof h)a[""]=h;else if("[object Object]"===ha.call(h))for(l in h)a[l]=h[l];else A(!1,'"login" must be either a single URL or a map of URLs');for(let b in a)J(a[b],this.D);var l=a}this.ga=l;this.Fa=b.authorizationFallbackResponse;this.gb=b.namespace||null;this.I=Lb(this,b);this.Qa=ya(f,"url-replace");this.ib=Eb.bind(null,a);this.Y=null;a=new u;this.$a=a.promise;this.qa=a.resolve;this.Na={};this.G=null;this.Ma=0}getNamespace(){return this.gb}getType(){return this.Aa}getAdapter(){return this.I}getAuthResponse(){return this.Y}getAdapterConfig(){return this.I.getConfig()}whenFirstAuthorized(){return this.$a}da(){let a=this.ampdoc.getRootNode();return a.documentElement||a.body||a}C(a){Jb(this.da(),a,void 0)}start(){Mb(this)}buildUrl(a,b){return Nb(this,b).then(b=>this.Qa.expandUrlAsync(a,b))}collectUrlVars(a,b){return Nb(this,b).then(b=>this.Qa.collectVars(a,b))}runAuthorization(a){return this.I.isAuthorizationEnabled()?this.I.authorize().catch(b=>{this.C("access-authorization-failed");if(this.Fa&&!a)return y().error("amp-access","Authorization failed: ",b),this.Fa;throw b}).then(a=>{this.Y=a;this.qa();Mb(this);return a}).catch(a=>{y().error("amp-access","Authorization failed: ",a);this.qa();throw a}):(this.qa(),k())}reportViewToServer(){return this.I.pingback().then(()=>{this.C("access-pingback-sent")}).catch(a=>{this.C("access-pingback-failed");throw y().createError("Pingback failed: ",a)})}getLoginUrl(a){return Bb(this.ampdoc,a).getLoginUrl()}loginWithType(a){A(this.ga[a],"Login URL is not configured: %s",a);let b=A(this.Na[a],"Login URL is not ready: %s",a);return Ob(this,b,a)}loginWithUrl(a,b=""){return Ob(this,a,b)}}var Rb=function(){function a(a,b,c,d){c=c||{};for(d=a.length;d--;c[a[d]]=b);return c}function b(){this.yy={}}var c=[1,3],d=[1,4],e=[1,18],f=[1,19],h=[1,14],l=[1,15],m=[1,16],t=[1,17],P=[1,21],Q=[1,22],p=[5,6,7,10],q=[5,6,7,10,15,16,17,18,19,20,21],C=[5,6,7,10,15,16,17,18,19,20,21,25,27],F={trace:function(){},yy:{},kb:{error:2,result:3,search_condition:4,EOF:5,OR:6,AND:7,NOT:8,"(":9,")":10,predicate:11,comparison_predicate:12,truthy_predicate:13,scalar_exp:14,EQ:15,DEQ:16,NEQ:17,LT:18,LTE:19,GT:20,GTE:21,atom:22,field_ref:23,literal:24,DOT:25,field_name:26,"[":27,string:28,"]":29,NAME:30,STRING:31,NUMERIC:32,TRUE:33,FALSE:34,NULL:35,$accept:0,$end:1},W:{2:"error",5:"EOF",6:"OR",7:"AND",8:"NOT",9:"(",10:")",15:"EQ",16:"DEQ",17:"NEQ",18:"LT",19:"LTE",20:"GT",21:"GTE",25:"DOT",27:"[",29:"]",30:"NAME",31:"STRING",32:"NUMERIC",33:"TRUE",34:"FALSE",35:"NULL"},Oa:[0,[3,2],[4,3],[4,3],[4,2],[4,3],[4,1],[11,1],[11,1],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[13,1],[14,1],[14,1],[22,1],[23,3],[23,4],[23,1],[26,1],[28,1],[24,1],[24,1],[24,1],[24,1],[24,1]],performAction:function(a,b,c,d,e,f){var g=f.length-1;switch(e){case 1:return f[g-1];case 2:this.h=f[g-2]||f[g];break;case 3:this.h=f[g-2]&&f[g];break;case 4:this.h=!f[g];break;case 5:this.h=f[g-1];break;case 6:case 7:case 8:case 17:case 18:case 19:this.h=f[g];break;case 9:this.h=f[g-2]===f[g];break;case 10:throw Error('"==" is not allowed, use "="');case 11:this.h=f[g-2]!==f[g];break;case 12:this.h=typeof f[g-2]==typeof f[g]&&f[g-2]<f[g];break;case 13:this.h=typeof f[g-2]==typeof f[g]&&f[g-2]<=f[g];break;case 14:this.h=typeof f[g-2]==typeof f[g]&&f[g-2]>f[g];break;case 15:this.h=typeof f[g-2]==typeof f[g]&&f[g-2]>=f[g];break;case 16:this.h=void 0!==f[g]&&null!==f[g]&&""!==f[g]&&0!==f[g]&&!1!==f[g];break;case 20:this.h="[object Object]"==Object.prototype.toString.call(f[g-2])&&f[g-2].hasOwnProperty(f[g])?f[g-2][f[g]]:null;break;case 21:this.h="[object Object]"==Object.prototype.toString.call(f[g-3])&&f[g-3].hasOwnProperty(f[g-1])?f[g-3][f[g-1]]:null;break;case 22:this.h=void 0!==d[f[g]]?d[f[g]]:null;break;case 23:this.h=a;break;case 24:this.h=a.substring(1,a.length-1);break;case 26:this.h=Number(a);break;case 27:this.h=!0;break;case 28:this.h=!1;break;case 29:this.h=null}},table:[{3:1,4:2,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{1:[3]},{5:[1,20],6:P,7:Q},{4:23,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{4:24,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},a(p,[2,6]),a(p,[2,7]),a(p,[2,8]),a(p,[2,16],{15:[1,25],16:[1,26],17:[1,27],18:[1,28],19:[1,29],20:[1,30],21:[1,31]}),a(q,[2,17]),a(q,[2,18],{25:[1,32],27:[1,33]}),a(q,[2,19]),a(C,[2,22]),a(q,[2,25]),a(q,[2,26]),a(q,[2,27]),a(q,[2,28]),a(q,[2,29]),a(C,[2,23]),a([5,6,7,10,15,16,17,18,19,20,21,29],[2,24]),{1:[2,1]},{4:34,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{4:35,8:c,9:d,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},a(p,[2,4]),{6:P,7:Q,10:[1,36]},{14:37,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{14:38,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{14:39,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{14:40,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{14:41,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{14:42,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{14:43,22:9,23:10,24:11,26:12,28:13,30:e,31:f,32:h,33:l,34:m,35:t},{26:44,30:e},{28:45,31:f},a([5,6,10],[2,2],{7:Q}),a(p,[2,3]),a(p,[2,5]),a(p,[2,9]),a(p,[2,10]),a(p,[2,11]),a(p,[2,12]),a(p,[2,13]),a(p,[2,14]),a(p,[2,15]),a(C,[2,20]),{29:[1,46]},a(C,[2,21])],defaultActions:{20:[2,1]},parseError:function(a,b){if(b.recoverable)this.trace(a);else throw a=Error(a),a.hash=b,a},parse:function(a){function b(){var a=n.lex()||1;"number"!==typeof a&&(a=c.kb[a]||a);return a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",l=0,m=0,p=0,t=f.slice.call(arguments,1),n=Object.create(this.lexer),q={yy:{}};for(H in this.yy)Object.prototype.hasOwnProperty.call(this.yy,H)&&(q.yy[H]=this.yy[H]);n.setInput(a,q.yy);q.yy.lexer=n;q.yy.parser=this;"undefined"==typeof n.yylloc&&(n.yylloc={});var C=n.yylloc;f.push(C);var Q=n.options&&n.options.ranges;this.parseError="function"===typeof q.yy.parseError?q.yy.parseError:Object.getPrototypeOf(this).parseError;for(var r,F,E,x,ba,B,P,ca,I={};;){E=d[d.length-1];if(this.defaultActions[E])x=this.defaultActions[E];else{if(null===r||"undefined"==typeof r)r=b();x=g[E]&&g[E][r]}if("undefined"===typeof x||!x.length||!x[0]){var Ta="";ca=[];for(ba in g[E])this.W[ba]&&2<ba&&ca.push("'"+this.W[ba]+"'");Ta=n.showPosition?"Parse error on line "+(l+1)+":\n"+n.showPosition()+"\nExpecting "+ca.join(", ")+", got '"+(this.W[r]||r)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==r?"end of input":"'"+(this.W[r]||r)+"'");this.parseError(Ta,{text:n.match,token:this.W[r]||r,line:n.yylineno,loc:C,expected:ca})}if(x[0]instanceof Array&&1<x.length)throw Error("Parse Error: multiple actions possible at state: "+E+", token: "+r);switch(x[0]){case 1:d.push(r);e.push(n.yytext);f.push(n.yylloc);d.push(x[1]);r=null;F?(r=F,F=null):(m=n.yyleng,h=n.yytext,l=n.yylineno,C=n.yylloc,0<p&&p--);break;case 2:B=this.Oa[x[1]][1];I.h=e[e.length-B];I.Da={first_line:f[f.length-(B||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(B||1)].first_column,last_column:f[f.length-1].last_column};Q&&(I.Da.range=[f[f.length-(B||1)].range[0],f[f.length-1].range[1]]);var H=this.performAction.apply(I,[h,m,l,q.yy,x[1],e,f].concat(t));if("undefined"!==typeof H)return H;B&&(d=d.slice(0,-2*B),e=e.slice(0,-1*B),f=f.slice(0,-1*B));d.push(this.Oa[x[1]][0]);e.push(I.h);f.push(I.Da);P=g[d[d.length-2]][d[d.length-1]];d.push(P);break;case 3:return!0}}}},$b=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a)},setInput:function(a,b){this.yy=b||this.yy||{};this._input=a;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b);this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);c.length-1&&(this.yylineno-=c.length-1);a=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-b]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c;if(this.options.backtrack_lexer){var d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};this.options.ranges&&(d.yylloc.range=this.yylloc.range.slice(0))}if(c=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=c.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a;if(this._backtrack)for(var e in d)this[e]=d[e];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a;this._more||(this.match=this.yytext="");for(var b=this._currentRules(),c=0;c<b.length;c++)if((a=this._input.match(this.rules[b[c]]))&&(!d||a[0].length>d[0].length)){var d=a;var e=c;if(this.options.backtrack_lexer){d=this.test_match(a,b[c]);if(!1!==d)return d;if(this._backtrack)d=!1;else return!1}else if(!this.options.flex)break}return d?(d=this.test_match(d,b[e]),!1!==d?d:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){a=this.conditionStack.length-1-Math.abs(a||0);return 0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,b,c){switch(c){case 1:return 7;case 2:return 6;case 3:return 8;case 4:return 35;case 5:return 33;case 6:return 33;case 7:return 34;case 8:return 34;case 9:return 9;case 10:return 10;case 11:return 27;case 12:return 29;case 13:return"|";case 14:return 19;case 15:return 18;case 16:return 21;case 17:return 20;case 18:return 17;case 19:return 16;case 20:return 15;case 21:return 32;case 22:return 30;case 23:return 31;case 24:return 31;case 25:return 25;case 26:return"INVALID";case 27:return 5}},rules:[/^(?:\s+)/,/^(?:AND\b)/,/^(?:OR\b)/,/^(?:NOT\b)/,/^(?:NULL\b)/,/^(?:TRUE\b)/,/^(?:true\b)/,/^(?:FALSE\b)/,/^(?:false\b)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\|)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:!=)/,/^(?:==)/,/^(?:=)/,/^(?:-?[0-9]+(\.[0-9]+)?\b)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/,/^(?:'[^']*')/,/^(?:"[^"]*")/,/^(?:\.)/,/^(?:.)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27],inclusive:!0}}}}();F.lexer=$b;b.prototype=F;F.Parser=b;return new b}();class Sb{constructor(){this.La=this.cache=null}evaluate(a,b){this.La!==b&&(this.La=b,this.cache=Object.create(null));if(!la.call(this.cache,a)){var c=this.cache;a:{try{Rb.yy=b;var d=!!Rb.parse(a);break a}finally{Rb.yy=null}d=void 0}c[a]=d}return this.cache[a]}}class Tb{constructor(){this.l=null}add(a){this.l||(this.l=[]);this.l.push(a);return()=>{this.remove(a)}}remove(a){this.l&&(a=this.l.indexOf(a),-1<a&&this.l.splice(a,1))}removeAll(){this.l&&(this.l.length=0)}fire(a){if(this.l){var b=this.l;for(let c=0;c<b.length;c++)(0,b[c])(a)}}getHandlerCount(){return this.l?this.l.length:0}}function Ub(a,b){let c=a.getHeadNode(),d=Vb(c,Wb(c));if(b){let c=a.getRootNode();if(Xb(c,d))b(d);else var e=setInterval(()=>{Xb(c,d)&&(clearInterval(e),b(d))},4)}}function Vb(a,b){let c=a.__AMP_CSS_SM;c||(c=a.__AMP_CSS_SM=Object.create(null));{let d=Yb(a,c,"amp-extension=amp-access");if(d)return d.textContent!==b&&(d.textContent=b),d}let d=(a.ownerDocument||a).createElement("style");d.textContent=b;let e=null;d.setAttribute("amp-extension","amp-access");e=Yb(a,c,"amp-runtime");Ea(a,d,e);return c["amp-extension=amp-access"]=d}function Yb(a,b,c){return b[c]?b[c]:(a=a.querySelector(`style[${c}]`))?b[c]=a:null}function Wb(a){return(a=a.__AMP_CSS_TR)?a("\n/*# sourceURL=/extensions/amp-access/0.1/amp-access.css*/"):"\n/*# sourceURL=/extensions/amp-access/0.1/amp-access.css*/"}function Xb(a,b){let c=a.styleSheets;for(a=0;a<c.length;a++)if(c[a].ownerNode==b)return!0;return!1}self.__AMP_ERRORS=self.__AMP_ERRORS||[];function Zb(a){A(Ga(a.D),'amp-access config should be inside a <script> tag with type="application/json"');let b=Ma(a.D.textContent,a=>{throw y().createError('Failed to parse "amp-access" JSON: '+a)}),c={};if(Array.isArray(b))for(let a=0;a<b.length;a++){let d=b[a].namespace;A(!!d,"Namespace required");A(!c[d],"Namespace already used: "+d);c[d]=b[a]}else c[b.namespace||""]=b;let d=a.ca.bind(a),e=a.ka.bind(a),f=a.sa.bind(a);return Object.keys(c).map(b=>new Qb(a.ampdoc,c[b],d,e,f,a.D))}function ac(a,b,c){b=b.querySelectorAll("[amp-access]");let d=[];for(let e=0;e<b.length;e++)d.push(bc(a,b[e],c));return Promise.all(d).then(()=>{a.Ea.fire()})}function cc(a){dc(a,"amp-access-loading",!0);let b=a.ampdoc.whenFirstVisible().then(()=>Promise.all(a.j.map(b=>ec(a,b)))).then(()=>{dc(a,"amp-access-loading",!1);return a.ampdoc.whenReady().then(()=>{let b=a.ampdoc.getRootNode(),d=a.combinedResponses();return ac(a,b,d)})});a.K=b}function fc(a){a.Ta.onBroadcast(b=>{"amp-access-reauthorize"==b.type&&b.origin==a.Pa&&cc(a)})}function dc(a,b,c){a.M.mutate(()=>{a.da().classList.toggle(b,c)})}function ec(a,b){return b.runAuthorization().catch(()=>{dc(a,"amp-access-error",!0)})}function bc(a,b,c){let d=b.getAttribute("amp-access"),e=a.Za.evaluate(d,c);let f=null;e&&(f=gc(a,b,c));return f?f.then(()=>hc(a,b,e)):hc(a,b,e)}function gc(a,b,c){let d=[],e=b.querySelectorAll("[amp-access-template]");if(0<e.length)for(let f=0;f<e.length;f++){let h=ic(a,e[f],c).catch(a=>{z().error("amp-access","Template failed: ",a,e[f],b)});d.push(h)}return 0<d.length?Promise.all(d):null}function hc(a,b,c){let d=!b.hasAttribute("amp-access-hide");return c==d?k():a.fb.mutateElement(b,()=>{c?b.removeAttribute("amp-access-hide"):b.setAttribute("amp-access-hide","")})}function ic(a,b,c){let d=b,e=null;"TEMPLATE"!=d.tagName&&(e=d,d=e.__AMP_ACCESS__TEMPLATE);return d?a.lb.renderTemplate(d,c).then(b=>a.M.mutatePromise(()=>{b.setAttribute("amp-access-template","");b.__AMP_ACCESS__TEMPLATE=d;d.parentElement?d.parentElement.replaceChild(b,d):e&&e.parentElement&&e.parentElement.replaceChild(b,e)})):Promise.reject(Error("template not found"))}function jc(a,b){a.U||(a.U=kc(a,b).then(()=>a.K).then(()=>{a.C("access-viewed");var b=[];for(let c=0;c<a.j.length;c++)a.j[c].getAdapter().isPingbackEnabled()&&b.push(a.j[c].reportViewToServer());return b=Promise.all(b)}).catch(b=>{a.U=null;throw b}),a.U.then(a.Ha.bind(a)))}function kc(a,b){if(0==b)return k();let c=[];return new Promise((d,e)=>{c.push(a.ampdoc.onVisibilityChanged(()=>{a.ampdoc.isVisible()||e(Error("CANCELLED"))}));let f=a.A.delay(d,b);c.push(()=>a.A.cancel(f));c.push(a.nb.onScroll(d));c.push(zb(a.ampdoc.getRootNode(),d))}).then(()=>{c.forEach(a=>a())},a=>{c.forEach(a=>a());throw a})}function lc(a,b){let c=b.indexOf("-"),d=1==a.j.length,e=-1<c?b.substring(0,c):b,f=a.j.filter(a=>a.getNamespace()==e);if(f.length){let a=-1<c?b.substring(c+1):"";f[0].loginWithType(a)}else A(d,"Login must match namespace: %s",e),a.j[0].loginWithType(b)}class mc{constructor(a){this.ampdoc=a;Ub(a,()=>{});var b=a.getElementById("amp-access");if(this.O=!!b)this.D=b,this.Pa=G(wa(a.win.location)).origin,this.A=V(a.win),this.M=T(a.win,"vsync"),this.Wa=Ba(S(a),"cid"),this.Ta=U(a,"viewer"),this.nb=U(a,"viewport"),this.lb=T(a.win,"templates"),this.fb=U(a,"mutator"),this.ia=za(a.win),this.ta=null,this.Za=new Sb,this.j=Zb(this),b=this.j.map(a=>a.whenFirstAuthorized()),this.ba=!1,this.K=Promise.all(b),this.U=null,this.Ea=new Tb,this.K.then(()=>{this.ba=!0;this.C("access-authorization-received");this.ia&&(this.ia.tick("aaa"),this.ia.tickSinceVisible("aaav"),this.ia.flush())}),a.getRootNode().addEventListener("amp:dom-update",this.hb.bind(this))}getAccessReaderId(){return this.O?this.ca():null}ca(){if(!this.ta){let a=k();this.ta=this.Wa.then(b=>b.get({scope:"amp-access",createCookieIfNotPresent:!0},a))}return this.ta}areFirstAuthorizationsCompleted(){return this.ba}onApplyAuthorizations(a){this.Ea.add(a)}hb(a){if(this.ba){let b=a.target;return this.K.then(()=>{let a=this.combinedResponses();ac(this,b,a)})}}getVendorSource(a){for(let b=0;b<this.j.length;b++){let c=this.j[b];if("vendor"==c.getType()&&c.getAdapter().getVendorName()==a)return c}A(!1,'Access vendor "%s" can only be used for "type=vendor", but none found',a);throw Error()}isEnabled(){return this.O}da(){let a=this.ampdoc.getRootNode();return a.documentElement||a.body||a}C(a){Jb(this.da(),a,void 0)}sa(a){this.Ha();a.then(()=>{this.ba&&this.K.then(()=>{this.ampdoc.whenReady().then(()=>{let a=this.ampdoc.getRootNode(),c=this.combinedResponses();return ac(this,a,c)})})})}Ha(){this.Ta.broadcast(D({type:"amp-access-reauthorize",origin:this.Pa}))}getAuthdataField(a){return this.O?this.K.then(()=>{var b=this.combinedResponses();b=La(b,a);return void 0!==b?b:null}):null}ka(a){this.j.some(a=>a.getAdapter().isPingbackEnabled())&&(this.U=null,this.ampdoc.whenReady().then(()=>{this.ampdoc.isVisible()&&jc(this,a);this.ampdoc.onVisibilityChanged(()=>{this.ampdoc.isVisible()&&jc(this,a)})}))}ab(a){if(!a.satisfiesTrust(2))return null;if("login"==a.method)a.event&&a.event.preventDefault(),lc(this,"");else{var b=a.method;(6>b.length?0:0==b.lastIndexOf("login-",0))?(a.event&&a.event.preventDefault(),lc(this,a.method.substring(6))):"refresh"==a.method&&(a.event&&a.event.preventDefault(),cc(this))}return null}getSource(a){A(0<=a&&a<this.j.length,"Invalid index: %d",a);return this.j[a]}combinedResponses(){if(1==this.j.length&&!this.j[0].getNamespace())return this.j[0].getAuthResponse()||{};let a={};this.j.forEach(b=>a[b.getNamespace()]=b.getAuthResponse());return a}}(function(a){a.registerServiceForDoc("access",(function(a){a=new mc(a);if(a.O){ya(a.D,"action").installActionHandler(a.D,a.ab.bind(a));for(let b=0;b<a.j.length;b++)a.j[b].start();cc(a);a.ka(2e3);fc(a)}return a}))})(self.AMP)}});