(self.AMP=self.AMP||[]).push({n:"amp-viewer-integration",p:"high",v:"2008290323002",f:function(AMP,_){let m;function n(){return m?m:m=Promise.resolve(void 0)}function r(a,b=""){try{return decodeURIComponent(a)}catch(c){return b}}let aa=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function t(a){let b=Object.create(null);if(!a)return b;let c;for(;c=aa.exec(a);){let a=r(c[1],c[1]),f=c[2]?r(c[2].replace(/\+/g," "),c[2]):"";b[a]=f}return b}function ba(a){let b=!1,c=null,d=a;return(...a)=>{b||(c=d.apply(self,a),b=!0,d=null);return c}}let u=self.AMP_CONFIG||{},v=("string"==typeof u.cdnProxyRegex?new RegExp(u.cdnProxyRegex):u.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function w(a){if(!self.document||!self.document.head||self.location&&v.test(self.location.origin))return null;let b=self.document.head.querySelector(`meta[name="${a}"]`);return b&&b.getAttribute("content")||null}let ca={thirdParty:u.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:u.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof u.thirdPartyFrameRegex?new RegExp(u.thirdPartyFrameRegex):u.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:u.cdnUrl||w("runtime-host")||"https://cdn.ampproject.org",cdnProxyRegex:v,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:u.errorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",betaErrorReporting:u.betaErrorReportingUrl||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",localDev:u.localDev||!1,trustedViewerHosts:[/(^|\.)google\.(com?|[a-z]{2}|com?\.[a-z]{2}|cat)$/,/(^|\.)gmail\.(com|dev)$/],geoApi:u.geoApiUrl||w("amp-geo-api")};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let x=self.__AMP_LOG;function y(){if(!x.user)throw Error("failed to call initLogConstructor");return x.user}function z(){if(x.dev)return x.dev;throw Error("failed to call initLogConstructor")}function A(a,b,c){y().assert(a,b,c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}function B(a){return a||{}}class da{constructor(a){this.va=a;this.U=this.ga=0;this.K=Object.create(null)}has(a){return!!this.K[a]}get(a){let b=this.K[a];if(b)return b.access=++this.U,b.payload}put(a,b){this.has(a)||this.ga++;this.K[a]={payload:b,access:this.U};if(!(this.ga<=this.va)){a=this.K;var c=this.U+1;for(let b in a){let{access:e}=a[b];if(e<c){c=e;var d=b}}void 0!==d&&(delete a[d],this.ga--)}}}function C(a){let b=a.length-6;return 0<=b&&a.indexOf("sticky",b)==b}function D(a){return 2>a.length?!1:0==a.lastIndexOf("--",0)}let ea=B({c:!0,v:!0,a:!0,ad:!0});let E,fa;let ha=/[?&]amp_js[^&]*/,ia=/[?&]amp_gsa[^&]*/,ja=/[?&]amp_r[^&]*/,ka=/[?&]amp_kit[^&]*/,na=/[?&]usqp[^&]*/;function oa(a){E||(E=self.document.createElement("a"),fa=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new da(100)));var b=fa,c=E;if(b&&b.has(a))a=b.get(a);else{c.href=a;c.protocol||(c.href=c.href);var d={href:c.href,protocol:c.protocol,host:c.host,hostname:c.hostname,port:"0"==c.port?"":c.port,pathname:c.pathname,search:c.search,hash:c.hash,origin:null};"/"!==d.pathname[0]&&(d.pathname="/"+d.pathname);if("http:"==d.protocol&&80==d.port||"https:"==d.protocol&&443==d.port)d.port="",d.host=d.hostname;d.origin=c.origin&&"null"!=c.origin?c.origin:"data:"!=d.protocol&&d.host?d.protocol+"//"+d.host:d.href;b&&b.put(a,d);a=d}return a}function pa(a){"string"==typeof a&&(a=oa(a));var b=a;"string"==typeof b&&(b=oa(b));if(!ca.cdnProxyRegex.test(b.origin))return a.href;b=a.pathname.split("/");A(ea[b[1]],"Unknown path prefix in url %s",a.href);let c=b[2];var d="s"==c?"https://"+decodeURIComponent(b[3]):"http://"+decodeURIComponent(c);A(0<d.indexOf("."),"Expected a . in origin %s",d);b.splice(1,"s"==c?3:2);b=d+b.join("/");d=(d=a.search)&&"?"!=d?(d=d.replace(ha,"").replace(ia,"").replace(ja,"").replace(ka,"").replace(na,"").replace(/^[?&]/,""))?"?"+d:"":"";return b+d+(a.hash||"")}function qa(a){let b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(d){}let c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(let b=0;b<c.length;b++)0!=c[b].length&&("-"==c[b][0]?a[c[b].substr(1)]=!1:a[c[b]]=!0);return a}function ra(a){let b=a.ownerDocument.defaultView;var c=b.__AMP_TOP||(b.__AMP_TOP=b);let d=b!=c;if(c.__AMP__EXPERIMENT_TOGGLES)var f=c.__AMP__EXPERIMENT_TOGGLES;else{c.__AMP__EXPERIMENT_TOGGLES=Object.create(null);f=c.__AMP__EXPERIMENT_TOGGLES;if(c.AMP_CONFIG)for(var e in c.AMP_CONFIG){var g=c.AMP_CONFIG[e];"number"===typeof g&&0<=g&&1>=g&&(f[e]=Math.random()<g)}if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-doc-opt-in"])&&0<c.AMP_CONFIG["allow-doc-opt-in"].length&&(e=c.AMP_CONFIG["allow-doc-opt-in"],g=c.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){g=g.getAttribute("content").split(",");for(var h=0;h<g.length;h++)-1!=e.indexOf(g[h])&&(f[g[h]]=!0)}Object.assign(f,qa(c));if(c.AMP_CONFIG&&Array.isArray(c.AMP_CONFIG["allow-url-opt-in"])&&0<c.AMP_CONFIG["allow-url-opt-in"].length)for(e=c.AMP_CONFIG["allow-url-opt-in"],c=t(c.location.originalHash||c.location.hash),g=0;g<e.length;g++)h=c[`e-${e[g]}`],"1"==h&&(f[e[g]]=!0),"0"==h&&(f[e[g]]=!1)}let k=!!f["ampdoc-fie"];d&&!k?a=G(b,"hidden-observer")?H(b,"hidden-observer"):null:(a=I(a),a=sa(a),a=G(a,"hidden-observer")?H(a,"hidden-observer"):null);return a}function J(a,b){a=a.__AMP_TOP||(a.__AMP_TOP=a);return H(a,b)}function K(a,b){var c=I(a);c=sa(c);return H(c,b)}function I(a){return a.nodeType?J((a.ownerDocument||a).defaultView,"ampdoc").getAmpDoc(a):a}function sa(a){a=I(a);return a.isSingleDoc()?a.win:a}function H(a,b){G(a,b);{let b=a.__AMP_SERVICES;b||(b=a.__AMP_SERVICES={});a=b}b=a[b];b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));return b.obj}function G(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)}
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function ta(a){return a.parent&&a.parent!=a}class ua{constructor(a,b,c){this.qa=J(a,"timer");this.Aa=b;this.xa=c||0;this.G=-1;this.$=0;this.ea=!1;this.ta=()=>{this.G=-1;this.$=0;this.ea=!0;this.Aa();this.ea=!1}}isPending(){return-1!=this.G}schedule(a){let b=a||this.xa;this.ea&&10>b&&(b=10);let c=Date.now()+b;return!this.isPending()||-10>c-this.$?(this.cancel(),this.$=c,this.G=this.qa.delay(this.ta,b),!0):!1}cancel(){this.isPending()&&(this.qa.cancel(this.G),this.G=-1)}}let L;let va="Webkit webkit Moz moz ms O o".split(" ");function M(a,b,c){if(D(b))return b;L||(L=Object.create(null));let d=L[b];if(!d||c){d=b;if(void 0===a[b]){var f=b.charAt(0).toUpperCase()+b.slice(1);a:{for(let b=0;b<va.length;b++){let c=va[b]+f;if(void 0!==a[c]){f=c;break a}}f=""}let c=f;void 0!==a[c]&&(d=c)}c||(L[b]=d)}return d}function N(a,b,c){(b=M(a.style,b,void 0))&&(D(b)?a.style.setProperty(b,c):a.style[b]=c)}function wa(a,b){if(b=M(a.style,b,void 0))return D(b)?a.style.getPropertyValue(b):a.style[b]}function O(a,b){for(let c in b)N(a,c,b[c])}function xa(a){var b=!1;void 0===b&&(b=a.hasAttribute("hidden"));b?a.removeAttribute("hidden"):a.setAttribute("hidden","")}function ya(a,b){let c=[];let d=0;for(let f=0;f<a.length;f++){let e=a[f];b(e,f,a)?c.push(e):(d<f&&(a[d]=e),d++)}d<a.length&&(a.length=d);return c}function Q(a){if(!a.I||a.o)return a.o;a.o=new za(a.ampdoc.win.document,a.B);return a.o}function Aa(a,b){0<b.length&&a.o&&a.B.mutate(()=>{for(let c=0;c<b.length;c++){let d=b[c];"fixed"==d.position&&a.o.returnFrom(d)}})}function Ba(a){a.T.cancel();let b=a.O;b&&(b(),a.O=null)}function Ca(a,b){for(let d=0;d<b.length;d++){var c=b[d];if(4==c.type||12==c.type)Ca(a,c.cssRules);else if(1==c.type){let b=c.selectorText;c=c.style.position;"*"!==b&&c&&("fixed"===c?a.N.push(b):C(c)&&a.R.push(b))}}}function Da(a,b,c){try{for(var d=0;d<a.N.length;d++){var f=a.N[d];let e=b.querySelectorAll(f);for(let b=0;b<e.length&&!(10<a.h.length);b++)R(a,e[b],f,"fixed",void 0,c)}for(d=0;d<a.R.length;d++){let e=a.R[d],g=b.querySelectorAll(e);for(f=0;f<g.length;f++)R(a,g[f],e,"sticky",void 0,c)}}catch(e){z().error("FixedLayer","Failed to setup fixed elements:",e)}}function S(a){a.h.sort((a,c)=>{var b=a.element,f=c.element;return b===f?0:b.compareDocumentPosition(f)&(Node.DOCUMENT_POSITION_PRECEDING|Node.DOCUMENT_POSITION_CONTAINS)?1:-1})}function Ea(a){if(!a.O){var b=a.ampdoc.getRootNode();a.O=ra(b.documentElement||b).add(()=>{a.T.isPending()||a.T.schedule(16)})}}function R(a,b,c,d,f,e){f||b.hasAttribute("style")&&(wa(b,"top")||wa(b,"bottom"))&&y().error("FixedLayer","Inline styles with `top`, `bottom` and other CSS rules are not supported yet for fixed or sticky elements (#14186). Unexpected behavior may occur.",b);if(-1!==b.tagName.indexOf("LIGHTBOX"))return!1;var g;a:{for(g=b;g&&void 0!==g;g=g.parentElement)if(-1!==g.tagName.indexOf("LIGHTBOX"))break a;g=null}let h=g;if(!e&&h)return!1;e=a.h;let k=[];for(g=0;g<e.length;g++){var l=e[g].element;if(l===b)break;if(l.contains(b))return!1;b.contains(l)&&k.push(l)}for(g=0;g<k.length;g++)a.removeElement(k[g]);g=null;for(l=0;l<e.length;l++){let a=e[l];if(a.element==b&&a.position==d){g=a;break}}l="fixed"==d;g?g.selectors.includes(c)||g.selectors.push(c):(a="F"+a.wa++,b.setAttribute("i-amphtml-fixedid",a),l?b.__AMP_DECLFIXED=!0:b.__AMP_DECLSTICKY=!0,g={id:a,element:b,position:d,selectors:[c],fixedNow:!1,stickyNow:!1,lightboxed:!!h},e.push(g));g.forceTransfer=l?f:!1;return!0}function Fa(a,b){let c=[];for(let d=0;d<a.h.length;d++){let f=a.h[d];f.element===b&&(f.lightboxed||a.B.mutate(()=>{N(b,"top","")}),a.h.splice(d,1),c.push(f))}a.h.length||Ba(a);return c}class Ga{constructor(a,b,c,d,f){this.ampdoc=a;this.B=b;this.sa=c;this.L=this.ca=d;this.I=f&&a.isSingleDoc();this.o=null;this.wa=0;this.h=[];this.T=new ua(a.win,()=>this.update());this.O=null;this.N=[];this.R=[]}enterLightbox(a,b){let c=Q(this);c&&c.setLightboxMode(!0);a&&b&&b.then(()=>{Da(this,a,!0);S(this);this.update()})}leaveLightbox(){let a=Q(this);a&&a.setLightboxMode(!1);let b=ya(this.h,a=>!!a.lightboxed);Aa(this,b);this.h.length||Ba(this)}setup(){if(!K(this.ampdoc,"viewer").isEmbedded())return!1;let a=this.ampdoc.getRootNode(),b=a.styleSheets;if(!b)return!0;this.N.length=0;this.R.length=0;for(let a=0;a<b.length;a++){let c=b[a];if(!c)return z().error("FixedLayer","Aborting setup due to null stylesheet."),!0;let d=c.ownerNode;c.disabled||!d||"STYLE"!=d.tagName||d.hasAttribute("amp-boilerplate")||d.hasAttribute("amp-runtime")||d.hasAttribute("amp-extension")||Ca(this,c.cssRules)}Da(this,a,void 0);S(this);this.update();0<this.h.length&&this.observeHiddenMutations();let c=J(this.ampdoc.win,"platform");0<this.h.length&&!this.I&&c.isIos();return!0}observeHiddenMutations(){Ea(this)}updatePaddingTop(a,b){this.ca=a;b||(this.L=a);this.update()}transformMutate(a){a?this.h.forEach(b=>{b.fixedNow&&b.top&&(N(b.element,"transition","none"),b.transform&&"none"!=b.transform?N(b.element,"transform",b.transform+" "+a):N(b.element,"transform",a))}):this.h.forEach(a=>{a.fixedNow&&a.top&&O(a.element,{transform:"",transition:""})})}addElement(a,b){if(!R(this,a,"*","fixed",b))return n();S(this);this.observeHiddenMutations();return this.update()}removeElement(a){a=Fa(this,a);Aa(this,a)}isDeclaredFixed(a){return!!a.__AMP_DECLFIXED}isDeclaredSticky(a){return!!a.__AMP_DECLSTICKY}update(){this.h.filter(a=>!this.ampdoc.contains(a.element)).forEach(a=>Fa(this,a.element));if(0==this.h.length)return n();this.T.cancel();let a=!1;return this.B.runPromise({measure:b=>{let c=this.h,d=[],f=this.ampdoc.win;for(var e=0;e<c.length;e++){var g={top:"",bottom:"-9999vh",transition:"none"},h=c[e].element.style;for(var k in g)h.setProperty(M(h,k),g[k].toString(),"important")}for(g=0;g<c.length;g++)d.push((f.getComputedStyle(c[g].element)||Object.create(null)).top);for(g=0;g<c.length;g++)N(c[g].element,"bottom","");for(g=0;g<c.length;g++){e=c[g];k=e.element;let l=e.forceTransfer;h=f.getComputedStyle(k)||Object.create(null);let q=k.offsetWidth,p=k.offsetHeight,Ya=k.offsetTop,{position:la="",display:Za="",bottom:$a,zIndex:ab}=h,bb=parseFloat(h.opacity);k=h[M(h,"transform")];({top:h}=h);let F="fixed"===la&&(l||0<q&&0<p),ma=C(la);if("none"===Za||!F&&!ma){b[e.id]={fixed:!1,sticky:!1,transferrable:!1,top:"",zIndex:""};continue}if("auto"===h||d[g]!==h)h=F&&Ya===this.L+this.sa?"0px":"";let P=!1;F&&(P=!0===l?!0:!1===l?!1:0<bb&&300>p&&!(!h&&!$a));P&&(a=!0);b[e.id]={fixed:F,sticky:ma,transferrable:P,top:h,zIndex:ab,transform:k}}},mutate:b=>{a&&this.I&&Q(this).update();let c=this.h;for(let a=0;a<c.length;a++){var d=c[a];let g=b[d.id];N(d.element,"transition","none");N(d.element,"transition","");if(g){var f=a,e=g;let b=d.element,c=d.fixedNow;d.fixedNow=e.fixed;d.stickyNow=e.sticky;d.top=e.fixed||e.sticky?e.top:"";d.transform=e.transform;!c||e.fixed&&e.transferrable||!this.o||this.o.returnFrom(d);e.top&&(e.fixed||e.sticky)&&!d.lightboxed&&(e.fixed||!this.I?N(b,"top",`calc(${e.top} + ${this.ca}px)`):this.L===this.ca?N(b,"top",e.top):N(b,"top",`calc(${e.top} - ${this.L}px)`));this.I&&e.fixed&&e.transferrable&&Q(this).transferTo(d,f,e)}}}},{}).catch(a=>{z().error("FixedLayer","Failed to mutate fixed elements:",a)})}}class za{constructor(a,b){this.M=a;this.B=b;this.m=a.body.cloneNode(!1);this.m.removeAttribute("style");b=this.m;var c={position:"absolute",top:0,left:0,height:0,width:0,pointerEvents:"none",overflow:"hidden",animation:"none",background:"none",border:"none",borderImage:"none",boxSizing:"border-box",boxShadow:"none",float:"none",margin:0,opacity:1,outline:"none",padding:"none",transform:"none",transition:"none"};"display"in c&&z().error("STYLE","`display` style detected in styles. You must use toggle instead.");O(b,c);this.m.style.display="block";a.documentElement.appendChild(this.m)}getRoot(){return this.m}setLightboxMode(a){this.B.mutate(()=>{let b=this.getRoot();a?b.setAttribute("i-amphtml-lightbox",""):b.removeAttribute("i-amphtml-lightbox")})}update(){let a=this.M.body,b=this.m,c=a.attributes,d=b.attributes;for(var f=0;f<c.length;f++){var e=c[f];"style"!==e.name&&d.setNamedItem(e.cloneNode(!1))}for(f=0;f<d.length;f++)({name:e}=d[f]),"style"===e||"i-amphtml-lightbox"===e||a.hasAttribute(e)||(b.removeAttribute(e),f--)}transferTo(a,b,c){let d=a.element;if(d.parentElement!=this.m){if(!a.placeholder){N(d,"pointer-events","initial");let b=a.placeholder=this.M.createElement("i-amphtml-fpa");xa(b);b.setAttribute("i-amphtml-fixedid",a.id)}N(d,"zIndex",`calc(${1e4+b} + ${c.zIndex||0})`);a.lightboxed&&d.classList.add("i-amphtml-lightbox-element");d.parentElement.replaceChild(a.placeholder,d);this.m.appendChild(d);a.selectors.some(a=>{try{{let c=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.msMatchesSelector||d.oMatchesSelector;var b=c?c.call(d,a):!1}}catch(g){z().error("FixedLayer","Failed to test query match:",g),b=!1}return b})||this.returnFrom(a)}}returnFrom(a){if(a.placeholder&&this.M.contains(a.placeholder)){var b=a.element,c=a.placeholder;a.lightboxed&&b.classList.remove("i-amphtml-lightbox-element");this.M.contains(b)?(N(a.element,"zIndex",""),c.parentElement.replaceChild(b,c)):c.parentElement.removeChild(c)}}}let T;function U(a,b,c,d){let g,f=a,e=c;g=a=>{try{return e(a)}catch(q){throw self.__AMP_REPORT_ERROR(q),q}};let h=Ha();let k=!1;d&&(k=d.capture);f.addEventListener(b,g,h?d:k);return()=>{f&&f.removeEventListener(b,g,h?d:k);g=f=e=null}}function Ha(){if(void 0!==T)return T;T=!1;try{let a={get capture(){T=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return T}function Ia(a,b,c,d){return U(a,b,c,d)}function Ja(a,b,c){let d=c;let f=U(a,b,a=>{try{d(a)}finally{d=null,f()}},void 0)}class Ka{constructor(a,b){this.win=a;this.F=b;Ia(this.win.document,"focusin",this.V.bind(this),{capture:!1})}V(a){a.defaultPrevented||this.F.sendRequest(a.type,B({focusTargetRect:a.target.getBoundingClientRect()}),!1)}}class La{constructor(a){this.Y=a;this.J=[];this.P=0}push(a){this.J[this.P]=a;this.P=(this.P+1)%this.Y}get(a){this.J.length>=this.Y&&(a=(this.P+a)%this.Y);return this.J[a]}size(){return this.J.length}}let Ma=/[,.\s\u2022()]/;function Na(a){return"’"==a||"‘"==a?"'":"“"==a||"”"==a?'"':a.toLowerCase()}function Oa(a){let b=[];for(let d=0;d<a.length;d++){{var c=a[d];let b=[];for(let a=0;a<c.length;a++){let d=c[a];Ma.test(d)||b.push(Na(d))}c=b.join("")}let f=c;f&&b.push(f)}return b}class Pa{constructor(a,b){this.Ea=a;this.ua=b;this.matches=[];this.oa={};this.ha=a.length-1;for(b=0;b<a.length;b++)this.oa[a[b]]=a.length-1-b}update(){if(0<this.ha)this.ha--;else{var a=this.Ea,b=this.ua,c=b.size();for(let f=0;f<a.length;f++){var d=b.get(c-1-f).pos;d=Na(d.node.wholeText[d.offset]);if(a[a.length-1-f]==d)continue;let e=this.oa[d];null==e&&(e=a.length);e-=f;1>e&&(e=1);this.ha=e-1;return}var f=b.get(c-1),e=f.pos;this.matches.push({start:b.get(c-a.length),end:{pos:{node:e.node,offset:e.offset+1},idx:f.idx+1}})}}}function Qa(a,b,c){c=Oa(c);if(0>=c.length)return null;let d=new V(a,b);a=new La(c.map(a=>a.length).reduce((a,b)=>Math.max(a,b)));let f=[new Pa(c[0],a)];let e=-1;for(;;){e++;b=d.next();if(null==b)return null;if(!Ma.test(b.node.wholeText[b.offset])){a.push({pos:b,idx:e});for(b=0;b<f.length;b++)f[b].update();if(0!=f[f.length-1].matches.length){if(f.length==c.length)break;f.push(new Pa(c[f.length],a))}}}a=[];a:for(c=c.length-1;0<=c;c--){let d=f[c].matches;if(0==a.length){a.push(d[d.length-1]);continue}let e=a[a.length-1];for(b=d.length-1;0<=b;b--){var g=d[b];if(e.start.idx>=g.end.idx){a.push(g);continue a}}}c=[];for(b=a.length-1;0<=b;b--)g=a[b],c.push({start:g.start.pos,end:g.end.pos});return c}function Ra(a,b,c,d,f){if(c>=d)return null;a=a.document;let e=b.parentNode,g=b.wholeText;0<c&&e.insertBefore(a.createTextNode(g.substring(0,c)),b);let h=a.createElement("span");h.appendChild(a.createTextNode(g.substring(c,d)));e.insertBefore(h,b);f.push(h);let k=null;d<g.length&&(k=a.createTextNode(g.substring(d)),e.insertBefore(k,b));e.removeChild(b);return k}class V{constructor(a,b){this.C=a;this.aa=b;this.H=-1;this.D=null;if(b instanceof a.Text)this.H=0;else if(b instanceof a.Element){let{display:c}=a.getComputedStyle(b)||Object.create(null);"none"!=c&&(b=b.firstChild,null!=b&&(this.D=new V(a,b)))}}next(){if(0<=this.H){if(this.H<this.aa.wholeText.length){var a=this.H;this.H++;a={node:this.aa,offset:a}}else a=null;return a}for(;null!=this.D;){a=this.D.next();if(null!=a)return a;let b=this.D.aa.nextSibling;this.D=null!=b?new V(this.C,b):null}return null}}function Sa(a){return"loading"!=a.readyState&&"uninitialized"!=a.readyState}function Ta(a,b){let c=Sa(a);if(c)b(a);else{let d=()=>{Sa(a)&&(c||(c=!0,b(a)),a.removeEventListener("readystatechange",d))};a.addEventListener("readystatechange",d)}}function Ua(a){return new Promise(b=>{Ta(a,b)})}function Va(a){a=t(a.win.location.hash).highlight;if(!a||102400<a.length)return null;let b=JSON.parse(a),c=b.s;if(!(c instanceof Array)||15<c.length)return null;let d=0;for(a=0;a<c.length;a++){let b=c[a];if("string"!=typeof b||!b)return null;d+=b.length;if(1500<d)return null}let f=!1;b.n&&(f=!0);let e=!1;b.na&&(e=!0);return{sentences:c,skipScrollAnimation:e,skipRendering:f}}function Wa(a,b){if(a.j.win.document.querySelector('script[id="amp-access"]'))W(a,"has_amp_access");else if(Xa(a,b),a.l){var c=X(a);W(a,"found",B({scroll:c}));if(!b.skipRendering){for(let b=0;b<a.l.length;b++)O(a.l[b],{backgroundColor:"#fcff00",color:"#000"});var d=a.j.getVisibilityState();b.skipScrollAnimation?"visible"==d?cb(a,c):(a.w.setScrollTop(c),a.onVisibleOnce(()=>{cb(a,X(a))})):"visible"==d?db(a,c):(a.w.setScrollTop(Math.max(0,c-500)),a.onVisibleOnce(()=>{db(a,X(a))}));Ja(a.j.getBody(),"click",a.la.bind(a))}}else W(a,"not_found")}function W(a,b,c){b=B({state:b});for(let a in c)b[a]=c[a];a.Fa.sendMessage("highlightState",b)}function Xa(a,b){var c=a.j.win;if(b=Qa(c,a.j.getBody(),b.sentences)){var d=[],f=null;for(var e=0;e<b.length;e++){var g=b[e];f&&f.end.node==g.start.node&&f.end.offset==g.start.offset?f.end=g.end:(f=g,d.push(g))}b=d;d=[];for(f=0;f<b.length;f++){e=b[f];var h=c,k=e.start,l=e.end;e=b;g=f;for(var q=d;;){if(k.node==l.node){if(k=Ra(h,k.node,k.offset,l.offset,q))for(h=l,g+=1;g<e.length;g++){l=e[g];if(h.node!=l.start.node)break;l.start.node=k;l.start.offset-=h.offset;if(h.node!=l.end.node)break;l.end.node=k;l.end.offset-=h.offset}break}a:{var p=!0;let a=k.node;for(;;){if(null==a){p=null;break a}if(p){let b=a.nextSibling;b?(a=b,p=!1):a=a.parentNode}else{if(a instanceof h.Text){p=a;break a}a.firstChild?a=a.firstChild:p=!0}}}Ra(h,k.node,k.offset,k.node.wholeText.length,q);if(!p)break;k={node:p,offset:0}}}(c=d)&&0!=c.length&&(a.l=c)}}function X(a){var b=a.l;if(!b)return 0;a=a.w;let c=Number.MAX_VALUE,d=0;let f=a.getPaddingTop();for(let l=0;l<b.length;l++){var e=a.getLayoutRect(b[l]),g=-f;if(0==g||0==e.width&&0==e.height)var h=e;else{h=e.left+0;g=e.top+g;var k=e.width;e=e.height;h={left:h,top:g,width:k,height:e,bottom:g+e,right:h+k,x:h,y:g}}let{top:q,bottom:p}=h;c=Math.min(c,q);d=Math.max(d,p)}if(c>=d)return 0;b=a.getHeight()-f;b=(d+c-b)/2;b>c-80&&(b=c-80);return 0<b?b:0}function cb(a,b){W(a,"auto_scroll");a.w.setScrollTop(b);W(a,"shown")}function db(a,b){a.w.setScrollTop(Math.max(0,b-500));let c=a.j.win.document.createElement("div");c.style.display="block";O(c,{position:"absolute",top:Math.floor(b)+"px",height:"1px",left:"0",width:"1px","pointer-events":"none"});let d=a.j.getBody();d.appendChild(c);W(a,"auto_scroll");a.w.animateScrollIntoView(c).then(()=>{d.removeChild(c);{let c=X(a),d=a.w.getScrollTop();if(d==c&&d==b)var f=null;else f={},d!=c&&(a.w.setScrollTop(c),f.nd=d-c),d!=b&&(f.od=d-b)}W(a,"shown",f)})}class eb{constructor(a,b){this.j=a;this.Fa=K(a,"viewer");this.w=K(this.j,"viewport");this.l=null;Ua(a.win.document).then(()=>{Wa(this,b)})}onVisibleOnce(a){a=ba(a);this.j.onVisibilityChanged(()=>{"visible"==this.j.getVisibilityState()&&a()})}setupMessaging(a){a.registerHandler("highlightDismiss",this.la.bind(this))}la(){if(this.l)for(let c=0;c<this.l.length;c++){var a=this.l[c],b=["backgroundColor","color"];for(let c=0;c<b.length;c++)N(a,b[c],null)}}}let fb="key code location ctrlKey shiftKey altKey metaKey repeat isComposing charCode keyCode which".split(" ");class gb{constructor(a,b){this.win=a;this.F=b;a=this.W.bind(this);U(this.win,"keydown",a,void 0);U(this.win,"keypress",a,void 0);U(this.win,"keyup",a,void 0)}W(a){hb(a)||this.V(a)}V(a){this.F.sendRequest(a.type,ib(a),!1)}}function hb(a){if(a.defaultPrevented)return!0;if("Escape"==a.key)return!1;switch(a.target.nodeName){case"INPUT":return"checkbox"!=a.target.type||" "==a.key;case"TEXTAREA":case"BUTTON":case"SELECT":case"OPTION":return!0}return a.target.hasAttribute&&a.target.hasAttribute("contenteditable")}function ib(a){let b={};fb.forEach(c=>{void 0!==a[c]&&(b[c]=a[c])});return b}function jb(a){if("string"!=typeof a)return a;if("{"!=a.charAt(0))return null;try{return JSON.parse(a)}catch(b){return null}}class kb{constructor(a,b,c){this.C=a;this.ba=b;this.pa=c}addEventListener(a,b){this.C.addEventListener("message",a=>{a.origin==this.ba&&a.source==this.pa&&b(a)})}postMessage(a){this.pa.postMessage(a,"null"===this.ba?"*":this.ba)}start(){}}function Y(a,b,c){if(a.C){var d="amp-messaging-error-logger: "+b;d+=" data: "+(c?c.message?c.message:String(c):"unknown error");a.C.viewerState=d}}function lb(a,b){var c=a.Z[b.name];c||(c=a.ka);if(!c)throw c=Error("Cannot handle request because no default handler is set!"),c.args=b.name,c;c=c(b.name,b.data,!!b.rsvp);if(b.rsvp){let d=b.requestid;if(!c)throw mb(a,d,b.name,Error("no response")),Error("expected response but none given: "+b.name);c.then(c=>{Z(a,{app:"__AMPHTML__",requestid:d,type:"s",name:b.name,data:c})},c=>{mb(a,d,b.name,c)})}}function Z(a,b){let c=Object.assign(b,{});a.S&&!a.ra&&(c.messagingToken=a.S);a.da.postMessage(a.Ba?JSON.stringify(c):c)}function mb(a,b,c,d){let f=d?d.message?d.message:String(d):"unknown error";Y(a,"amp-viewer-messaging: sendResponseError_, message name: "+c,f);Z(a,{app:"__AMPHTML__",requestid:b,type:"s",name:c,data:null,error:f})}class nb{constructor(a,b,c,d,f){this.C=a;this.da=b;this.Ba=!!c;this.S=d||null;this.ra=!!f;this.Ca=0;this.ja={};this.Z={};this.ka=null;this.da.addEventListener("message",this.ya.bind(this));this.da.start()}registerHandler(a,b){this.Z[a]=b}unregisterHandler(a){delete this.Z[a]}setDefaultHandler(a){this.ka=a}ya(a){if((a=jb(a.data))&&"__AMPHTML__"===a.app)if(this.S&&this.ra&&a.messagingToken!==this.S)Y(this,"amp-viewer-messaging: handleMessage_ error: ","invalid token");else if("q"===a.type)lb(this,a);else if("s"===a.type){let b=a.requestid,c=this.ja[b];c&&(delete this.ja[b],a.error?(Y(this,"amp-viewer-messaging: handleResponse_ error: ",a.error),c.reject(Error(`Request ${a.name} failed: ${a.error}`))):c.resolve(a.data))}}sendRequest(a,b,c){let d=++this.Ca;let f=void 0;c&&(f=new Promise((a,b)=>{this.ja[d]={resolve:a,reject:b}}));Z(this,{app:"__AMPHTML__",requestid:d,type:"q",name:a,data:b,rsvp:c});return f}}let ob="altKey charCode ctrlKey detail eventPhase key layerX layerY metaKey pageX pageY returnValue shiftKey timeStamp type which".split(" "),pb="clientX clientY force identifier pageX pageY radiusX radiusY screenX screenY".split(" ");function qb(a){let b=a.W.bind(a),c=a.win.document,d={capture:!1,passive:!a.fa};a.ia.push(U(c,"touchstart",b,d),U(c,"touchend",b,d),U(c,"touchmove",b,d))}function rb(a){a.ia.forEach(a=>a());a.ia.length=0}function sb(a,b){let c={};for(let d=0;d<b.length;d++){let f=b[d];void 0!==a[f]&&(c[f]=a[f])}return c}function tb(a){let b=[];for(let c=0;c<a.length;c++)b.push(sb(a[c],pb));return b}class ub{constructor(a,b){this.win=a;this.F=b;this.fa=!1;this.ia=[];b.registerHandler("scrollLock",this.Da.bind(this));qb(this)}W(a){switch(a.type){case"touchstart":case"touchend":case"touchmove":if(a&&a.type){var b=sb(a,ob);a.touches&&(b.touches=tb(a.touches));a.changedTouches&&(b.changedTouches=tb(a.changedTouches));this.F.sendRequest(a.type,b,!1)}this.fa&&a.cancelable&&a.preventDefault()}}Da(a,b,c){this.fa=!!b;rb(this);qb(this);return c?Promise.resolve({}):void 0}}function vb(a,b,c){return new Promise(d=>{let f=Ia(a.win,"message",e=>{let g=jb(e.data);if(g&&e.origin===c&&e.source===b&&"__AMPHTML__"==g.app&&"handshake-poll"==g.name){if(a.A&&(!e.ports||!e.ports.length))throw Error("Did not receive communication port from the Viewer!");e=e.ports&&0<e.ports.length?e.ports[0]:new kb(a.win,c,a.win.parent);d(e);f()}})})}function wb(a,b,c,d,f){let e=c.getUrl(),g=pa(e);return f.sendRequest("channelOpen",B({url:e,sourceUrl:g}),!0).then(()=>{xb(a,f,b,d)})}function xb(a,b,c,d){b.setDefaultHandler((a,b,d)=>c.receiveMessage(a,b,d));c.setMessageDeliverer(b.sendRequest.bind(b),d);Ja(a.win,"unload",a.za.bind(a,b));(c.hasCapability("swipe")||c.hasCapability("touch"))&&new ub(a.win,b);c.hasCapability("keyboard")&&new gb(a.win,b);c.hasCapability("focus-rect")&&new Ka(a.win,b);null!=a.X&&a.X.setupMessaging(b)}class yb{constructor(a){this.win=a;this.ma=this.A=!1;this.X=null}init(){let a=I(this.win.document),b=K(a,"viewer");this.A="1"==b.getParam("webview");this.ma=b.hasCapability("handshakepoll");let c=b.getParam("messagingToken"),d=b.getParam("origin")||"";if(!this.A&&!d)return n();K(a,"viewport").createFixedLayer(Ga);if(this.A||this.ma){var f=ta(this.win)?this.win.parent:null;return vb(this,f,d).then(e=>wb(this,b,a,d,new nb(this.win,e,this.A,c)))}if(f=Va(a))this.X=new eb(a,f);f=new kb(this.win,d,this.win.parent);return wb(this,b,a,d,new nb(this.win,f,this.A,c))}za(a){return a.sendRequest("unloaded",{},!0)}}(function(a){new yb(a.win).init()})(self.AMP)}});