(self.AMP=self.AMP||[]).push({n:"amp-megaphone",v:"2008290323002",f:function(AMP,_){let f=Object.prototype.toString;let g=self.AMP_CONFIG||{},m=("string"==typeof g.cdnProxyRegex?new RegExp(g.cdnProxyRegex):g.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function n(a){if(self.document&&self.document.head&&(!self.location||!m.test(self.location.origin))){var b=self.document.head.querySelector(`meta[name="${a}"]`);b&&b.getAttribute("content")}}g.cdnUrl||n("runtime-host");g.geoApiUrl||n("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};let p=self.__AMP_LOG;function q(a){return a||{}}function r(a){return 1>a.length?!1:0==a.lastIndexOf("{",0)}q({c:!0,v:!0,a:!0,ad:!0});
/*
    https://mths.be/cssescape v1.5.1 by @mathias | MIT license */let t;function u(a,b){let e,c=a,h=b;e=a=>{try{return h(a)}catch(k){throw self.__AMP_REPORT_ERROR(k),k}};let l=v();c.addEventListener("message",e,l?void 0:!1);return()=>{c&&c.removeEventListener("message",e,l?void 0:!1);e=c=h=null}}function v(){if(void 0!==t)return t;t=!1;try{let a={get capture(){t=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(a){}return t}function w(a){a.j=a.element.hasAttribute("data-playlist");a.l=`https://${a.j?"playlist":"player"}.megaphone.fm`}function y(a){w(a);var b=a.element.getAttribute("data-playlist")||a.element.getAttribute("data-episode");var c=a.element;if(!p.user)throw Error("failed to call initLogConstructor");b=p.user.assert(b,"data-playlist or data-episode is required for <amp-megaphone> %s",c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);let h=a.element.hasAttribute("data-light"),e=a.element.hasAttribute("data-sharing"),l=a.element.getAttribute("data-episodes");c=a.element.getAttribute("data-start");let x=a.element.hasAttribute("data-tile"),k=q({p:a.j?b:void 0,light:h||void 0,sharing:e||void 0,episodes:a.j&&l||void 0,start:!a.j&&c||void 0,tile:!a.j&&x||void 0});a=a.l+"/"+(a.j?"":b+"/");b=[];for(d in k)if(c=k[d],null!=c)if(Array.isArray(c))for(let a=0;a<c.length;a++){let e=c[a];b.push(`${encodeURIComponent(d)}=${encodeURIComponent(e)}`)}else b.push(`${encodeURIComponent(d)}=${encodeURIComponent(c)}`);var d=b.join("&");d?(a=a.split("#",2),b=a[0].split("?",2),d=b[0]+(b[1]?`?${b[1]}&${d}`:`?${d}`),d+=a[1]?`#${a[1]}`:""):d=a;return d}class z extends AMP.BaseElement{constructor(a){super(a);this.m=this.h=null;this.j=!1;this.l=""}preconnectCallback(a){var b=this.win;b=b.__AMP_TOP||(b.__AMP_TOP=b);var c=b.__AMP_SERVICES;c||(c=b.__AMP_SERVICES={});b=c;b=b.preconnect;b.obj||(b.obj=new b.ctor(b.context),b.ctor=null,b.context=null,b.resolve&&b.resolve(b.obj));b=b.obj;c=this.getAmpDoc();b.url(c,this.l,a);b.url(c,"https://assets.megaphone.fm",a);b.url(c,"https://megaphone.imgix.net",a)}isLayoutSupported(a){return"fixed"==a||"fixed-height"==a}buildCallback(){this.element.classList.add("i-amphtml-media-component");w(this)}mutatedAttributesCallback(){w(this);this.h&&(this.h.src=y(this))}layoutCallback(){let a=this.element.ownerDocument.createElement("iframe");a.setAttribute("frameborder","no");a.setAttribute("scrolling","no");a.src=y(this);var b=this.o.bind(this);this.m=u(this.win,b);this.applyFillContent(a);this.element.appendChild(a);this.h=a;return this.loadPromise(a)}unlayoutCallback(){if(this.h){var a=this.h;a.parentElement&&a.parentElement.removeChild(a);this.h=null}this.m&&this.m();return!0}o(a){if(a.origin==this.l&&a.source==this.h.contentWindow){var b=a.data;if(b&&("[object Object]"===f.call(b)||r(b))){if("[object Object]"===f.call(b))var c=b;else try{c=JSON.parse(b)}catch(h){c=null}a=c;"iframe.resize"==a.context&&this.attemptChangeHeight(a.height).catch(()=>{})}}}pauseCallback(){this.h&&this.h.contentWindow&&this.h.contentWindow.postMessage(JSON.stringify(q({method:"pause"})),this.l)}}(a=>{a.registerElement("amp-megaphone",z)})(self.AMP)}});