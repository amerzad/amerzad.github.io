{"version":3,"mappings":"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","names":["tryDecodeUriComponent_","component","fallback","decodeURIComponent","e","regex","env","self","cdnProxyRegex","RegExp","getMetaUrl","name","metaEl","user","dev","userForEmbed","logs","opt_element","getUserLogger","win","Error","hasOwn_","Object","getExperimentToggles","experimentsString","LOCAL_STORAGE_KEY","tokens","toggles","i","getServiceForDoc","elementOrAmpDoc","id","ampdoc","getAmpdoc","holder","getAmpdocServiceHolder","getServiceInternal","nodeOrDoc","getAmpdocService","a","isServiceRegistered","services","s","getServices","service","scopeSelectorSupported","getDataParamsFromAttributes","element","opt_paramPattern","PREFIX_DATA_ATTR","computeParamNameFunc","key","dataset","params","paramPattern","matches","param","iterateCursor","iterable","cb","length","parseAttribute","attribute","newAttr","getScopeElements","ampDoc","configOpts","doc","cssSelector","selection","filteredSelection","hasAttributeValues","htmlElement","anchorAttr","attrKeys","reg","WL_ANCHOR_ATTR","REG_DOMAIN_URL","PAGE_PROP_ALLOWLIST","SOURCE_URL","DOCUMENT_REFERRER","isListed_","anchor","listElements_","filter","filtered","isInternalLink_","trimmedDomains","href","domain","domainHrefMatch","replaceVars_","vars","val","Math","rewrittenUrl_","replace","encodeURIComponent","LinkRewriter","constructor","referrer","ampElement","this","ampDoc_","test","tagName","undefined","el","testElement","testChild","n","d","root","selector","unique","scopedSelector","elements","g","childElementsByTag","scripts","script","k","JSON","unusedError","l","getChildJsonConfig","TAG","config","getConfigJson","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","configOpts_","output","section","referrer_","document","topWin","isEmbed","f","experimentId","frequency","Array","allowed","meta","optedInExperiments","queryString","match","value","c","parseQueryString_","ampdocFieExperimentOn","experimentToggles","E","D","getServiceForDocOrNullInternal","urlReplacementService_","handleClick","isRewritten_","sourceTrimmedDomain","get","Services","canonicalTrimmedDomain","setRedirectUrl_","expandUrlSync","attachClickEvent_","getAmpDoc","nav","rewriter_","LINK_REWRITER_MANAGER","AmpLinkRewriter","AMP","super","buildCallback","viewer","whenReady","then","letsRockIt_","bind","isLayoutSupported","layout","NODISPLAY"],"sources":["src/url-try-decode-uri-component.js","src/url-parse-query-string.js","src/config.js","src/log.js","src/utils/object.js","src/experiments.js","src/service.js","src/css.js","src/dom.js","extensions/amp-link-rewriter/0.1/link-rewriter.js","extensions/amp-link-rewriter/0.1/config-options.js","extensions/amp-link-rewriter/0.1/scope.js","src/json.js","src/url.js","src/ampdoc-fie.js","src/services.js","extensions/amp-link-rewriter/0.1/amp-link-rewriter.js","src/service/navigation.js","src/layout.js"],"file":"amp-link-rewriter-0.1.mjs","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}