{"version":3,"sources":["src/utils/promise.js"," [synthetic:util/objectcreate] "," [synthetic:util/global] "," [synthetic:util/shouldpolyfill] "," [synthetic:es6/util/setprototypeof] ","src/types.js","src/config.js","src/log.js","src/utils/object.js","src/string.js","extensions/amp-megaphone/0.1/amp-megaphone.js","src/url.js","src/event-helper-listen.js","src/event-helper.js"," [synthetic:es6/util/inherits] ","src/service.js","src/services.js","src/layout.js","src/video-interface.js","src/dom.js","src/json.js"],"names":["$jscomp.objectCreate","$jscomp.getGlobal","$jscomp.setPrototypeOf","toString_","Object","env","self","cdnProxyRegex","RegExp","getMetaUrl","name","metaEl","user","dev","userForEmbed","logs","dict","opt_initial","startsWith","string","prefix","optsSupported","internalListenImplementation","element","listener","localElement","localListener","wrapped","event","e","detectEvtListenerOptsSupport","eventType","opt_evtListenerOpts","capture","undefined","options","err","constructor","AmpMegaphone","iframe_","unlistenMessage_","isPlaylist_","baseUrl_","AMP","preconnectCallback","opt_onLayout","win","services","holder","s","ampdoc","getAmpDoc","getService","preconnect","isLayoutSupported","layout","FIXED","FIXED_HEIGHT","buildCallback","MEDIA_COMPONENT_CLASSNAME","updateBaseUrl_","mutatedAttributesCallback","src","getIframeSrc_","layoutCallback","iframe","ownerDocument","createElement","handleMegaphoneMessages_","bind","applyFillContent","appendChild","loadPromise","unlayoutCallback","getAttribute","Error","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","hasLightTheme","hasAttribute","hasSharing","episodes","start","hasTile","queryParams","userAssert","url","k","v","params","Array","i","sv","encodeURIComponent","serializeQueryString","mainAndFragment","newUrl","mainAndQuery","appendEncodedParamStringToUrl","contentWindow","eventData","isObject","JSON","tryParseJson","data","attemptChangeHeight","catch","pauseCallback","postMessage"],"mappings":"A;aAqCA,IAAA,CAAA,CCPAA,EACmD,UAA/C,EAAuB,MAAO,OAAA,OAA9B,CACA,MAAA,OADA,CAEA,QAAQ,CAAC,CAAD,CAAY,CAEP,QAAA,EAAQ,EAAG,EACtB,CAAA,UAAA,CAAiB,CACjB,OAAO,KAAI,CAJO,CCAJ,SAAA,EAAQ,CAAC,CAAD,CAAe,CAuBzC,IAtBA,IAAI,EAAkB,CAKpB,QALoB,EAKR,MAAO,WALC,EAKa,UALb,CAcpB,CAdoB,CAgBpB,QAhBoB,EAgBR,MAAO,OAhBC,EAgBS,MAhBT,CAkBpB,QAlBoB,EAkBR,MAAO,KAlBC,EAkBO,IAlBP,CAoBpB,QApBoB,EAoBR,MAAO,OApBC,EAoBS,MApBT,CAAtB,CAsBS,EAAI,CAAb,CAAgB,CAAhB,CAAoB,CAAA,OAApB,CAA4C,EAAE,CAA9C,CAAiD,CAC/C,IAAI,EAAc,CAAA,CAAgB,CAAhB,CAOlB,IAAI,CAAJ,EAAmB,CAAA,KAAnB,EAA0C,IAA1C,CACE,MAT6C,CAoBlC,SAAQ,EAAG,CAClB,KAAU,MAAJ,CAAU,2BAAV,CAAN,CADkB,CAAX,CADO,EA1CmB,CAsD1BC,CAAA,CAAkB,IAAlB,CC1DK,WAAlB,GAAA,MAAO,OAAP,EAAuC,MAAA,CAAO,GAAP,CCqBlB,KAAA,CAAA;GACiC,UADjC,EACC,MAAO,OAAA,eADR,CAErB,CAAA,CAAA,MAAA,eAFqB,KAAA,CAGrB,IAAA,CAxByC,EAAA,CAAA,CAC3C,IAAI,EAAI,CAAC,EAAG,CAAA,CAAJ,CAAR,CACI,EAAI,EACR,IAAI,CACF,CAAA,UAAA,CAAc,CACd,EAAA,CAAO,CAAA,EAAP,OAAA,CAFE,CAGF,MAAO,CAAP,CAAU,EAGZ,CAAA,CAAO,CAAA,CAToC,CAwBzC,CAAA,CAAA,CAAA,CAAA,QAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,UAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,CAAA,CAAA,KAAA,KAAA,SAAA,CAAA,CAAA,CAAA,oBAAA,CAAA,CAAA,MAAA,EAAA,CAAA,CAAA,IAHqB,CAAzB,IAAAC,EAAyB,C,CCjCzB,IAAMC,EAAYC,MAAAA,UAAAA,S,CCMlB,IAAMC,EAAMC,IAAAA,WAAND,EAAyB,EAA/B,CAOME,GAC4B,QAA/B,EAAA,MAAOF,EAAAA,cAAP,CACG,IAAIG,MAAJ,CAAWH,CAAAA,cAAX,CADH,CAEGA,CAAAA,cAHAE,GAIJ,qDAYFE,SAASA,EAAT,CAAoBC,CAApB,CAA0B,CAOxB,GALKJ,IAAAA,SAKL,EALuBA,IAAAA,SAAAA,KAKvB,GAAIA,CAAAA,IAAAA,SAAJ,EAAqBC,CAAAA,CAAAA,KAAAA,CAAmBD,IAAAA,SAAAA,OAAnBC,CAArB,EAAA,CAIA,IAAMI,EAASL,IAAAA,SAAAA,KAAAA,cAAAA,CACZ,aADYA,CACCI,CADDJ,CACZ,IADYA,CAGPK,EAAD,EAAWA,CAAAA,aAAAA,CAAoB,SAApBA,CAPlB,CAPwB,CAuBtBN,CAAAA,OALgB,EAKCI,CAAAA,CAAW,cAAXA,CA2BXJ,EAAAA,UAAAA,EAAoBI,CAAAA,CAAW,aAAXA,C,CC+nB9BH,IAAAA,UAAAA,CAAiBA,IAAAA,UAAjBA,EAAmC,CACjCM,KAAM,IAD2B,CAEjCC,IAAK,IAF4B,CAGjCC,aAAc,IAHmB,CAMnC,KAAMC,EAAOT,IAAAA,U,CCrrBNU,QAASA,EAAT,CAAcC,CAAd,CAA2B,CAGhC,MAAmCA,EAAnC,EAAkD,EAHlB,C,CC6B3BC,QAASA,EAAT,CAAoBC,CAApB,CAAoC,CACzC,MAAIC,EAAJ,CAAoBD,CAAAA,OAApB,CACS,CAAA,CADT,CAGwC,CAHxC,EAGOA,CAAAA,YAAAA,CC4G6CC,GD5G7CD,CAA2B,CAA3BA,CAJkC,C,CEhDfH,CAAAA,CAAK,CAE/B,EAAK,CAAA,CAF0B,CAI/B,EAAK,CAAA,CAJ0B,CAM/B,EAAK,CAAA,CAN0B,CAQ/B,GAAM,CAAA,CARyB,CAALA,C,C;;ACR5B,IAAIK,CAqBGC,SAASA,EAAT,CACLC,CADK,CAGLC,CAHK,CAKL,CACA,IAAIC,EAAeF,CAAnB,CACIG,EAAgBF,CAMpBG,KAAAA,EAAWC,QAAAA,CAAAA,CAAAA,CAAU,CACnB,GAAI,CACF,MAAOF,EAAAA,CAAcE,CAAdF,CADL,CAEF,MAAOG,CAAP,CAAU,CAGV,KADAvB,KAAAA,mBAAAA,CAAwBuB,CAAxBvB,CACMuB,CAAAA,CAAN,CAHU,CAHO,CASrB,KAAMR,EAAgBS,CAAAA,EAKtBL,EAAAA,iBAAAA,CFmCIM,SEnCJN,CAEEE,CAFFF,CAGEJ,CAAAA,CCViDW,IAAAA,EDUjDX,CAPYY,CAAAA,CAIdR,CAKA,OAAO,SAAA,EAAM,CACPA,CAAJ,EACEA,CAAAA,oBAAAA,CF4BAM,SE5BAN,CAEEE,CAFFF,CAGEJ,CAAAA,CCjB6CW,IAAAA,EDiB7CX,CAdQY,CAAAA,CAWVR,CASFE,EAAAA,CADAF,CACAE,CAFAD,CAEAC,CAFgB,IATL,CA3Bb,CAgDKG,QAASA,EAAT,EAAwC,CAE7C,GAAsBI,IAAAA,EAAtB,GAAIb,CAAJ,CACE,MAAOA,EAGTA,EAAAA,CAAgB,CAAA,CAChB,IAAI,CAEF,IAAMc,EAAU,CACVF,WAAU,EAAA,CACZZ,CAAAA,CAAgB,CAAA,CADJ,CADA,CAKhBf,KAAAA,iBAAAA,CAAsB,cAAtBA,CAAsC,IAAtCA,CAA4C6B,CAA5C7B,CACAA,KAAAA,oBAAAA,CAAyB,cAAzBA,CAAyC,IAAzCA,CAA+C6B,CAA/C7B,CARE,CASF,MAAO8B,CAAP,CAAY,EAGd,MAAOf,EAnBsC,C,CFpD7CgB,QAFIC,EAEO,CAACf,CAAD,CAAU,CACnB,CAAA,CAAA,GAAA,YAAA,KAAA,CAAA,IAAA,CAAMA,CAAN,CAAA,EAAA,IAGA,EAAAgB,EAAA,CAAe,IAGf,EAAAC,EAAA,CAAwB,IAGxB,EAAAC,EAAA,CAAmB,CAAA,CAGnB,EAAAC,EAAA,CAAgB,EAbG,OAAA,EAAA,CAFIC,IAAAA,EAAAA,GAAAA,YAArBL,EIgBJ,UAAA,CAAsBtC,CAAA,CAAqB,CAAA,UAArB,CJhBlBsC,EIiBa,UAAA,YAAA,CJjBbA,CIkBJ,IAAIpC,CAAJ,CAIEA,CAAA,CJtBEoC,CIsBF,CAA0B,CAA1B,CAJF,KAQE,KAAK,IAAI,CAAT,GAAc,EAAd,CACE,GAAS,WAAT,EAAI,CAAJ,CAIA,GAAI,MAAA,iBAAJ,CAA6B,CAC3B,IAAI,EAAa,MAAA,yBAAA,CAAgC,CAAhC,CAA4C,CAA5C,CACb,EAAJ,EACE,MAAA,eAAA,CJlCJA,CIkCI,CAAiC,CAAjC,CAAoC,CAApC,CAHyB,CAA7B,IJ/BAA,EIsCE,CAAU,CAAV,CAAA,CAAe,CAAA,CAAW,CAAX,CJtCjBA,EI2CJ,EAAA,CAAwB,CAAA,UJrBxBM,EAAAA,CAAAA,CAAAA,UAAAA;CAAAA,mBAAAA,CAAAA,QAAkB,CAACC,CAAD,CAAe,CACWC,IAAAA,EAAAA,IAAAA,IKsI5CA,EAAAA,CAAmBA,CA8HZA,UA9HPA,GAAmBA,CA8HMA,UA9HzBA,CAAmBA,CAAnBA,CAgUA,KAAIC,EA/TsBD,CA+TXE,eACVD,EAAL,GACEA,CADF,CAhU0BD,CAiUbE,eADb,CACqC,EADrC,CA1HMC,EAAAA,CA6HCF,CA7HGA,WACLE,EAAAA,IAAL,GAGEA,CAAAA,IAMA,CANQ,IAAIA,CAAAA,KAAJ,CAAWA,CAAAA,QAAX,CAMR,CAJAA,CAAAA,KAIA,CAJS,IAIT,CAHAA,CAAAA,QAGA,CAHY,IAGZ,CAAIA,CAAAA,QAAJ,EACEA,CAAAA,QAAAA,CAAUA,CAAAA,IAAVA,CAVJ,CAaA,EAAA,CAAOA,CAAAA,IL1VCC,EAAAA,CAAS,IAAAC,UAAA,EMsXRC,ENpXPC,IAAAA,CAAeH,CAAfG,CAAuB,IAAAX,EAAvBW,CAAsCR,CAAtCQ,CMoXOD,ENlXPC,IAAAA,CAAeH,CAAfG,CAAuB,6BAAvBA,CAAsDR,CAAtDQ,CMkXOD,ENhXPC,IAAAA,CAAeH,CAAfG,CAAuB,6BAAvBA,CAAsDR,CAAtDQ,CAR+B,CAYjCC,EAAAA,kBAAAA,CAAAA,QAAiB,CAACC,CAAD,CAAS,CACxB,MO3CKC,OP2CL,EAAyBD,CAAzB,EO1CYE,cP0CZ,EAAyBF,CADD,CAK1BG;CAAAA,cAAAA,CAAAA,QAAa,EAAG,CACM,IAAAnC,QQkgBtBA,UAAAA,IAAAA,CAZuCoC,2BAYvCpC,CRjgBEqC,EAAA,CAAAA,IAAA,CAFc,CAMhBC,EAAAA,0BAAAA,CAAAA,QAAyB,EAAG,CAC1BD,CAAA,CAAAA,IAAA,CACI,KAAArB,EAAJ,GACE,IAAAA,EAAAuB,IADF,CACqBC,CAAA,CAAAA,IAAA,CADrB,CAF0B,CAQ5BC,EAAAA,eAAAA,CAAAA,QAAc,EAAG,CACf,IAAMC,EAAS,IAAA1C,QAAA2C,cAAAC,cAAA,CAAyC,QAAzC,CAEfF,EAAAA,aAAAA,CAAoB,aAApBA,CAAmC,IAAnCA,CACAA,EAAAA,aAAAA,CAAoB,WAApBA,CAAiC,IAAjCA,CAEAA,EAAAA,IAAAA,CAAaF,CAAA,CAAAA,IAAA,CAKX,KAAA,EAAA,IAAAK,EAAAC,KAAA,CAAmC,IAAnC,CAHF,KAAA7B,EAAA,CGvCKlB,CAAAA,CHwCH,IAAAwB,IGxCGxB,CAGLE,CAHKF,CH6CL,KAAAgD,iBAAA,CAAsBL,CAAtB,CACA,KAAA1C,QAAAgD,YAAA,CAAyBN,CAAzB,CAEA,KAAA1B,EAAA,CAAe0B,CAEf,OAAO,KAAAO,YAAA,CAAiBP,CAAjB,CAnBQ,CAuBjBQ;CAAAA,iBAAAA,CAAAA,QAAgB,EAAG,CACjB,GAAI,IAAAlC,EAAJ,CAAkB,CACFA,IAAAA,EAAAA,IAAAA,ESNdhB,EAAAA,cAAJ,EACEA,CAAAA,cAAAA,YAAAA,CAAkCA,CAAlCA,CTME,KAAAgB,EAAA,CAAe,IAFC,CAId,IAAAC,EAAJ,EACE,IAAAA,EAAA,EAEF,OAAO,CAAA,CARU,CAenBuB;QAAAA,EAAa,CAAbA,CAAa,CAAG,CACdH,CAAA,CAAAA,CAAA,CAGE,KAAA,EAAA,CAAArC,QAAAmD,aAAA,CAA0B,eAA1B,CAAA,EACE,CAAAnD,QAAAmD,aAAA,CAA0B,cAA1B,CAEFnD,KAAAA,EAAAA,CAAAA,QHyoBJ,IAAI,CAACR,CAAAA,KAAL,CAoBE,KAAU4D,MAAJ,CAAU,mCAAV,CAAN,CA8JF,CAAA,CA9KS5D,CAAAA,KA8KFH,OAAAA,CACLgE,CADKhE,CG5zBHiE,kEH4zBGjE,CAGLkE,CAHKlE,CATPmE,IAAAA,EASOnE,CARPoE,IAAAA,EAQOpE,CAPPqE,IAAAA,EAOOrE,CANPsE,IAAAA,EAMOtE,CALPuE,IAAAA,EAKOvE,CAJPwE,IAAAA,EAIOxE,CAHPyE,IAAAA,EAGOzE,CAFP0E,IAAAA,EAEO1E,CGxzBL,KAAM2E,EAAgB,CAAAhE,QAAAiE,aAAA,CAA0B,YAA1B,CAAtB,CACMC,EAAa,CAAAlE,QAAAiE,aAAA,CAA0B,cAA1B,CADnB,CAEME,EAAW,CAAAnE,QAAAmD,aAAA,CAA0B,eAA1B,CACXiB,EAAAA,CAAQ,CAAApE,QAAAmD,aAAA,CAA0B,YAA1B,CACd,KAAMkB,EAAU,CAAArE,QAAAiE,aAAA,CAA0B,WAA1B,CAAhB;AAEMK,EAAc7E,CAAAA,CAAK,CACvB,EAAK,CAAAyB,EAAA,CAdSqD,CAcT,CAA6B5D,IAAAA,EADX,CAEvB,MAASqD,CAAT,EAA0BrD,IAAAA,EAFH,CAGvB,QAAWuD,CAAX,EAAyBvD,IAAAA,EAHF,CAIvB,SAAa,CAAAO,EAAb,EAAiCiD,CAAjC,EAA8CxD,IAAAA,EAJvB,CAKvB,MAAU,CAAC,CAAAO,EAAX,EAA+BkD,CAA/B,EAAyCzD,IAAAA,EALlB,CAMvB,KAAS,CAAC,CAAAO,EAAV,EAA8BmD,CAA9B,EAA0C1D,IAAAA,EANnB,CAALlB,CAUlB+E,EAAAA,CAAA,CAAArD,EAAAqD,CAAgB,GAAhBA,EAAuB,CAAAtD,EAAA,CAAmB,EAAnB,CAvBTqD,CAuBS,CAAkC,GAAzDC,CCsGE9C,EAAAA,CAAI,EACV,KAAW+C,CAAX,GDtGIH,ECsGJ,CAEE,GADMI,CACFA,CDxGFJ,CCuGQK,CAAOF,CAAPE,CACND,CAAK,IAALA,EAAAA,CAAJ,CAEO,GNvOFE,KAAAA,QAAAA,CMuOcF,CNvOdE,CMuOE,CACL,IAAK,IAAIC,EAAI,CAAb,CAAgBA,CAAhB,CAAoBH,CAAAA,OAApB,CAA8BG,CAAAA,EAA9B,CAAmC,CACjC,IAAMC,EAA4BJ,CAAAA,CAAEG,CAAFH,CAClChD,EAAAA,KAAAA,CAAUqD,kBAAAA,CAAmBN,CAAnBM,CAAVrD,CAAQ,GAARA,CAAmCqD,kBAAAA,CAAmBD,CAAnBC,CAAnCrD,CAFiC,CAD9B,IAOLA,EAAAA,KAAAA,CAAUqD,kBAAAA,CAAmBN,CAAnBM,CAAVrD,CAAQ,GAARA,CAAmCqD,kBAAAA,CAAmBD,CAAnBC,CAAnCrD,CAGJ,KAAA,EAAOA,CAAAA,KAAAA,CAAO,GAAPA,CA7CmCsD,EAtC1C,EAGMC,CAUNC,CD/CIV,CCqCoBA,MAAAA,CAAU,GAAVA,CAAe,CAAfA,CAUxBU,CATMC,CASND,CATqBD,CAAAA,CAAgB,CAAhBA,CAAAA,MAAAA,CAAyB,GAAzBA,CAA8B,CAA9BA,CASrBC,CAPIA,CAOJA,CANEC,CAAAA,CAAa,CAAbA,CAMFD,EALGC,CAAAA,CAAa,CAAbA,CAAAA,CAGM,GAHNA,CAGSA,CAAAA,CAAa,CAAbA,CAHTA,CAGM,GAHNA,CA8BuCH,CA9BvCG,CAII,GAJJA,CA8BuCH,CAzB1CE,EAAAA,CAAAA,EAAUD,CAAAA,CAAgB,CAAhBA,CAAAA,CAAsB,GAAtBA,CAAyBA,CAAAA,CAAgB,CAAhBA,CAAzBA,CAAgD,EAb1D,EACE,CADF,CDlCIT,CADF,OCyEKY,EDlGS;AAkChB/C,QAAAA,EAAc,CAAdA,CAAc,CAAG,CACf,CAAAnB,EAAA,CAAmB,CAAAlB,QAAAiE,aAAA,CAA0B,eAA1B,CACnB,EAAA9C,EAAA,CAAiB,UAAjB,EACE,CAAAD,EAAA,CAAmB,UAAnB,CAAgC,QADlC,EAAiB,eAFF,CAWjB2B,CAAAA,EAAAA,CAAAA,QAAwB,CAACxC,CAAD,CAAQ,CAC9B,GACEA,CAAAA,OADF,EACkB,IAAAc,EADlB,EAEEd,CAAAA,OAFF,EAEkB,IAAAW,EAAAqE,cAFlB,CAAA,CAMA,IAAMC,EAAoBjF,CG3GwBA,KH4GlD,IACGiF,CADH,GLvHyB,iBKuHzB,GLhKK1G,CAAAA,KAAAA,CKmKQ0G,CLnKR1G,CKgKL,EAIIe,CAAAA,CAAkC2F,CAAlC3F,CAJJ,EAAA,CASa4F,GLhIY,iBKgIZA,GLzKR3G,CAAAA,KAAAA,CKyKiB0G,CLzKjB1G,CKyKQ2G,CAAsBD,IAAAA,EAAAA,CAAtBC,KUtEf,IAAI,CACF,CAAA,CAdiCC,IAAAA,MAAAA,CVmFcC,CUnFdD,CAa/B,CAEF,MAAOlF,CAAP,CAAU,CAIV,CAAA,CAAO,IAJG,CVoEJoF,CAAAA,CAAOH,CACU,gBAAvB,EAAIG,CAAAA,QAAJ,EAEE,IAAAC,oBAAA,CADeD,CAAAA,OACf,CAAAE,MAAA,CAAuC,QAAA,EAAM,EAA7C,CAZF,CAPA,CAD8B,CAyBhCC;CAAAA,cAAAA,CAAAA,QAAa,EAAG,CACV,IAAA7E,EAAJ,EAAoB,IAAAA,EAAAqE,cAApB,EACE,IAAArE,EAAAqE,cAAAS,YAAA,CACEN,IAAAA,UAAAA,CAAe/F,CAAAA,CAAK,CAAC,OAAU,OAAX,CAALA,CAAf+F,CADF,CAEE,IAAArE,EAFF,CAFY,CAUqBC,UAAAA,CAAAA,CAAAA,CAAQ,CAC7CA,CAAAA,gBAAAA,CAAoB,eAApBA,CAAqCL,CAArCK,CAD6C,CAARA,CAAvC,CAAArC,IAAAqC,IAAA","file":"amp-megaphone-0.1.js","sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2008290323002/"}